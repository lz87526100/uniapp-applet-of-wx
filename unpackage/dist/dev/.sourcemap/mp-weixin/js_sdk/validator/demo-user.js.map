{"version":3,"file":"demo-user.js","sources":["js_sdk/validator/demo-user.js"],"sourcesContent":["// 表单校验规则由 schema2code 生成，不建议直接修改校验规则，而建议通过 schema2code 生成, 详情: https://uniapp.dcloud.net.cn/uniCloud/schema\n\n\nconst validator = {\n  \"name\": {\n    \"rules\": [\n      {\n        \"required\": true,\n        \"errorMessage\": \"{label}为必填项\"\n      },\n      {\n        \"format\": \"string\"\n      },\n      {\n        \"minLength\": 2,\n        \"maxLength\": 8\n      }\n    ],\n    \"label\": \"姓名\",\n    \"title\": \"姓名\"\n  },\n  \"age\": {\n    \"rules\": [\n      {\n        \"format\": \"double\"\n      },\n      {\n        \"minimum\": 18,\n        \"maximum\": 35\n      }\n    ],\n    \"title\": \"年龄\",\n    \"defaultValue\": 18,\n    \"label\": \"年龄\"\n  },\n  \"gender\": {\n    \"rules\": [\n      {\n        \"format\": \"int\"\n      },\n      {\n        \"range\": [\n          {\n            \"text\": \"保密\",\n            \"value\": 0\n          },\n          {\n            \"text\": \"男\",\n            \"value\": 1\n          },\n          {\n            \"text\": \"女\",\n            \"value\": 2\n          }\n        ]\n      }\n    ],\n    \"title\": \"性别\",\n    \"defaultValue\": 0,\n    \"label\": \"性别\"\n  },\n  \"avatar\": {\n    \"rules\": [\n      {\n        \"format\": \"file\"\n      }\n    ],\n    \"title\": \"头像\",\n    \"label\": \"头像\"\n  }\n}\n\nconst enumConverter = {\n  \"gender_valuetotext\": {\n    \"0\": \"保密\",\n    \"1\": \"男\",\n    \"2\": \"女\"\n  }\n}\n\nfunction filterToWhere(filter, command) {\n  let where = {}\n  for (let field in filter) {\n    let { type, value } = filter[field]\n    switch (type) {\n      case \"search\":\n        if (typeof value === 'string' && value.length) {\n          where[field] = new RegExp(value)\n        }\n        break;\n      case \"select\":\n        if (value.length) {\n          let selectValue = []\n          for (let s of value) {\n            selectValue.push(command.eq(s))\n          }\n          where[field] = command.or(selectValue)\n        }\n        break;\n      case \"range\":\n        if (value.length) {\n          let gt = value[0]\n          let lt = value[1]\n          where[field] = command.and([command.gte(gt), command.lte(lt)])\n        }\n        break;\n      case \"date\":\n        if (value.length) {\n          let [s, e] = value\n          let startDate = new Date(s)\n          let endDate = new Date(e)\n          where[field] = command.and([command.gte(startDate), command.lte(endDate)])\n        }\n        break;\n      case \"timestamp\":\n        if (value.length) {\n          let [startDate, endDate] = value\n          where[field] = command.and([command.gte(startDate), command.lte(endDate)])\n        }\n        break;\n    }\n  }\n  return where\n}\n\nexport { validator, enumConverter, filterToWhere }\n"],"names":[],"mappings":";AAGK,MAAC,YAAY;AAAA,EAChB,QAAQ;AAAA,IACN,SAAS;AAAA,MACP;AAAA,QACE,YAAY;AAAA,QACZ,gBAAgB;AAAA,MACjB;AAAA,MACD;AAAA,QACE,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,aAAa;AAAA,QACb,aAAa;AAAA,MACd;AAAA,IACF;AAAA,IACD,SAAS;AAAA,IACT,SAAS;AAAA,EACV;AAAA,EACD,OAAO;AAAA,IACL,SAAS;AAAA,MACP;AAAA,QACE,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,WAAW;AAAA,QACX,WAAW;AAAA,MACZ;AAAA,IACF;AAAA,IACD,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,SAAS;AAAA,EACV;AAAA,EACD,UAAU;AAAA,IACR,SAAS;AAAA,MACP;AAAA,QACE,UAAU;AAAA,MACX;AAAA,MACD;AAAA,QACE,SAAS;AAAA,UACP;AAAA,YACE,QAAQ;AAAA,YACR,SAAS;AAAA,UACV;AAAA,UACD;AAAA,YACE,QAAQ;AAAA,YACR,SAAS;AAAA,UACV;AAAA,UACD;AAAA,YACE,QAAQ;AAAA,YACR,SAAS;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACD,SAAS;AAAA,IACT,gBAAgB;AAAA,IAChB,SAAS;AAAA,EACV;AAAA,EACD,UAAU;AAAA,IACR,SAAS;AAAA,MACP;AAAA,QACE,UAAU;AAAA,MACX;AAAA,IACF;AAAA,IACD,SAAS;AAAA,IACT,SAAS;AAAA,EACV;AACH;AAEK,MAAC,gBAAgB;AAAA,EACpB,sBAAsB;AAAA,IACpB,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AAAA,EACN;AACH;;;"}