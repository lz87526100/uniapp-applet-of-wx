{"version":3,"file":"shopDetail.js","sources":["pages/shopList/shopDetail.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2hvcExpc3Qvc2hvcERldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"shop-detail\" v-if=\"shopInfo\">\n    <!-- å¯¼èˆªæ  - ç½®é¡¶æ˜¾ç¤º -->\n    <view class=\"nav-bar\">\n      <view class=\"nav-left\" @click=\"goBack\">\n        <text class=\"back-icon\">â†</text>\n      </view>\n      <view class=\"nav-title\">{{ shopInfo.shopName }}</view>\n      <view class=\"nav-right\">\n        <text class=\"share-icon\" @click=\"shareShop\">åˆ†äº«</text>\n      </view>\n    </view>\n\n    <!-- å¤´éƒ¨èƒŒæ™¯å›¾ - å®Œæ•´å±•ç¤º -->\n    <view class=\"header-bg\">\n      <image class=\"bg-image\" \n        :src=\"shopInfo.shopPic || '/static/default-shop.jpg'\" \n        mode=\"widthFix\"  \n        lazy-load\n        @error=\"handleImageError\"\n      />\n      <view class=\"bg-overlay\"></view>\n    </view>\n\n    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->\n    <view class=\"main-content\">\n      <!-- åº—é“ºåŸºæœ¬ä¿¡æ¯å¡ç‰‡ - ç¾åŒ–ç‰ˆ -->\n      <view class=\"shop-info-card\">\n        <!-- åº—é“ºå¤´éƒ¨ä¿¡æ¯ - ç¾åŒ–ç‰ˆ -->\n        <view class=\"shop-header\">\n          <!-- åº—é“ºLogoå®¹å™¨ -->\n          <view class=\"logo-container\">\n            <image \n              class=\"shop-logo\" \n              :src=\"shopInfo.shopPic || '/static/default-shop.jpg'\"\n              mode=\"aspectFill\"\n              @error=\"handleImageError\"\n            />\n          </view>\n\n          <!-- åº—é“ºæ ¸å¿ƒä¿¡æ¯ -->\n          <view class=\"shop-core-info\">\n            <!-- åº—é“ºåç§°å’Œè¯„åˆ† -->\n            <view class=\"title-section\">\n              <view class=\"shop-name-container\">\n                <text class=\"shop-name\">{{ shopInfo.shopName }}</text>\n                <view class=\"verified-badge\" v-if=\"shopInfo.isVerified\">\n                  <text class=\"verified-icon\">âœ“</text>\n                  <text class=\"verified-text\">è®¤è¯</text>\n                </view>\n              </view>\n              \n              <view class=\"rating-display\" v-if=\"shopInfo.rating > 0\">\n                <view class=\"rating-stars\">\n                  <text class=\"star filled\">â˜…</text>\n                  <text class=\"star filled\">â˜…</text>\n                  <text class=\"star filled\">â˜…</text>\n                  <text class=\"star filled\">â˜…</text>\n                  <text class=\"star\" :class=\"{ 'half-filled': shopInfo.rating % 2 !== 0 }\">â˜…</text>\n                </view>\n                <text class=\"rating-value\">{{ (shopInfo.rating / 10).toFixed(1) }}</text>\n              </view>\n            </view>\n\n            <!-- åº—é“ºæ ‡ç­¾å’ŒçŠ¶æ€ -->\n            <view class=\"tags-status-section\">\n              <view class=\"tags-container\">\n                <view class=\"status-tag\" :class=\"{ open: isOpen, closed: !isOpen }\">\n                  <text class=\"status-icon\">{{ isOpen ? 'ğŸŸ¢' : 'ğŸ”´' }}</text>\n                  <text class=\"status-text\">{{ shopInfo.businessHours || (isOpen ? 'è¥ä¸šä¸­' : 'å·²æ‰“çƒŠ') }}</text>\n                </view>\n              </view>\n              \n              <!-- è¯„è®ºå’Œç”µè¯æŒ‰é’® - å¹¶åˆ—æ˜¾ç¤º -->\n              <view class=\"action-buttons\">\n                <view class=\"favorite-btn\">\n                  <view class=\"favorite-badge\" @click=\"toggleFavorite\">\n                    <text class=\"favorite-icon\">{{ isFavorite ? 'â¤ï¸' : 'ğŸ¤' }}</text>\n                  </view>\n                </view>\n                <!-- è¯„è®ºæŒ‰é’® -->\n                <view class=\"comment-btn\" @click=\"showContact\">\n                  <text class=\"btn-icon\">ğŸ’¬</text>\n                </view>\n                <!-- æ‹¨æ‰“ç”µè¯æŒ‰é’® -->\n                <view class=\"phone-btn\" @click=\"handlePhoneCall\" v-if=\"shopInfo.phone\">\n                  <text class=\"btn-icon\">ğŸ“</text>\n                </view>\n              </view>\n            </view>\n\n            <!-- æ ¸å¿ƒæ•°æ®æŒ‡æ ‡ -->\n            <view class=\"metrics-section\">\n              <view class=\"metric-item highlight\">\n                <text class=\"metric-value\">{{ formatNumber(shopInfo.monthlyOrders || 0) }}</text>\n                <text class=\"metric-label\">æœˆå”®</text>\n              </view>\n              <view class=\"metric-divider\"></view>\n              <view class=\"metric-item\">\n                <text class=\"metric-value\">{{ shopInfo.deliveryTime || '30-40' }}</text>\n                <text class=\"metric-label\">åˆ†é’Ÿ</text>\n              </view>\n              <view class=\"metric-divider\"></view>\n              <view class=\"metric-item\">\n                <text class=\"metric-value\">{{ (shopInfo.deliveryFee || 0) === 0 ? 'å…è´¹' : `Â¥${shopInfo.deliveryFee}` }}</text>\n                <text class=\"metric-label\">é…é€</text>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <!-- åˆå¹¶çš„åº—é“ºä½ç½®å’Œåœ°å€ä¿¡æ¯ -->\n        <view class=\"info-section location-address-section\">\n          <view class=\"section-header\">\n            <text class=\"section-icon\">ğŸ“</text>\n            <text class=\"section-title\">åº—é“ºä½ç½®</text>\n          </view>\n          \n          <!-- åœ°å›¾å®¹å™¨ -->\n          <view class=\"map-container\">\n            <map \n              id=\"shopDetailMap\"\n              :latitude=\"mapCenter.latitude\"\n              :longitude=\"mapCenter.longitude\"\n              :markers=\"mapMarkers\"\n              :scale=\"mapScale\"\n              show-location\n              class=\"map\"\n              enable-zoom\n              enable-scroll\n              enable-rotate\n            >\n              <!-- åœ°å›¾è¦†ç›–å±‚ï¼Œç‚¹å‡»æç¤º -->\n              <view class=\"map-overlay\" @click=\"openMapWithRoute\">\n                <text class=\"overlay-text\">ç‚¹å‡»æŸ¥çœ‹å¯¼èˆªè·¯çº¿</text>\n              </view>\n            </map>\n            \n            <!-- å¯¼èˆªæŒ‰é’® -->\n            <view class=\"navigation-btn\" @click=\"openMapWithRoute\">\n              <text class=\"nav-icon\">ğŸš—</text>\n              <text class=\"nav-text\">å¯¼èˆª</text>\n            </view>\n          </view>\n          \n          <!-- åœ°å€ä¿¡æ¯ -->\n          <view class=\"address-content\">\n            <view class=\"address-header\">\n              <text class=\"address-icon\">ğŸ </text>\n              <text class=\"address-title\">è¯¦ç»†åœ°å€</text>\n            </view>\n            <text class=\"address-text\">{{ shopInfo.address }}</text>\n          </view>\n\n          <!-- æ— ä½ç½®ä¿¡æ¯çš„æç¤º -->\n          <view class=\"no-location\" v-if=\"!shopInfo.location || !shopInfo.location.coordinates\">\n            <text class=\"no-location-icon\">ğŸ—ºï¸</text>\n            <text class=\"no-location-text\">æš‚æ— ä½ç½®ä¿¡æ¯</text>\n          </view>\n        </view>\n\n        <!-- åº—é“ºä»‹ç» -->\n        <view class=\"info-section\" v-if=\"shopInfo.description\">\n          <view class=\"section-header\">\n            <text class=\"section-icon\">ğŸ“</text>\n            <text class=\"section-title\">åº—é“ºä»‹ç»</text>\n          </view>\n          <text class=\"shop-description\">{{ shopInfo.description }}</text>\n        </view>\n      </view>\n\n      <!-- èœå•/å•†å“åŒºåŸŸ -->\n      <view class=\"menu-section\" v-if=\"hasMenu\">\n        <view class=\"section-title\">ç¾é£Ÿæ¨è</view>\n        <view class=\"menu-categories\">\n          <scroll-view scroll-x class=\"category-scroll\">\n            <view class=\"category-list\">\n              <view \n                class=\"category-item\" \n                v-for=\"category in menuCategories\" \n                :key=\"category.id\"\n                :class=\"{ active: activeCategory === category.id }\"\n                @click=\"switchCategory(category.id)\"\n              >\n                <text class=\"category-name\">{{ category.name }}</text>\n              </view>\n            </view>\n          </scroll-view>\n        </view>\n        \n        <!-- å•†å“åˆ—è¡¨ -->\n        <view class=\"product-list\">\n          <view class=\"product-item\" v-for=\"product in currentProducts\" :key=\"product.id\">\n            <image class=\"product-image\" :src=\"product.image\" mode=\"aspectFill\" />\n            <view class=\"product-info\">\n              <text class=\"product-name\">{{ product.name }}</text>\n              <text class=\"product-desc\">{{ product.description }}</text>\n              <view class=\"product-bottom\">\n                <text class=\"product-price\">Â¥{{ product.price }}</text>\n                <text class=\"product-sales\">æœˆå”®{{ product.sales }}</text>\n              </view>\n            </view>\n            <view class=\"view-detail-btn\" @click=\"viewProductDetail(product)\">\n              <text class=\"view-text\">æŸ¥çœ‹</text>\n            </view>\n          </view>\n        </view>\n        \n        <view class=\"empty-menu\" v-if=\"currentProducts.length === 0\">\n          <text class=\"empty-text\">è¯¥åˆ†ç±»ä¸‹æš‚æ— ç¾é£Ÿ</text>\n        </view>\n      </view>\n\n      <!-- è¯„è®ºåŒºåŸŸ -->\n      <view class=\"reviews-section\">\n        <view class=\"section-header\">\n          <text class=\"section-title\">ç”¨æˆ·è¯„ä»·</text>\n          <text class=\"see-all\" @click=\"viewAllReviews\" v-if=\"hasReviews\">\n            æŸ¥çœ‹å…¨éƒ¨({{ reviewsTotal }})\n          </text>\n        </view>\n        \n<!-- è¯„è®ºåˆ—è¡¨ -->\n<view class=\"reviews-list\" v-if=\"hasReviews\">\n  <view \n    class=\"review-item\" \n    v-for=\"review in displayReviews\" \n    :key=\"review.id\"\n    @click=\"goToReviewDetail(review)\"\n  >\n    <!-- ç”¨æˆ·ä¿¡æ¯ -->\n    <view class=\"review-user\">\n      <image class=\"user-avatar\" :src=\"review.avatar\" mode=\"aspectFill\" \n        @error=\"handleAvatarError\"\n        @load=\"onAvatarLoad(review.userId, review.avatar)\" />\n      <view class=\"user-info\">\n        <text class=\"user-name\">{{ review.userName }}</text>\n        <view class=\"review-meta\">\n          <view class=\"rating-stars small\">\n            <text \n              class=\"star\" \n              v-for=\"n in 5\" \n              :key=\"n\"\n              :class=\"{ filled: n <= review.rating }\"\n            >â˜…</text>\n          </view>\n          <text class=\"review-time\">{{ review.time }}</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- è¯„è®ºå†…å®¹ -->\n    <view class=\"review-content\">\n      <text class=\"review-text\">{{ review.content }}</text>\n    </view>\n    \n    <!-- è¯„è®ºå›¾ç‰‡ -->\n    <view class=\"review-images\" v-if=\"review.images && review.images.length > 0\">\n      <scroll-view scroll-x class=\"images-scroll\">\n        <view class=\"images-list\">\n          <image \n            class=\"review-image\" \n            v-for=\"(img, index) in review.images\" \n            :key=\"index\"\n            :src=\"getSafeImageUrl(img)\" \n            mode=\"aspectFill\"\n            @click.stop=\"previewImage(review.images, index)\"\n            @error=\"handleImageError\"\n          />\n        </view>\n      </scroll-view>\n    </view>\n  </view>\n  \n  <!-- åŠ è½½æ›´å¤š -->\n  <view class=\"load-more\" v-if=\"displayReviews.length < reviewsTotal\" @click=\"viewAllReviews\">\n    <text class=\"load-more-text\">æŸ¥çœ‹å…¨éƒ¨{{ reviewsTotal }}æ¡è¯„ä»·</text>\n    <text class=\"load-more-icon\">â†’</text>\n  </view>\n</view>   \n        <!-- æ— è¯„è®ºçŠ¶æ€ -->\n        <view class=\"empty-reviews\" v-else>\n          <text class=\"empty-icon\">ğŸ’¬</text>\n          <text class=\"empty-text\">æš‚æ— è¯„ä»·</text>\n          <text class=\"empty-desc\">æˆä¸ºç¬¬ä¸€ä¸ªè¯„è®ºçš„äººå§</text>\n        </view>\n        \n        <!-- è¯„è®ºåŠ è½½çŠ¶æ€ -->\n        <view class=\"reviews-loading\" v-if=\"reviewsLoading\">\n          <uni-load-more status=\"loading\" content=\"åŠ è½½è¯„ä»·ä¸­...\" />\n        </view>\n      </view>\n    </view>\n\n    <!-- åŠ è½½çŠ¶æ€ -->\n    <view v-if=\"loading\" class=\"loading-overlay\">\n      <view class=\"loading-content\">\n        <uni-load-more status=\"loading\" content=\"åŠ è½½ä¸­...\" />\n      </view>\n    </view>\n  </view>\n\n  <!-- é”™è¯¯çŠ¶æ€ -->\n  <view v-else-if=\"error\" class=\"error-state\">\n    <view class=\"error-icon\">ğŸ˜”</view>\n    <text class=\"error-title\">åŠ è½½å¤±è´¥</text>\n    <text class=\"error-desc\">{{ error }}</text>\n    <button class=\"retry-btn\" @click=\"loadShopDetail(shopId)\">é‡è¯•</button>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, reactive } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app';\n\n// å“åº”å¼æ•°æ®\nconst shopInfo = ref(null);\nconst loading = ref(false);\nconst error = ref('');\nconst isFavorite = ref(false);\nconst hasMenu = ref(true);\nconst shopId = ref('');\nconst activeCategory = ref(1);\n\n// è¯„è®ºç›¸å…³æ•°æ®\nconst reviews = ref([]);\nconst reviewsLoading = ref(false);\nconst reviewsPage = ref(1);\nconst reviewsSize = ref(10);\nconst reviewsTotal = ref(0);\nconst hasMoreReviews = ref(true);\n\n// åœ°å›¾ç›¸å…³æ•°æ®\nconst mapCenter = reactive({\n  latitude: 25.034161,\n  longitude: 118.482187,\n});\nconst mapScale = ref(16);\nconst mapMarkers = ref([]);\nconst mapContext = ref(null);\n\n// ç”¨æˆ·å¤´åƒç¼“å­˜ - å‚è€ƒ blogList é¡µé¢\nconst userAvatarCache = ref(new Map());\nconst MAX_CACHE_SIZE = 30;\n\r\n// è·³è½¬åˆ°è¯„è®ºè¯¦æƒ…é¡µé¢\nfunction goToReviewDetail(review) {\n  if (!review || !review.id) {\n    uni.showToast({\n      title: 'è¯„è®ºä¿¡æ¯ä¸å®Œæ•´',\n      icon: 'none'\n    });\n    return;\n  }\n\n  // æ„å»ºè·³è½¬URLï¼ŒåŒ…å«è¯„è®ºIDå’Œåº—é“ºID\n  const url = `/pages/blog/detail?id=${review.id}&shopId=${shopInfo.value?._id || ''}`;\n  \n  console.log('ğŸ”„ è·³è½¬åˆ°è¯„è®ºè¯¦æƒ…:', url);\n  \n  uni.navigateTo({\n    url: url,\n    fail: (err) => {\n      console.error('âŒ è·³è½¬å¤±è´¥:', err);\n      uni.showToast({\n        title: 'è·³è½¬å¤±è´¥',\n        icon: 'none'\n      });\n    }\n  });\n}\r\n\r\n\n// èœå•æ¨¡æ‹Ÿæ•°æ®\nconst menuCategories = ref([\n  { id: 1, name: 'çƒ­é”€æ¨è' },\n  { id: 2, name: 'ä¸»é£Ÿ' },\n  { id: 3, name: 'å°åƒ' },\n  { id: 4, name: 'é¥®æ–™' },\n  { id: 5, name: 'å¥—é¤' }\n]);\n\nconst products = ref([\n  {\n    id: 1,\n    categoryId: 1,\n    name: 'æ‹›ç‰Œç‰›è‚‰é¢',\n    description: 'ç²¾é€‰ä¼˜è´¨ç‰›è‚‰ï¼Œæ±¤åº•é²œç¾',\n    price: 28,\n    sales: 156,\n    image: '/static/food1.jpg'\n  },\n  {\n    id: 2,\n    categoryId: 1,\n    name: 'ç‰¹è‰²ç‚¸é¸¡',\n    description: 'å¤–é…¥é‡Œå«©ï¼Œé¦™è„†å¯å£',\n    price: 22,\n    sales: 89,\n    image: '/static/food2.jpg'\n  }\n]);\n\n// è®¡ç®—å±æ€§\nconst isOpen = computed(() => {\n  if (!shopInfo.value?.businessHours) return true;\n  \n  const hoursStr = shopInfo.value.businessHours;\n  const [start, end] = hoursStr.split('-');\n  \n  if (!start || !end) return true;\n  \n  const now = new Date();\n  const currentHours = now.getHours();\n  const currentMinutes = now.getMinutes();\n  const currentTime = currentHours * 60 + currentMinutes;\n  \n  const [startHours, startMinutes] = start.split(':').map(Number);\n  const [endHours, endMinutes] = end.split(':').map(Number);\n  \n  const startTime = startHours * 60 + (startMinutes || 0);\n  const endTime = endHours * 60 + (endMinutes || 0);\n  \n  return currentTime >= startTime && currentTime <= endTime;\n});\n\nconst currentProducts = computed(() => {\n  return products.value.filter(product => product.categoryId === activeCategory.value);\n});\n\nconst displayReviews = computed(() => {\n  return reviews.value.slice(0, 3);\n});\n\nconst hasReviews = computed(() => {\n  return reviews.value.length > 0;\n});\n\n// ç”Ÿå‘½å‘¨æœŸ\nonLoad((options) => {\n  if (options.id) {\n    shopId.value = options.id;\n    loadShopDetail(options.id);\n  } else {\n    error.value = 'åº—é“ºIDä¸å­˜åœ¨';\n  }\n});\n\nonShow(() => {\n  if (shopInfo.value?.location?.coordinates) {\n    setTimeout(() => {\n      initMapMarkers();\n    }, 100);\n  }\n});\n\n// æ ¸å¿ƒæ–¹æ³•\nasync function loadShopDetail(id) {\n  loading.value = true;\n  error.value = '';\n\n  try {\n    console.log('ğŸ”„ å¼€å§‹åŠ è½½åº—é“ºè¯¦æƒ…ï¼ŒID:', id);\n    \n    const res = await uniCloud.callFunction({\n      name: 'getShopDetail',\n      data: { shopId: id }\n    });\n\n    console.log('ğŸ“¡ åº—é“ºè¯¦æƒ…å“åº”:', res);\n\n    if (res.result?.errCode === 0) {\n      shopInfo.value = res.result.data;\n      console.log('âœ… åº—é“ºä¿¡æ¯:', shopInfo.value);\n      \n      initMapMarkers();\n      checkFavoriteStatus(id);\n      \n      // åŠ è½½è¯„è®º\n      console.log('ğŸ”„ å¼€å§‹åŠ è½½è¯„è®º...');\n      await loadShopReviews(true);\n    } else {\n      error.value = res.result?.errMsg || 'åŠ è½½å¤±è´¥';\n      console.error('âŒ åº—é“ºè¯¦æƒ…åŠ è½½å¤±è´¥:', error.value);\n      useTestData(id);\n    }\n  } catch (e) {\n    console.error('âŒ åŠ è½½åº—é“ºè¯¦æƒ…å¼‚å¸¸:', e);\n    error.value = 'ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•';\n    useTestData(id);\n  } finally {\n    loading.value = false;\n  }\n}\n\n// è¯„è®ºç›¸å…³æ–¹æ³• - ä½¿ç”¨ç°æœ‰äº‘å¯¹è±¡\nasync function loadShopReviews(reset = false) {\n  if (!shopInfo.value?._id) return;\n  \n  if (reset) {\n    reviewsPage.value = 1;\n    reviews.value = [];\n    hasMoreReviews.value = true;\n  }\n  \n  if (!hasMoreReviews.value && !reset) return;\n  \n  reviewsLoading.value = true;\n  \n  try {\n    console.log('ğŸ”„ è°ƒç”¨ç°æœ‰æ–‡ç« äº‘å¯¹è±¡...');\n    \n    // ä½¿ç”¨ç°æœ‰çš„ articlesCloudObj äº‘å¯¹è±¡\n    const articlesCo = uniCloud.importObject('articlesCloudObj');\n    \n    const res = await articlesCo.list({\n      page: reviewsPage.value,\n      size: reviewsSize.value\n    });\n    \n    console.log('ğŸ“¡ æ–‡ç« äº‘å¯¹è±¡å“åº”:', res);\n    \n    if (res.errCode === 0) {\n      // è¿‡æ»¤å‡ºå½“å‰åº—é“ºçš„è¯„è®º\n      const shopReviews = (res.data || []).filter(item => \n        item.shop_id === shopInfo.value._id\n      );\n      \n      console.log('âœ… è¿‡æ»¤åçš„åº—é“ºè¯„è®º:', shopReviews.length, 'æ¡');\n      \n      // å¤„ç†è¯„è®ºæ•°æ® - å‚è€ƒ blogList é¡µé¢çš„æ•°æ®ç»“æ„\n      const newReviews = [];\n      for (let item of shopReviews) {\n        const processedReview = await processReviewData(item);\n        newReviews.push(processedReview);\n      }\n      \n      console.log('ğŸ¯ å¤„ç†åçš„è¯„è®ºæ•°æ®:', newReviews);\n      \n      // å®‰å…¨æ›´æ–°æ•°æ®\n      if (reset) {\n        reviews.value = [...newReviews];\n      } else {\n        reviews.value = [...reviews.value, ...newReviews];\n      }\n      \n      reviewsTotal.value = newReviews.length;\n      hasMoreReviews.value = newReviews.length >= reviewsSize.value;\n      reviewsPage.value += 1;\n      \n    } else {\n      throw new Error(res.errMsg || 'äº‘å¯¹è±¡è¿”å›é”™è¯¯');\n    }\n  } catch (error) {\n    console.error('âŒ è¯„è®ºåŠ è½½å¤±è´¥:', error);\n    \n    // å¤‡é€‰æ–¹æ¡ˆï¼šç›´æ¥æ•°æ®åº“æŸ¥è¯¢\n    await loadReviewsDirect();\n  } finally {\n    reviewsLoading.value = false;\n  }\n}\n\n// å¤„ç†è¯„è®ºæ•°æ® - å‚è€ƒ blogList é¡µé¢çš„å®ç°\nasync function processReviewData(item) {\n  console.log('ğŸ” å¤„ç†å•æ¡è¯„è®ºæ•°æ®:', item);\n  \n  // ç”¨æˆ·ä¿¡æ¯å¤„ç† - å‚è€ƒ blogList é¡µé¢çš„æ•°æ®ç»“æ„\n  const userInfo = item.user_id && item.user_id[0] ? item.user_id[0] : {};\n  const userId = userInfo._id;\n  \n  // å¤„ç†å¤´åƒ\n  let avatarUrl = await getAvatarUrl(userInfo, userId);\n  \n  // å¤„ç†æ—¶é—´\n  let timeStr = '';\n  if (item.publish_date) {\n    const date = new Date(item.publish_date);\n    timeStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n  }\n  \n  // å¤„ç†å›¾ç‰‡ - å‚è€ƒ blogList é¡µé¢çš„å›¾ç‰‡æ•°æ®ç»“æ„\n  let imageUrls = [];\n  if (item.pics && Array.isArray(item.pics)) {\n    imageUrls = item.pics.map(pic => {\n      // å‚è€ƒ blogList é¡µé¢çš„å›¾ç‰‡æ ¼å¼ï¼špic.url\n      if (pic && typeof pic === 'object' && pic.url) {\n        return pic.url;\n      } else if (typeof pic === 'string') {\n        return pic;\n      }\n      return null;\n    }).filter(url => url !== null);\n  }\n  \n  console.log('ğŸ–¼ï¸ å¤„ç†åçš„å›¾ç‰‡URLs:', imageUrls);\n  \n  return {\n    id: item._id,\n    userId: userId,\n    userName: userInfo.nickname || `ç”¨æˆ·${userId ? userId.slice(-4) : '0000'}`,\n    avatar: avatarUrl,\n    rating: item.rating || 5,\n    time: timeStr,\n    content: item.content || 'æš‚æ— è¯„è®ºå†…å®¹',\n    images: imageUrls\n  };\n}\n\n// è·å–å¤´åƒURL - å‚è€ƒ blogList é¡µé¢çš„å®ç°\nasync function getAvatarUrl(userInfo, userId) {\n  if (!userInfo || !userId) return '/static/default-avatar.png';\n  \n  // 1. ä¼˜å…ˆæ£€æŸ¥ç¼“å­˜\n  if (userAvatarCache.value.has(userId)) {\n    return userAvatarCache.value.get(userId);\n  }\n  \n  // 2. æ£€æŸ¥ç”¨æˆ·å¯¹è±¡çš„å¤´åƒæ•°æ®\n  let avatarUrl = '/static/default-avatar.png';\n  \n  if (userInfo.avatar_url && userInfo.avatar_url.startsWith('http')) {\n    avatarUrl = userInfo.avatar_url;\n  } else if (userInfo.avatar_file && userInfo.avatar_file.url) {\n    const fileUrl = userInfo.avatar_file.url;\n    if (fileUrl.startsWith('http')) {\n      avatarUrl = fileUrl;\n    } else if (fileUrl.startsWith('cloud:')) {\n      // å¼‚æ­¥è½¬æ¢äº‘å­˜å‚¨URL\n      try {\n        const result = await uniCloud.getTempFileURL({\n          fileList: [fileUrl]\n        });\n        \n        if (result.fileList && result.fileList[0] && result.fileList[0].tempFileURL) {\n          avatarUrl = result.fileList[0].tempFileURL;\n        }\n      } catch (error) {\n        console.error('è½¬æ¢äº‘å­˜å‚¨URLå¤±è´¥:', error);\n      }\n    }\n  } else if (userInfo.avatar && userInfo.avatar.startsWith('http')) {\n    avatarUrl = userInfo.avatar;\n  }\n  \n  // æ›´æ–°ç¼“å­˜\n  if (avatarUrl !== '/static/default-avatar.png') {\n    updateAvatarCache(userId, avatarUrl);\n  }\n  \n  return avatarUrl;\n}\n\n// æ›´æ–°å¤´åƒç¼“å­˜\nfunction updateAvatarCache(userId, avatarUrl) {\n  if (userAvatarCache.value.size >= MAX_CACHE_SIZE) {\n    const firstKey = userAvatarCache.value.keys().next().value;\n    userAvatarCache.value.delete(firstKey);\n  }\n  userAvatarCache.value.set(userId, avatarUrl);\n}\n\n// å¤´åƒåŠ è½½æˆåŠŸå¤„ç†\nfunction onAvatarLoad(userId, avatarUrl) {\n  if (!userId || userAvatarCache.value.has(userId)) return;\n  \n  // ç¼“å­˜å¤´åƒURL\n  updateAvatarCache(userId, avatarUrl);\n}\n\n// å¤´åƒåŠ è½½å¤±è´¥å¤„ç†\nfunction handleAvatarError(event) {\n  console.log('å¤´åƒåŠ è½½å¤±è´¥:', event);\n  event.target.src = '/static/default-avatar.png';\n}\n\n// å›¾ç‰‡URLå®‰å…¨æ£€æŸ¥\nfunction getSafeImageUrl(img) {\n  if (typeof img === 'string') {\n    return img;\n  } else if (img && typeof img === 'object') {\n    // å°è¯•ä»å¯¹è±¡ä¸­æå–URL\n    if (img.url) return img.url;\n    if (img.path) return img.path;\n    if (img.tempFileURL) return img.tempFileURL;\n  }\n  return '/static/default-image.png';\n}\n\n// å¤‡é€‰æ–¹æ¡ˆï¼šç›´æ¥æ•°æ®åº“æŸ¥è¯¢\nasync function loadReviewsDirect() {\n  try {\n    const db = uniCloud.database();\n    const res = await db.collection('demo-articles')\n      .where({ shop_id: shopInfo.value._id })\n      .orderBy('publish_date', 'desc')\n      .limit(5)\n      .get();\n    \n    console.log('ğŸ“Š ç›´æ¥æŸ¥è¯¢ç»“æœ:', res);\n    \n    if (res.data && res.data.length > 0) {\n      const simpleReviews = [];\n      for (let item of res.data) {\n        const processedReview = await processReviewData(item);\n        simpleReviews.push(processedReview);\n      }\n      \n      reviews.value = [...simpleReviews];\n      reviewsTotal.value = res.data.length;\n      \n      uni.showToast({\n        title: `åŠ è½½${simpleReviews.length}æ¡è¯„è®º`,\n        icon: 'success'\n      });\n    }\n  } catch (e) {\n    console.error('ç›´æ¥æŸ¥è¯¢å¤±è´¥:', e);\n  }\n}\n\n// æŸ¥çœ‹å…¨éƒ¨è¯„è®º\nfunction viewAllReviews() {\n  if (!shopInfo.value) {\n    uni.showToast({ title: 'åº—é“ºä¿¡æ¯ä¸å­˜åœ¨', icon: 'none' });\n    return;\n  }\n  \n  uni.navigateTo({\n    url: `/pages/blog/list?shopId=${shopInfo.value._id}&shopName=${encodeURIComponent(shopInfo.value.shopName || '')}`\n  });\n}\n\n// å›¾ç‰‡é¢„è§ˆ\nfunction previewImage(images, currentIndex) {\n  if (!images || images.length === 0) return;\n  \n  // ç¡®ä¿å›¾ç‰‡URLæ˜¯å­—ç¬¦ä¸²\n  const safeImages = images.map(img => getSafeImageUrl(img));\n  \n  uni.previewImage({\n    urls: safeImages,\n    current: safeImages[currentIndex] || safeImages[0]\n  });\n}\n\n// åˆå§‹åŒ–åœ°å›¾æ ‡è®°\nfunction initMapMarkers() {\n  if (!shopInfo.value?.location?.coordinates) return;\n  \n  const [longitude, latitude] = shopInfo.value.location.coordinates;\n  \n  mapCenter.latitude = latitude;\n  mapCenter.longitude = longitude;\n  \n  mapMarkers.value = [{\n    id: shopInfo.value._id,\n    latitude: latitude,\n    longitude: longitude,\n    title: shopInfo.value.shopName,\n    iconPath: '/static/logo/local.png',\n    width: 30,\n    height: 30,\n    callout: {\n      content: `${shopInfo.value.shopName}\\nâ­${(shopInfo.value.rating / 10).toFixed(1)} | æœˆå”®${shopInfo.value.monthlyOrders}å•`,\n      color: '#333',\n      fontSize: 12,\n      borderRadius: 8,\n      bgColor: '#fff',\n      padding: 8,\n      display: 'ALWAYS',\n      textAlign: 'center'\n    }\n  }];\n  \n  setTimeout(() => {\n    mapContext.value = uni.createMapContext('shopDetailMap', this);\n  }, 300);\n}\n\n// æµ‹è¯•æ•°æ®å‡½æ•°\nfunction useTestData(id) {\n  shopInfo.value = {\n    _id: id,\n    shopName: '99è‡ªåŠ©é¤',\n    shopPic: '/static/default-shop.jpg',\n    category: 'è‡ªé€‰é¤',\n    rating: 46,\n    monthlyOrders: 1662,\n    deliveryTime: '30-40',\n    deliveryFee: 3,\n    address: 'ç¦å»ºçœæ³‰å·å¸‚å—å®‰å¸‚åº·ç¾é•‡åº·å…ƒè·¯8å·é—½å—ç§‘æŠ€å­¦é™¢ç¬¬ä¸‰é£Ÿå ‚',\n    businessHours: '09:00-21:30',\n    description: 'æ–°åº—å¼€ä¸šæ¬¢è¿ä¸‹å•ï¼æ±¤é¢åˆ†è£…',\n    phone: '18197236883',\n    location: {\n      type: 'Point',\n      coordinates: [118.478807, 25.032761]\n    },\n    isVerified: true\n  };\n  \n  reviews.value = [];\n  reviewsTotal.value = 0;\n  \n  initMapMarkers();\n  hasMenu.value = true;\n  checkFavoriteStatus(id);\n  \n  // ä»ç„¶å°è¯•åŠ è½½çœŸå®è¯„è®º\n  setTimeout(() => {\n    loadShopReviews(true);\n  }, 1000);\n}\n\n// è¾…åŠ©æ–¹æ³•\nfunction checkFavoriteStatus(id) {\n  const favorites = uni.getStorageSync('favoriteShops') || [];\n  isFavorite.value = favorites.includes(id);\n}\n\nfunction goBack() {\n  uni.navigateBack();\n}\n\nfunction handleImageError(e) {\n  console.log('å›¾ç‰‡åŠ è½½å¤±è´¥:', e);\n  e.target.src = '/static/default-shop.jpg';\n}\n\nfunction formatNumber(num) {\n  if (num >= 10000) {\n    return (num / 10000).toFixed(1) + 'ä¸‡';\n  }\n  return num.toString();\n}\n\n// ç”µè¯ç‚¹å‡»äº‹ä»¶\nfunction handlePhoneCall() {\n  if (!shopInfo.value?.phone) return;\n  \n  uni.showActionSheet({\n    itemList: [`æ‹¨æ‰“ ${shopInfo.value.phone}`, 'å–æ¶ˆ'],\n    success: (res) => {\n      if (res.tapIndex === 0) {\n        makePhoneCall();\n      }\n    }\n  });\n}\n\nfunction makePhoneCall() {\n  if (!shopInfo.value?.phone) return;\n  \n  uni.makePhoneCall({\n    phoneNumber: shopInfo.value.phone,\n    fail: () => {\n      uni.showToast({\n        title: 'æ— æ³•æ‹¨æ‰“ç”µè¯',\n        icon: 'none'\n      });\n    }\n  });\n}\n\n// å¯¼èˆªè·¯çº¿åŠŸèƒ½\nfunction openMapWithRoute() {\n  if (!shopInfo.value?.location?.coordinates) {\n    uni.showToast({\n      title: 'æš‚æ— ä½ç½®ä¿¡æ¯',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  const [longitude, latitude] = shopInfo.value.location.coordinates;\n  \n  uni.openLocation({\n    latitude: latitude,\n    longitude: longitude,\n    name: shopInfo.value.shopName,\n    address: shopInfo.value.address,\n    scale: 18,\n    success: () => {\n      console.log('æ‰“å¼€åœ°å›¾æˆåŠŸ');\n    },\n    fail: () => {\n      uni.showToast({\n        title: 'æ‰“å¼€åœ°å›¾å¤±è´¥',\n        icon: 'none'\n      });\n    }\n  });\n}\n\nfunction toggleFavorite() {\n  if (!shopInfo.value) return;\n  \n  const favorites = uni.getStorageSync('favoriteShops') || [];\n  \n  if (isFavorite.value) {\n    const index = favorites.indexOf(shopInfo.value._id);\n    if (index > -1) {\n      favorites.splice(index, 1);\n    }\n    uni.showToast({ title: 'å·²å–æ¶ˆæ”¶è—', icon: 'success' });\n  } else {\n    favorites.push(shopInfo.value._id);\n    uni.showToast({ title: 'æ”¶è—æˆåŠŸ', icon: 'success' });\n  }\n  \n  uni.setStorageSync('favoriteShops', favorites);\n  isFavorite.value = !isFavorite.value;\n}\n\nfunction shareShop() {\n  if (!shopInfo.value) return;\n  \n  uni.share({\n    provider: 'weixin',\n    type: 0,\n    title: `æ¨èåº—é“ºï¼š${shopInfo.value.shopName}`,\n    summary: shopInfo.value.description || 'è¿™å®¶åº—å¾ˆä¸é”™ï¼Œæ¨èç»™ä½ ï¼',\n    href: `/pages/shopList/shopDetail?id=${shopInfo.value._id}`,\n    success: () => {\n      uni.showToast({ title: 'åˆ†äº«æˆåŠŸ', icon: 'success' });\n    },\n    fail: () => {\n      uni.showToast({ title: 'åˆ†äº«å¤±è´¥', icon: 'none' });\n    }\n  });\n}\n\nfunction showContact() {\n  if (!shopInfo.value) return;\n  \n  uni.navigateTo({\n    url: `/pages/blog/edit?shopId=${shopInfo.value._id}`\n  });\n}\n\nfunction switchCategory(categoryId) {\n  activeCategory.value = categoryId;\n}\n\n// æŸ¥çœ‹å•†å“è¯¦æƒ…\nfunction viewProductDetail(product) {\n  uni.navigateTo({\n    url: `/pages/product/detail?id=${product.id}`\n  });\n}\n</script>\n\n\r\n\n\n<style lang=\"scss\" scoped>\n$primary: #FF6B35;\n$secondary: #4A6CF7;\n$text: #2d3748;\n$light-text: #718096;\n$border-radius: 24rpx;\n.shop-detail {\n  min-height: 100vh;\n  background: #f8fafc;\n  position: relative;\n}\n\n/* å¯¼èˆªæ  */\n.nav-bar {\n  position: sticky;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 88rpx;\n  padding: 0 30rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(20rpx);\n  z-index: 1000;\n  padding-top: constant(safe-area-inset-top);\n  padding-top: env(safe-area-inset-top);\n  \n  .nav-left, .nav-right {\n    width: 80rpx;\n    display: flex;\n    align-items: center;\n  }\n  \n  .back-icon, .share-icon {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: $text;\n  }\n  \n  .nav-title {\n    font-size: 32rpx;\n    font-weight: 700;\n    color: $text;\n    max-width: 400rpx;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    text-align: center;\n  }\n}\n\n/* å¤´éƒ¨èƒŒæ™¯å›¾ */\n.header-bg {\n  width: 100%;\n  height: 320rpx;\n  position: relative;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 0 0 40rpx 40rpx;\n  overflow: hidden;\n  \n  .bg-image {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    opacity: 0.8;\n  }\n  \n  .bg-overlay {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 120rpx;\n    background: linear-gradient(to top, rgba(0,0,0,0.3), transparent);\n  }\n}\n\n/* ä¸»è¦å†…å®¹åŒºåŸŸ */\n.main-content {\n  position: relative;\n  z-index: 2;\n  margin-top: -20rpx;\n}\n\n/* åº—é“ºä¿¡æ¯å¡ç‰‡ - ç¾åŒ–ç‰ˆ */\n.shop-info-card {\n  background: white;\n  border-radius: 32rpx 32rpx 0 0;\n  margin-top: -40rpx;\n  position: relative;\n  z-index: 10;\n  box-shadow: 0 -10rpx 30rpx rgba(0, 0, 0, 0.08);\n}\n\n/* åº—é“ºå¤´éƒ¨ä¿¡æ¯ - ç¾åŒ–ç‰ˆ */\n.shop-header {\n  display: flex;\n  padding: 40rpx 32rpx 32rpx;\n  position: relative;\n  \n  /* Logoå®¹å™¨ */\n  .logo-container {\n    position: relative;\n    margin-right: 24rpx;\n    flex-shrink: 0;\n    \n    .shop-logo {\n      margin-top: 20rpx;\n      width: 200rpx;\n      height: 200rpx;\n      border-radius: 24rpx;\n      border: 6rpx solid white;\n      box-shadow: \n        0 12rpx 32rpx rgba(0, 0, 0, 0.15),\n        0 4rpx 16rpx rgba(0, 0, 0, 0.1);\n      background: linear-gradient(135deg, #f8fafc, #e2e8f0);\n      object-fit: cover;\n    }\n    \n    /* æ”¶è—å¾½ç«  - åœ¨Logoå³ä¸‹è§’é‡Œé¢ */\n    .favorite-badge {\n      position: absolute;\n      bottom: 8rpx;\n      right: 8rpx;\n      width: 44rpx;\n      height: 44rpx;\n      background: rgba(255, 255, 255, 0.95);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.15);\n      z-index: 10;\n      \n      .favorite-icon {\n        font-size: 24rpx;\n      }\n    }\n  }\n  \n  /* æ ¸å¿ƒä¿¡æ¯åŒºåŸŸ */\n  .shop-core-info {\n    flex: 1;\n    min-width: 0;\n  }\n  \n  /* æ ‡é¢˜åŒºåŸŸ */\n  .title-section {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    margin-bottom: 20rpx;\n    \n    .shop-name-container {\n      flex: 1;\n      min-width: 0;\n      display: flex;\n      align-items: center;\n      flex-wrap: wrap;\n      gap: 12rpx;\n      \n      .shop-name {\n        font-size: 36rpx;\n        font-weight: 800;\n        color: #1a202c;\n        line-height: 1.2;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        max-width: 300rpx;\n      }\n      \n      .verified-badge {\n        background: linear-gradient(135deg, #4299e1, #3182ce);\n        color: white;\n        padding: 6rpx 12rpx;\n        border-radius: 12rpx;\n        font-size: 20rpx;\n        display: flex;\n        align-items: center;\n        gap: 4rpx;\n        flex-shrink: 0;\n        \n        .verified-icon {\n          font-size: 16rpx;\n          font-weight: bold;\n        }\n      }\n    }\n    \n    .rating-display {\n      display: flex;\n      align-items: center;\n      gap: 12rpx;\n      flex-shrink: 0;\n      \n      .rating-stars {\n        display: flex;\n        gap: 2rpx;\n        \n        .star {\n          font-size: 24rpx;\n          color: #e2e8f0;\n          \n          &.filled {\n            color: #ffd700;\n          }\n          \n          &.half-filled {\n            background: linear-gradient(90deg, #ffd700 50%, #e2e8f0 50%);\n            background-clip: text;\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n          }\n        }\n      }\n      \n      .rating-value {\n        font-size: 28rpx;\n        font-weight: 700;\n        color: #f6ad55;\n      }\n    }\n  }\n  \n  /* æ ‡ç­¾å’ŒçŠ¶æ€åŒºåŸŸ */\n  .tags-status-section {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 24rpx;\n    \n    .tags-container {\n      display: flex;\n      gap: 12rpx;\n      flex-wrap: wrap;\n      \n      .status-tag {\n        padding: 8rpx 16rpx;\n        border-radius: 20rpx;\n        font-size: 22rpx;\n        display: flex;\n        align-items: center;\n        gap: 6rpx;\n        flex-shrink: 0;\n        \n        &.open {\n          background: linear-gradient(135deg, #c6f6d5, #9ae6b4);\n          color: #22543d;\n        }\n        \n        &.closed {\n          background: linear-gradient(135deg, #fed7d7, #feb2b2);\n          color: #742a2a;\n        }\n        \n        .status-icon {\n          font-size: 18rpx;\n        }\n        \n        .status-text {\n          font-size: 25rpx;\n          font-weight: 500;\n        }\n      }\n    }\n    \n    /* è¯„è®ºå’Œç”µè¯æŒ‰é’®å®¹å™¨ */\n    .action-buttons {\n      display: flex;\n      gap: 12rpx;\n      \n      .comment-btn, .phone-btn, .favorite-btn {\n        width: 56rpx;\n        height: 56rpx;\n        border-radius: 50%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s ease;\n        \n        &:active {\n          transform: scale(0.95);\n        }\n        \n        .btn-icon {\n          font-size: 28rpx;\n          color: white;\n        }\n      }\n      \n      .favorite-btn {\n        background: linear-gradient(135deg, #ffaa7f, #ff8935);\n      }\n      \n      .comment-btn {\n        background: linear-gradient(135deg, #4A6CF7, #6B8CFF);\n      }\n      \n      .phone-btn {\n        background: linear-gradient(135deg, #48bb78, #38a169);\n      }\n    }\n  }\n  \n  /* æ•°æ®æŒ‡æ ‡åŒºåŸŸ */\n  .metrics-section {\n    display: flex;\n    align-items: center;\n    background: linear-gradient(135deg, #f8fafc, #edf2f7);\n    border-radius: 20rpx;\n    padding: 20rpx 24rpx;\n    margin-bottom: 24rpx;\n    \n    .metric-item {\n      flex: 1;\n      text-align: center;\n      \n      &.highlight {\n        .metric-value {\n          color: #e53e3e;\n          font-size: 32rpx;\n        }\n      }\n      \n      .metric-value {\n        display: block;\n        font-size: 28rpx;\n        font-weight: 700;\n        color: #2d3748;\n        margin-bottom: 4rpx;\n      }\n      \n      .metric-label {\n        font-size: 22rpx;\n        color: #718096;\n      }\n    }\n    \n    .metric-divider {\n      width: 1rpx;\n      height: 40rpx;\n      background: #e2e8f0;\n      margin: 0 20rpx;\n    }\n  }\n}\n\n/* åˆå¹¶çš„ä½ç½®å’Œåœ°å€æ ·å¼ */\n.location-address-section {\n  padding: 0 32rpx 32rpx;\n  border-bottom: 1rpx solid #f1f5f9;\n  \n  .section-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 24rpx;\n    \n    .section-icon {\n      margin-right: 12rpx;\n      font-size: 28rpx;\n    }\n    \n    .section-title {\n      font-size: 28rpx;\n      font-weight: 600;\n      color: $text;\n    }\n  }\n  \n  .map-container {\n    height: 400rpx;\n    position: relative;\n    background: #f8fafc;\n    border-radius: 16rpx;\n    overflow: hidden;\n    margin-bottom: 24rpx;\n    \n    .map {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      top: 0;\n      left: 0;\n      \n      .map-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0, 0, 0, 0.3);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n        cursor: pointer;\n      }\n      \n      &:active .map-overlay {\n        opacity: 1;\n      }\n      \n      .overlay-text {\n        color: white;\n        font-size: 28rpx;\n        font-weight: 600;\n        background: rgba(0, 0, 0, 0.7);\n        padding: 16rpx 32rpx;\n        border-radius: 50rpx;\n      }\n    }\n    \n    /* å¯¼èˆªæŒ‰é’® */\n    .navigation-btn {\n      position: absolute;\n      bottom: 30rpx;\n      right: 20rpx;\n      background: $primary;\n      color: white;\n      padding: 16rpx 24rpx;\n      border-radius: 50rpx;\n      display: flex;\n      align-items: center;\n      gap: 8rpx;\n      box-shadow: 0 2rpx 10rpx rgba(255, 107, 53, 0.3);\n      z-index: 1000;\n      \n      .nav-icon {\n        font-size: 24rpx;\n      }\n      \n      .nav-text {\n        font-size: 24rpx;\n        font-weight: 600;\n      }\n    }\n  }\n  \n  .address-content {\n    padding: 20rpx;\n    background: #f8fafc;\n    border-radius: 12rpx;\n    margin-bottom: 20rpx;\n    \n    .address-header {\n      display: flex;\n      align-items: center;\n      margin-bottom: 12rpx;\n      \n      .address-icon {\n        margin-right: 12rpx;\n        font-size: 24rpx;\n      }\n      \n      .address-title {\n        font-size: 26rpx;\n        font-weight: 600;\n        color: $text;\n      }\n    }\n    \n    .address-text {\n      font-size: 26rpx;\n      color: $light-text;\n      line-height: 1.5;\n      display: block;\n    }\n  }\n  \n  .no-location {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    padding: 60rpx 0;\n    background: #f8fafc;\n    border-radius: 16rpx;\n    margin-bottom: 20rpx;\n    \n    .no-location-icon {\n      font-size: 80rpx;\n      margin-bottom: 20rpx;\n      opacity: 0.5;\n    }\n    \n    .no-location-text {\n      font-size: 28rpx;\n      color: $light-text;\n    }\n  }\n}\n\n.info-section {\n  padding: 24rpx 32rpx;\n  border-bottom: 1rpx solid #f1f5f9;\n  \n  &:last-child {\n    border-bottom: none;\n  }\n  \n  .section-header {\n    display: flex;\n    align-items: center;\n    margin-bottom: 16rpx;\n    \n    .section-icon {\n      margin-right: 12rpx;\n      font-size: 28rpx;\n    }\n    \n    .section-title {\n      font-size: 28rpx;\n      font-weight: 600;\n      color: $text;\n    }\n  }\n  \n  .shop-description {\n    font-size: 26rpx;\n    color: $light-text;\n    line-height: 1.5;\n  }\n}\n\n/* èœå•åŒºåŸŸ */\n.menu-section {\n  background: white;\n  margin: 24rpx 30rpx;\n  padding: 30rpx;\n  border-radius: $border-radius;\n  \n  .section-title {\n    font-size: 30rpx;\n    font-weight: 700;\n    color: $text;\n    margin-bottom: 24rpx;\n  }\n  \n  .menu-categories {\n    margin-bottom: 30rpx;\n    \n    .category-scroll {\n      white-space: nowrap;\n      \n      .category-list {\n        display: inline-flex;\n        gap: 20rpx;\n        \n        .category-item {\n          padding: 16rpx 32rpx;\n          background: #f8fafc;\n          border-radius: 50rpx;\n          font-size: 26rpx;\n          color: $light-text;\n          flex-shrink: 0;\n          \n          &.active {\n            background: $primary;\n            color: white;\n          }\n          \n          .category-name {\n            white-space: nowrap;\n          }\n        }\n      }\n    }\n  }\n  \n  .product-list {\n    .product-item {\n      display: flex;\n      padding: 24rpx 0;\n      border-bottom: 1rpx solid #f1f5f9;\n      \n      &:last-child {\n        border-bottom: none;\n      }\n      \n      .product-image {\n        width: 160rpx;\n        height: 160rpx;\n        border-radius: 16rpx;\n        object-fit: cover;\n        margin-right: 20rpx;\n      }\n      \n      .product-info {\n        flex: 1;\n        min-width: 0;\n        \n        .product-name {\n          font-size: 28rpx;\n          font-weight: 600;\n          color: $text;\n          display: block;\n          margin-bottom: 8rpx;\n        }\n        \n        .product-desc {\n          font-size: 24rpx;\n          color: $light-text;\n          display: block;\n          margin-bottom: 16rpx;\n          line-height: 1.4;\n        }\n        \n        .product-bottom {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          \n          .product-price {\n            font-size: 28rpx;\n            font-weight: 700;\n            color: $primary;\n          }\n          \n          .product-sales {\n            font-size: 22rpx;\n            color: $light-text;\n          }\n        }\n      }\n      \n      .view-detail-btn {\n        width: 80rpx;\n        height: 60rpx;\n        background: $primary;\n        color: white;\n        border: none;\n        border-radius: 12rpx;\n        font-size: 24rpx;\n        font-weight: 600;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-shrink: 0;\n        margin-left: 16rpx;\n        align-self: flex-end;\n        \n        .view-text {\n          font-size: 22rpx;\n        }\n      }\n    }\n  }\n  \n  .empty-menu {\n    text-align: center;\n    padding: 60rpx 0;\n    \n    .empty-text {\n      font-size: 26rpx;\n      color: $light-text;\n    }\n  }\n}\n\n/* è¯„è®ºåŒºåŸŸæ ·å¼ */\n.reviews-section {\n  background: white;\n  margin: 24rpx 30rpx;\n  padding: 30rpx;\n  border-radius: $border-radius;\n  margin-bottom: 120rpx;\n  \n  .section-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 24rpx;\n    \n    .section-title {\n      font-size: 30rpx;\n      font-weight: 700;\n      color: $text;\n    }\n    \n    .see-all {\n      font-size: 26rpx;\n      color: $primary;\n    }\n  }\n  \n  .reviews-list {\n    .review-item {\n      padding: 30rpx 0;\n      border-bottom: 1rpx solid #f1f5f9;\n      \n      &:last-child {\n        border-bottom: none;\n      }\n      \n      .review-user {\n        display: flex;\n        align-items: center;\n        margin-bottom: 20rpx;\n        \n        .user-avatar {\n          width: 64rpx;\n          height: 64rpx;\n          border-radius: 50%;\n          margin-right: 16rpx;\n        }\n        \n        .user-info {\n          flex: 1;\n          \n          .user-name {\n            font-size: 28rpx;\n            font-weight: 600;\n            color: $text;\n            display: block;\n            margin-bottom: 8rpx;\n          }\n          \n          .review-meta {\n            display: flex;\n            align-items: center;\n            gap: 16rpx;\n            \n            .rating-stars.small {\n              .star {\n                font-size: 20rpx;\n                \n                &.filled {\n                  color: #ffd700;\n                }\n                \n                &:not(.filled) {\n                  color: #e2e8f0;\n                }\n              }\n            }\n            \n            .review-time {\n              font-size: 22rpx;\n              color: $light-text;\n            }\n          }\n        }\n      }\n      \n      .review-content {\n        margin-bottom: 20rpx;\n        \n        .review-text {\n          font-size: 26rpx;\n          color: $text;\n          line-height: 1.5;\n        }\n      }\n      \n      .review-images {\n        .images-scroll {\n          white-space: nowrap;\n          \n          .images-list {\n            display: inline-flex;\n            gap: 16rpx;\n            \n            .review-image {\n              width: 160rpx;\n              height: 160rpx;\n              border-radius: 12rpx;\n              object-fit: cover;\n            }\n          }\n        }\n      }\n    }\n    \n    .load-more {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 30rpx 0;\n      color: $primary;\n      font-size: 26rpx;\n      gap: 8rpx;\n      \n      .load-more-text {\n        font-weight: 600;\n      }\n      \n      .load-more-icon {\n        font-size: 24rpx;\n      }\n    }\n  }\n  \n  .empty-reviews {\n    text-align: center;\n    padding: 60rpx 0;\n    \n    .empty-icon {\n      font-size: 80rpx;\n      margin-bottom: 20rpx;\n      display: block;\n      opacity: 0.5;\n    }\n    \n    .empty-text {\n      font-size: 28rpx;\n      color: $text;\n      display: block;\n      margin-bottom: 8rpx;\n    }\n    \n    .empty-desc {\n      font-size: 24rpx;\n      color: $light-text;\n      display: block;\n    }\n  }\n  \n  .reviews-loading {\n    padding: 40rpx 0;\n    text-align: center;\n  }\n}\n\n/* æ»šåŠ¨æ¡éšè— */\n.images-scroll ::-webkit-scrollbar {\n  display: none;\n}\n\n.category-scroll ::-webkit-scrollbar {\n  display: none;\n}\n\n.category-scroll {\n  -webkit-overflow-scrolling: touch;\n}\n\n/* åŠ è½½çŠ¶æ€ */\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.9);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n}\n\n.loading-content {\n  background: white;\n  padding: 60rpx;\n  border-radius: 20rpx;\n  box-shadow: 0 10rpx 40rpx rgba(0, 0, 0, 0.1);\n}\n\n/* é”™è¯¯çŠ¶æ€ */\n.error-state {\n  text-align: center;\n  padding: 200rpx 40rpx;\n  \n  .error-icon {\n    font-size: 120rpx;\n    margin-bottom: 30rpx;\n    opacity: 0.6;\n  }\n  \n  .error-title {\n    font-size: 34rpx;\n    font-weight: 700;\n    color: $text;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n  \n  .error-desc {\n    font-size: 26rpx;\n    color: $light-text;\n    margin-bottom: 40rpx;\n    display: block;\n    line-height: 1.5;\n  }\n  \n  .retry-btn {\n    background: $primary;\n    color: white;\n    border: none;\n    border-radius: 50rpx;\n    padding: 20rpx 60rpx;\n    font-size: 28rpx;\n  }\n}\n\n/* å“åº”å¼è°ƒæ•´ */\n@media (max-width: 375px) {\n  .shop-header {\n    flex-direction: column;\n    align-items: center;\n    text-align: center;\n    \n    .logo-container {\n      margin-right: 0;\n      margin-bottom: 24rpx;\n    }\n    \n    .title-section {\n      flex-direction: column;\n      gap: 16rpx;\n      \n      .shop-name-container {\n        justify-content: center;\n      }\n    }\n    \n    .tags-status-section {\n      flex-direction: column;\n      gap: 16rpx;\n      \n      .tags-container {\n        justify-content: center;\n      }\n      \n      .action-buttons {\n        justify-content: center;\n      }\n    }\n    \n    .metrics-section {\n      flex-direction: column;\n      gap: 16rpx;\n      \n      .metric-divider {\n        display: none;\n      }\n    }\n  }\n}\n\n/* å®‰å…¨åŒºåŸŸé€‚é… */\n@supports (padding: max(0px)) {\n  .nav-bar {\n    padding-left: max(30rpx, env(safe-area-inset-left));\n    padding-right: max(30rpx, env(safe-area-inset-right));\n  }\n  \n  .shop-info-card {\n    padding-left: max(24rpx, env(safe-area-inset-left));\n    padding-right: max(24rpx, env(safe-area-inset-right));\n  }\n  \n  .menu-section, .reviews-section {\n    margin-left: max(30rpx, env(safe-area-inset-left));\n    margin-right: max(30rpx, env(safe-area-inset-right));\n  }\n}\n\n/* éšè—é«˜å¾·åœ°å›¾slogan */\n:deep(.amap-logo) {\n  display: none !important;\n}\n\n:deep(.amap-copyright) {\n  display: none !important;\n}\n\n/* å®šä¹‰å˜é‡ */\n$primary: #FF6B35;\n$secondary: #4A6CF7;\n$text: #2d3748;\n$light-text: #718096;\n$border-radius: 24rpx;\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/shopList/shopDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","reactive","uni","computed","onLoad","onShow","uniCloud","error"],"mappings":"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"}