{"version":3,"file":"showFavoritesMap.js","sources":["pages/showMap/showFavoritesMap.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2hvd01hcC9zaG93RmF2b3JpdGVzTWFwLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- Âú∞ÂõæÂÆπÂô® -->\n    <view class=\"map-container\">\n      <map \n        id=\"favoritesMap\"\n        :key=\"mapKey\"\n        :latitude=\"center.latitude\"\n        :longitude=\"center.longitude\"\n        :markers=\"markers\"\n        :scale=\"scale\"\n        show-location\n        class=\"map\"\n        enable-zoom\n        enable-scroll\n        enable-rotate\n        @markertap=\"onMarkerTap\"\n        @regionchange=\"onRegionChange\"\n      >\n      </map>\n      \n      <!-- È°∂ÈÉ®Áä∂ÊÄÅÊ†è -->\n      <view class=\"top-bar\">\n        <view class=\"header-content\">\n          <view class=\"user-section\">\n            <view class=\"user-info\" @tap=\"goToUserCenter\">\n              <view class=\"avatar\">\n                <image \n                  v-if=\"currentUser?.avatar\"\n                  class=\"avatar-img\"\n                  :src=\"currentUser.avatar\"\n                  mode=\"aspectFill\"\n                  @error=\"(e) => handleImageError(e, 'user')\"\n                />\n                <text v-else class=\"avatar-icon\">üë§</text>\n              </view>\n              <view class=\"user-text\">\n                <text class=\"username\">{{ currentUser?.nickname || 'Áî®Êà∑' }}</text>\n                <text class=\"user-desc\">ÊàëÁöÑÊî∂ËóèÂ∫óÈì∫</text>\n              </view>\n            </view>\n            <view class=\"stats-badge\">\n              <text class=\"stats-count\">{{ favoritesList.length }}</text>\n              <text class=\"stats-label\">Êî∂Ëóè</text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- Âú∞ÂõæÊéßÂà∂ÊåâÈíÆÁªÑ -->\n      <view class=\"map-controls\">\n        <view class=\"control-group\">\n          <view class=\"location-btn\" @tap=\"backToCurrentLocation\">\n            <view class=\"btn-icon\">üìç</view>\n          </view>\n          <view class=\"zoom-controls\">\n            <view class=\"zoom-btn\" @tap=\"zoomIn\">\n              <text class=\"zoom-icon\">+</text>\n            </view>\n            <view class=\"zoom-btn\" @tap=\"zoomOut\">\n              <text class=\"zoom-icon\">-</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- Êî∂ËóèÂ∫óÈì∫ÂàóË°® -->\n    <view class=\"shop-list-container\">\n      <!-- ÂàóË°®Â§¥ÈÉ® -->\n      <view class=\"list-header\">\n        <view class=\"header-content\">\n          <view class=\"title-section\">\n            <text class=\"main-title\">Êî∂ËóèÂ∫óÈì∫</text>\n            <text class=\"sub-title\">Discover Your Favorites</text>\n          </view>\n          <view class=\"filter-section\">\n            <view class=\"filter-tabs\">\n              <text class=\"filter-tab\" :class=\"{ active: sortBy === 'default' }\" @tap=\"changeSort('default')\">\n                <text class=\"tab-icon\">üïí</text>\n                <text>ÊúÄËøëÊî∂Ëóè</text>\n              </text>\n              <text class=\"filter-tab\" :class=\"{ active: sortBy === 'rating' }\" @tap=\"changeSort('rating')\">\n                <text class=\"tab-icon\">‚≠ê</text>\n                <text>ËØÑÂàÜÊúÄÈ´ò</text>\n              </text>\n              <text class=\"filter-tab\" :class=\"{ active: sortBy === 'sales' }\" @tap=\"changeSort('sales')\">\n                <text class=\"tab-icon\">üî•</text>\n                <text>ÈîÄÈáèÊúÄÂ•Ω</text>\n              </text>\n            </view>\n          </view>\n        </view>\n      </view>\n\n      <!-- ÂàóË°®ÂÜÖÂÆπ -->\n      <view class=\"list-content\">\n        <scroll-view \n          scroll-y \n          class=\"list-scroll\"\n          enhanced=\"true\"\n          show-scrollbar=\"false\"\n        >\n          <!-- Á©∫Áä∂ÊÄÅ -->\n          <view v-if=\"favoritesList.length === 0 && !loading\" class=\"empty-state\">\n            <view class=\"empty-illustration\">\n              <view class=\"empty-icon\">üí´</view>\n              <view class=\"empty-stars\">\n                <text class=\"star\">‚≠ê</text>\n                <text class=\"star\">‚≠ê</text>\n                <text class=\"star\">‚≠ê</text>\n              </view>\n            </view>\n            <text class=\"empty-title\">ÊöÇÊó†Êî∂ËóèÂ∫óÈì∫</text>\n            <text class=\"empty-desc\">ÊÇ®ËøòÊ≤°ÊúâÊî∂Ëóè‰ªª‰ΩïÂ∫óÈì∫ÔºåÂø´ÂéªÂèëÁé∞ÂñúÊ¨¢ÁöÑÂ∫óÈì∫Âêß</text>\n            <button class=\"empty-btn\" @tap=\"goToShopList\">\n              <text class=\"btn-icon\">üîç</text>\n              <text class=\"btn-text\">Êé¢Á¥¢Â∫óÈì∫</text>\n            </button>\n          </view>\n\n          <!-- Êî∂ËóèÂ∫óÈì∫ÂàóË°® -->\n          <view class=\"shop-cards\">\n            <view \n              v-for=\"(item, index) in sortedFavorites\" \n              :key=\"item.favoriteId\"\n              class=\"shop-card\"\n              :class=\"{ active: selectedShopId === item.shopInfo._id }\"\n              @tap=\"onShopItemTap(item)\"\n            >\n              <!-- Âç°ÁâáÂÜÖÂÆπ -->\n              <view class=\"card-content\">\n                <!-- È°∂ÈÉ®‰ø°ÊÅØ -->\n                <view class=\"card-header\">\n                  <view class=\"shop-meta\">\n                    <!-- Â∫óÈì∫Â§¥ÂÉè -->\n                    <view class=\"shop-rank\">\n                      <image \n                        class=\"shop-avatar\" \n                        :src=\"getShopImage(item.shopInfo.shopPic)\"\n                        mode=\"aspectFill\"\n                        @error=\"(e) => handleImageError(e, 'shop')\"\n                      />\n                    </view>\n                    <view class=\"shop-main\">\n                      <!-- Â∫óÈì∫ÂêçÁß∞ÂíåËØÑÂàÜÂπ∂ÊéíÊòæÁ§∫ -->\n                      <view class=\"title-rating-row\">\n                        <text class=\"shop-name\">{{ item.shopInfo.shopName }}</text>\n                        <view class=\"rating-tag\">\n                          <text class=\"rating-icon\">‚≠ê</text>\n                          <text class=\"rating-value\">{{ (item.shopInfo.rating / 10).toFixed(1) }}</text>\n                        </view>\n                      </view>\r\n                      \n                      <view class=\"card-footer\">\r\n                        <view class=\"stats-section\">\r\n                          <view class=\"stat\">\r\n                              <text class=\"stat-label\">ÊúàÂîÆ</text>\r\n                            <text class=\"stat-value\">{{ formatNumber(item.shopInfo.monthlyOrders || 0) }}</text>\r\n                          </view>\r\n                          <view class=\"stat-divider\"></view>\r\n                          <view class=\"stat\">\r\n                              <text class=\"stat-label\">Ëê•‰∏ö</text>\r\n                            <text class=\"stat-value\">{{ item.shopInfo.businessHours || '09:00-21:00' }}</text>\r\n                          </view>\r\n                        </view>\r\n                        \r\n                        <view class=\"action-section\">\r\n                          <view class=\"action-buttons\">\r\n                            <view class=\"action-btn detail-btn\" @tap.stop=\"goToShopDetail(item.shopInfo._id)\">\r\n                          <text class=\"action-icon\">üîç</text>\r\n                            </view>\r\n                            <view class=\"action-btn navigate-btn\" @tap.stop=\"openShopNavigation(item.shopInfo)\">\r\n                              <text class=\"action-icon\">üìç</text>\r\n                            </view>\r\n                            <view class=\"action-btn favorite-btn\" @tap.stop=\"cancelFavorite(item)\">\r\n                              <text class=\"action-icon\">üíî</text>\r\n                            </view>\r\n                          </view>\r\n                        </view>\r\n                      </view>\r\n                      \n                      <!-- Âú∞ÂùÄ‰ø°ÊÅØ -->\n                      <view class=\"info-item\">\n                        <text class=\"info-text\">{{ item.shopInfo.address }}</text>\n                      </view>\n                    </view>\n                  </view>\n                </view>\n\n                <!-- Â∫ïÈÉ®ÁªüËÆ°ÂíåÊìç‰Ωú -->\n                \n              </view>\n            </view>\n          </view>\n          \n          <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n          <view v-if=\"loading\" class=\"loading-state\">\n            <view class=\"loading-content\">\n              <view class=\"loading-animation\">\n                <view class=\"loading-dot dot-1\"></view>\n                <view class=\"loading-dot dot-2\"></view>\n                <view class=\"loading-dot dot-3\"></view>\n              </view>\n              <text class=\"loading-text\">Ê≠£Âú®Âä†ËΩΩÊÇ®ÁöÑÊî∂Ëóè...</text>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n    </view>\n    \n    <!-- Â∫óÈì∫ËØ¶ÊÉÖÂºπÁ™ó -->\n    <uni-popup ref=\"detailPopup\" type=\"center\" background-color=\"transparent\">\n      <view class=\"popup-content\" v-if=\"selectedShop\">\n        <!-- ÂÖ≥Èó≠ÊåâÈíÆ -->\n        <view class=\"close-popup-btn\" @tap=\"closePopup\">\n          <text class=\"close-icon\">√ó</text>\n        </view>\n        \n        <!-- Â∫óÈì∫Â§¥ÈÉ® -->\n        <view class=\"popup-header\">\n          <view class=\"shop-avatar-large\">\n            <image \n              class=\"shop-avatar-img\" \n              :src=\"getShopImage(selectedShop.shopPic)\"\n              mode=\"aspectFill\"\n              @error=\"(e) => handleImageError(e, 'shop')\"\n            />\n          </view>\n          <view class=\"shop-basic\">\n            <text class=\"popup-title\">{{ selectedShop.shopName }}</text>\n            <view class=\"rating-section\">\n              <view class=\"rating-stars\">\n                <text v-for=\"n in 5\" :key=\"n\" class=\"star\" \n                      :class=\"n <= Math.round(selectedShop.rating / 2) ? 'active' : ''\">‚òÖ</text>\n              </view>\n              <text class=\"rating-text\">{{ (selectedShop.rating / 10).toFixed(1) }}</text>\n            </view>\n          </view>\n        </view>\n\n        <!-- Â∫óÈì∫‰ø°ÊÅØ -->\n        <view class=\"popup-body\">\n          <!-- Âú∞ÂùÄ‰ø°ÊÅØ -->\n          <view class=\"info-section address-section\">\n            <view class=\"section-header\">\n              <text class=\"section-icon\">üìç</text>\n              <text class=\"section-title\">Â∫óÈì∫Âú∞ÂùÄ</text>\n            </view>\n            <text class=\"address-text\">{{ selectedShop.address }}</text>\n          </view>\n\n          <!-- Ëê•‰∏öÊó∂Èó¥ -->\n          <view class=\"info-section hours-section\">\n            <view class=\"section-header\">\n              <text class=\"section-icon\">üïí</text>\n              <text class=\"section-title\">Ëê•‰∏öÊó∂Èó¥</text>\n            </view>\n            <text class=\"hours-text\">{{ selectedShop.businessHours || '09:00-21:00' }}</text>\n          </view>\n\n          <!-- ËÅîÁ≥ªÁîµËØù -->\n          <view class=\"info-section phone-section\" v-if=\"selectedShop.phone\">\n            <view class=\"section-header\">\n              <text class=\"section-icon\">üìû</text>\n              <text class=\"section-title\">ËÅîÁ≥ªÁîµËØù</text>\n            </view>\n            <text class=\"phone-text\">{{ selectedShop.phone }}</text>\n          </view>\n\n          <!-- Â∫óÈì∫ÊèèËø∞ -->\n          <view class=\"info-section desc-section\" v-if=\"selectedShop.description\">\n            <view class=\"section-header\">\n              <text class=\"section-icon\">üìù</text>\n              <text class=\"section-title\">Â∫óÈì∫‰ªãÁªç</text>\n            </view>\n            <text class=\"desc-text\">{{ selectedShop.description }}</text>\n          </view>\n        </view>\n\n        <!-- Êìç‰ΩúÊåâÈíÆ -->\n        <view class=\"popup-footer\">\r\n          <button class=\"action-btn detail-btn\" @tap=\"goToShopDetail(selectedShop._id)\">\r\n            <text class=\"btn-text\">Êü•ÁúãËØ¶ÊÉÖ</text>\r\n          </button>\r\n          <button class=\"action-btn nav-btn\" @tap=\"openNavigation\">\r\n            <text class=\"btn-text\">ÂØºËà™ÂâçÂæÄ</text>\r\n          </button>\r\n        </view>\n      </view>\n    </uni-popup>\n\n    <!-- Êìç‰ΩúÁ°ÆËÆ§ÂºπÁ™ó -->\n    <uni-popup ref=\"confirmPopup\" type=\"dialog\">\n      <uni-popup-dialog \n        type=\"warn\" \n        title=\"ÂèñÊ∂àÊî∂Ëóè\" \n        content=\"Á°ÆÂÆöË¶ÅÂèñÊ∂àÊî∂ËóèËØ•Â∫óÈì∫ÂêóÔºü\" \n        :before-close=\"true\" \n        @close=\"handleCancelClose\" \n        @confirm=\"handleCancelConfirm\"\n      ></uni-popup-dialog>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, reactive, onMounted, nextTick, computed } from 'vue'\nimport { onLoad, onShow } from '@dcloudio/uni-app'\n\n// Âú∞Âõæ‰∏≠ÂøÉÁÇπÔºàÈóΩÂçóÁßëÊäÄÂ≠¶Èô¢Â§ßËá¥ÂùêÊ†áÔºâ\nconst center = reactive({\n  latitude: 25.034161,\n  longitude: 118.482187,\n})\n\nconst scale = ref(15)\nconst markers = ref([])\nconst favoritesList = ref([])\nconst selectedShopId = ref(null)\nconst selectedShop = ref(null)\nconst detailPopup = ref(null)\nconst confirmPopup = ref(null)\nconst mapContext = ref(null)\nconst loading = ref(false)\nconst sortBy = ref('default')\n\n// Áî®Êà∑Áõ∏ÂÖ≥\nconst isLoggedIn = ref(false)\nconst userId = ref('')\nconst currentUser = ref(null)\nconst currentCancelItem = ref(null)\n\n// Áî®‰∫éÂº∫Âà∂Âà∑Êñ∞Âú∞ÂõæÁöÑkey\nconst mapKey = ref(Date.now())\n\n// ËÆ°ÁÆóÂ±ûÊÄßÔºöÊéíÂ∫èÂêéÁöÑÊî∂ËóèÂàóË°®\nconst sortedFavorites = computed(() => {\n  if (!favoritesList.value.length) return []\n  \n  const list = [...favoritesList.value]\n  \n  switch (sortBy.value) {\n    case 'rating':\n      return list.sort((a, b) => b.shopInfo.rating - a.shopInfo.rating)\n    case 'sales':\n      return list.sort((a, b) => (b.shopInfo.monthlyOrders || 0) - (a.shopInfo.monthlyOrders || 0))\n    default:\n      // ÈªòËÆ§ÊåâÊî∂ËóèÊó∂Èó¥ÊéíÂ∫èÔºàÊúÄËøëÊî∂ËóèÂú®ÂâçÔºâ\n      return list.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\n  }\n})\n\nonLoad(() => {\n  console.log('üîÑ Êî∂ËóèÂú∞ÂõæÈ°µÈù¢Âä†ËΩΩ')\n  checkLoginStatus()\n  mapContext.value = uni.createMapContext('favoritesMap', this)\n})\n\nonShow(() => {\n  console.log('üîÑ Êî∂ËóèÂú∞ÂõæÈ°µÈù¢ÊòæÁ§∫')\n  checkLoginStatus()\n})\n\n// Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\nasync function checkLoginStatus() {\n  try {\n    console.log('üîç ÂºÄÂßãÊ£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ...')\n    \n    const userInfoFromStorage = uni.getStorageSync('uni-id-pages-userInfo')\n    const token = uni.getStorageSync('uni_id_token')\n    \n    console.log('üì¶ Â≠òÂÇ®Ê£ÄÊü•ÁªìÊûú:', {\n      hasToken: !!token,\n      hasUserInfo: !!userInfoFromStorage,\n      userInfo: userInfoFromStorage\n    })\n    \n    if (token && userInfoFromStorage && userInfoFromStorage._id) {\n      isLoggedIn.value = true\n      userId.value = userInfoFromStorage._id\n      currentUser.value = userInfoFromStorage\n      \n      console.log('‚úÖ Áî®Êà∑Â∑≤ÁôªÂΩï:', { userId: userId.value })\n      await loadFavoritesData()\n      return\n    }\n    \n    isLoggedIn.value = false\n    userId.value = ''\n    currentUser.value = null\n    favoritesList.value = []\n    \n    console.log('‚ùå Áî®Êà∑Êú™ÁôªÂΩïÊàñ‰ø°ÊÅØ‰∏çÂÆåÊï¥')\n    showLoginPrompt()\n    \n  } catch (error) {\n    console.error('‚ùå Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÂ§±Ë¥•:', error)\n    isLoggedIn.value = false\n    userId.value = ''\n    currentUser.value = null\n    favoritesList.value = []\n    showLoginPrompt()\n  }\n}\n\n// ÊòæÁ§∫ÁôªÂΩïÊèêÁ§∫\nfunction showLoginPrompt() {\n  uni.showModal({\n    title: 'ÊèêÁ§∫',\n    content: 'ËØ∑ÂÖàÁôªÂΩïÊü•ÁúãÊî∂ËóèÂ∫óÈì∫',\n    confirmText: 'ÂéªÁôªÂΩï',\n    cancelText: 'ËøîÂõû',\n    success: (res) => {\n      if (res.confirm) {\n        uni.navigateTo({\n          url: '/pages/login/login'\n        })\n      } else {\n        uni.navigateBack()\n      }\n    }\n  })\n}\n\n// Âä†ËΩΩÊî∂ËóèÂ∫óÈì∫Êï∞ÊçÆ\nconst loadFavoritesData = async () => {\n  try {\n    loading.value = true\n    uni.showLoading({ title: 'Âä†ËΩΩ‰∏≠...' })\n    \n    const articlesCo = uniCloud.importObject('articlesCloudObj')\n    \n    const res = await articlesCo.getShopFavoritesList({\n      page: 1,\n      size: 50,\n      userId: userId.value\n    })\n    \n    console.log('üìã Êî∂ËóèÂàóË°®ÂìçÂ∫î:', res)\n    \n    if (res.errCode === 0) {\n      favoritesList.value = res.data.list || []\n      console.log('‚úÖ ÊàêÂäüÂä†ËΩΩÊî∂ËóèÂ∫óÈì∫:', favoritesList.value.length)\n      await initMapMarkers()\n    } else if (res.errCode === 1001) {\n      handleNotLogin()\n    } else {\n      throw new Error(res.errMsg)\n    }\n  } catch (error) {\n    console.error('‚ùå Âä†ËΩΩÊî∂ËóèÂ∫óÈì∫Â§±Ë¥•:', error)\n    uni.showToast({\n      title: 'Âä†ËΩΩÂ§±Ë¥•',\n      icon: 'none'\n    })\n  } finally {\n    loading.value = false\n    uni.hideLoading()\n  }\n}\n\n// ÂàùÂßãÂåñÂú∞ÂõæÊ†áËÆ∞\nconst initMapMarkers = async () => {\n  console.log('üó∫Ô∏è ÂºÄÂßãÂàùÂßãÂåñÂú∞ÂõæÊ†áËÆ∞ÔºåÊî∂ËóèÂ∫óÈì∫Êï∞Èáè:', favoritesList.value.length)\n  \n  // Á≠âÂæÖDOMÊõ¥Êñ∞\n  await nextTick()\n  \n  // Áõ¥Êé•Ë∞ÉÁî®ÈáçÊñ∞ÂàõÂª∫Ê†áËÆ∞ÂáΩÊï∞\n  await recreateMapMarkers()\n  \n  // Â¶ÇÊûúÊúâÊî∂ËóèÂ∫óÈì∫ÔºåÂ∞ÜÂú∞Âõæ‰∏≠ÂøÉÁÇπÁßªÂä®Âà∞Á¨¨‰∏Ä‰∏™Â∫óÈì∫\n  if (favoritesList.value.length > 0 && markers.value.length > 0) {\n    center.latitude = markers.value[0].latitude\n    center.longitude = markers.value[0].longitude\n    scale.value = 16\n    console.log('üéØ Âú∞Âõæ‰∏≠ÂøÉÁÇπÁßªÂä®Âà∞:', center)\n  }\n}\n\n// ÈáçÊñ∞ÂàõÂª∫Âú∞ÂõæÊ†áËÆ∞\nasync function recreateMapMarkers() {\n  console.log('üîÑ ÈáçÊñ∞ÂàõÂª∫Âú∞ÂõæÊ†áËÆ∞')\n  \n  // ÂÖàÊ∏ÖÁ©∫ÊâÄÊúâÊ†áËÆ∞\n  markers.value = []\n  \n  // Á≠âÂæÖDOMÊõ¥Êñ∞\n  await nextTick()\n  \n  // Â¶ÇÊûúÊúâÊî∂ËóèÂ∫óÈì∫ÔºåÈáçÊñ∞ÂàõÂª∫Ê†áËÆ∞\n  if (favoritesList.value.length > 0) {\n    const newMarkers = favoritesList.value\n      .filter(item => {\n        const shop = item.shopInfo\n        if (!shop.location || !shop.location.coordinates) {\n          console.log('‚ùå Â∫óÈì∫Áº∫Â∞ëÂùêÊ†á‰ø°ÊÅØ:', shop.shopName)\n          return false\n        }\n        const coordinates = shop.location.coordinates\n        if (!coordinates[0] || !coordinates[1] || coordinates[0] === 0 || coordinates[1] === 0) {\n          console.log('‚ùå Â∫óÈì∫ÂùêÊ†áÊó†Êïà:', shop.shopName, coordinates)\n          return false\n        }\n        return true\n      })\n      .map(item => {\n        const shop = item.shopInfo\n        const coordinates = shop.location.coordinates\n        return {\n          id: shop._id,\n          latitude: coordinates[1],\n          longitude: coordinates[0],\n          title: shop.shopName,\n          iconPath: '/static/logo/local.png',\n          width: 20,\n          height: 20,\n          callout: {\n            content: `${shop.shopName}\\n‚≠ê${(shop.rating / 10).toFixed(1)} | ÊúàÂîÆ${formatNumber(shop.monthlyOrders || 0)}Âçï`,\n            color: '#333',\n            fontSize: 12,\n            borderRadius: 8,\n            bgColor: '#fff',\n            padding: 8,\n            display: 'ALWAYS',\n            textAlign: 'center'\n          }\n        }\n      })\n    \n    // ‰ΩøÁî®Êñ∞Êï∞ÁªÑ\n    markers.value = newMarkers\n    \n    console.log('‚úÖ ÈáçÊñ∞ÂàõÂª∫Ê†áËÆ∞ÂÆåÊàêÔºåÊï∞Èáè:', markers.value.length)\n  } else {\n    console.log('üì≠ Ê≤°ÊúâÊî∂ËóèÂ∫óÈì∫ÔºåÊ†áËÆ∞Â∑≤Ê∏ÖÁ©∫')\n  }\n  \n  // Âº∫Âà∂Âà∑Êñ∞Âú∞Âõæ\n  await forceRefreshMap()\n}\n\n// Â¢ûÂº∫ÁöÑÂº∫Âà∂Âà∑Êñ∞Âú∞Âõæ\nasync function forceRefreshMap() {\n  console.log('üîÑ Âº∫Âà∂Âà∑Êñ∞Âú∞Âõæ')\n  \n  try {\n    // ÊñπÊ≥ï1: ‰øÆÊîπkeyÂº∫Âà∂ÈáçÊñ∞Ê∏≤ÊüìÂú∞ÂõæÁªÑ‰ª∂\n    mapKey.value = Date.now()\n    \n    // ÊñπÊ≥ï2: Áü≠ÊöÇÂª∂ËøüÂêéÈáçÊñ∞ËÆæÁΩÆ‰∏≠ÂøÉÁÇπ\n    await nextTick()\n    \n    // ÊñπÊ≥ï3: ‰ΩøÁî®Âú∞Âõæ‰∏ä‰∏ãÊñáÊñπÊ≥ïÂà∑Êñ∞\n    if (mapContext.value) {\n      setTimeout(() => {\n        mapContext.value.moveToLocation({\n          latitude: center.latitude,\n          longitude: center.longitude,\n          success: () => {\n            console.log('‚úÖ Âú∞ÂõæÂà∑Êñ∞ÊàêÂäü')\n          },\n          fail: (err) => {\n            console.log('‚ö†Ô∏è Âú∞ÂõæÂà∑Êñ∞Â§±Ë¥•:', err)\n          }\n        })\n      }, 100)\n    }\n  } catch (error) {\n    console.error('‚ùå Âº∫Âà∂Âà∑Êñ∞Âú∞ÂõæÂ§±Ë¥•:', error)\n  }\n}\n\n// Âú∞ÂõæÊ†áËÆ∞ÁÇπÂáª‰∫ã‰ª∂\nconst onMarkerTap = (e) => {\n  const markerId = e.detail.markerId\n  console.log('üìç Âú∞ÂõæÊ†áËÆ∞ÁÇπÂáª:', markerId)\n  \n  const item = favoritesList.value.find(item => item.shopInfo._id === markerId)\n  if (item) {\n    selectedShopId.value = markerId\n    showShopDetail(item.shopInfo)\n    focusOnShopLocation(item.shopInfo)\n  }\n}\n\n// Â∫óÈì∫È°πÁÇπÂáª‰∫ã‰ª∂\nconst onShopItemTap = (item) => {\n  selectedShopId.value = item.shopInfo._id\n  selectedShop.value = item.shopInfo\n  focusOnShopLocation(item.shopInfo)\n  showShopDetail(item.shopInfo)\n}\n\n// ËÅöÁÑ¶Âà∞Â∫óÈì∫‰ΩçÁΩÆ\nconst focusOnShopLocation = (shop) => {\n  if (!shop || !shop.location || !shop.location.coordinates) {\n    console.log('‚ùå Êó†Ê≥ïËÅöÁÑ¶Âà∞Â∫óÈì∫‰ΩçÁΩÆ: ÂùêÊ†á‰ø°ÊÅØÁº∫Â§±')\n    return\n  }\n  \n  const coordinates = shop.location.coordinates\n  center.latitude = coordinates[1]\n  center.longitude = coordinates[0]\n  scale.value = 18\n  \n  console.log('üéØ Âú∞ÂõæËÅöÁÑ¶Âà∞Â∫óÈì∫:', shop.shopName, coordinates)\n}\n\n// ÊòæÁ§∫Â∫óÈì∫ËØ¶ÊÉÖÂºπÁ™ó\nconst showShopDetail = (shop) => {\n  selectedShop.value = shop\n  detailPopup.value.open()\n  console.log('üì± ÊòæÁ§∫Â∫óÈì∫ËØ¶ÊÉÖ:', shop.shopName)\n}\n\n// ÂÖ≥Èó≠ÂºπÁ™ó\nconst closePopup = () => {\n  detailPopup.value.close()\n}\n\n// ËøîÂõûÂΩìÂâç‰ΩçÁΩÆ\nconst backToCurrentLocation = () => {\n  center.latitude = 25.034161\n  center.longitude = 118.482187\n  scale.value = 15\n  selectedShopId.value = null\n}\n\n// Âú∞ÂõæÁº©ÊîæÊéßÂà∂\nconst zoomIn = () => {\n  if (scale.value < 20) {\n    scale.value += 1\n  }\n}\n\nconst zoomOut = () => {\n  if (scale.value > 3) {\n    scale.value -= 1\n  }\n}\n\n// ÊéíÂ∫èÊéßÂà∂\nconst changeSort = (type) => {\n  sortBy.value = type\n}\n\n// ÊâìÂºÄÂØºËà™\nconst openNavigation = () => {\n  if (!selectedShop.value || !selectedShop.value.location || !selectedShop.value.location.coordinates) {\n    uni.showToast({\n      title: 'Êó†Ê≥ïËé∑ÂèñÂ∫óÈì∫‰ΩçÁΩÆ',\n      icon: 'none'\n    })\n    return\n  }\n  \n  const coordinates = selectedShop.value.location.coordinates\n  uni.openLocation({\n    latitude: coordinates[1],\n    longitude: coordinates[0],\n    name: selectedShop.value.shopName,\n    address: selectedShop.value.address,\n    success: () => {\n      console.log('ÊâìÂºÄÂú∞ÂõæÊàêÂäü')\n    },\n    fail: (error) => {\n      console.error('ÊâìÂºÄÂú∞ÂõæÂ§±Ë¥•:', error)\n      uni.showToast({\n        title: 'ÊâìÂºÄÂú∞ÂõæÂ§±Ë¥•',\n        icon: 'none'\n      })\n    }\n  })\n}\n\n// ÂçïÁã¨ÊâìÂºÄÂ∫óÈì∫ÂØºËà™\nconst openShopNavigation = (shop) => {\n  if (!shop || !shop.location || !shop.location.coordinates) {\n    uni.showToast({\n      title: 'Êó†Ê≥ïËé∑ÂèñÂ∫óÈì∫‰ΩçÁΩÆ',\n      icon: 'none'\n    })\n    return\n  }\n  \n  const coordinates = shop.location.coordinates\n  uni.openLocation({\n    latitude: coordinates[1],\n    longitude: coordinates[0],\n    name: shop.shopName,\n    address: shop.address,\n    success: () => {\n      console.log('ÊâìÂºÄÂú∞ÂõæÊàêÂäü')\n    },\n    fail: (error) => {\n      console.error('ÊâìÂºÄÂú∞ÂõæÂ§±Ë¥•:', error)\n      uni.showToast({\n        title: 'ÊâìÂºÄÂú∞ÂõæÂ§±Ë¥•',\n        icon: 'none'\n      })\n    }\n  })\n}\n\n// Ë∑≥ËΩ¨Âà∞Â∫óÈì∫ËØ¶ÊÉÖÈ°µÈù¢\nconst goToShopDetail = (shopId) => {\n  if (!shopId) {\n    uni.showToast({\n      title: 'Â∫óÈì∫‰ø°ÊÅØ‰∏çÂÆåÊï¥',\n      icon: 'none'\n    })\n    return\n  }\n\n  const url = `/pages/shopList/shopDetail?id=${shopId}`\n  \n  console.log('üîÑ Ë∑≥ËΩ¨Âà∞Â∫óÈì∫ËØ¶ÊÉÖ:', { shopId, url })\n  \n  closePopup()\n  \n  uni.navigateTo({\n    url: url,\n    success: () => {\n      console.log('‚úÖ Ë∑≥ËΩ¨Âà∞Â∫óÈì∫ËØ¶ÊÉÖÈ°µÊàêÂäü')\n    },\n    fail: (err) => {\n      console.error('‚ùå Ë∑≥ËΩ¨Â§±Ë¥•:', err)\n      uni.showToast({\n        title: 'Ë∑≥ËΩ¨Â§±Ë¥•ÔºåËØ∑ÈáçËØï',\n        icon: 'none'\n      })\n    }\n  })\n}\n\n// ÂèñÊ∂àÊî∂Ëóè\nfunction cancelFavorite(item) {\n  if (!isLoggedIn.value || !userId.value) {\n    showLoginPrompt()\n    return\n  }\n  \n  currentCancelItem.value = item\n  confirmPopup.value.open()\n}\n\n// Â§ÑÁêÜÂèñÊ∂àÊî∂ËóèÁ°ÆËÆ§ - ‰ºòÂåñÁâàÊú¨\nasync function handleCancelConfirm() {\n  if (!currentCancelItem.value) return\n  \n  try {\n    const articlesCo = uniCloud.importObject('articlesCloudObj')\n    \n    const res = await articlesCo.toggleShopFavorite({\n      shopId: currentCancelItem.value.shopInfo._id,\n      userId: userId.value\n    })\n    \n    console.log('üì° ÂèñÊ∂àÊî∂ËóèÂìçÂ∫î:', res)\n    \n    if (res.errCode === 0) {\n      // ËÆ∞ÂΩïË¶ÅÁßªÈô§ÁöÑÂ∫óÈì∫‰ø°ÊÅØ\n      const removedShopId = currentCancelItem.value.shopInfo._id\n      const removedShopName = currentCancelItem.value.shopInfo.shopName\n      \n      console.log('üóëÔ∏è ÂºÄÂßãÁßªÈô§Â∫óÈì∫:', removedShopName, removedShopId)\n      \n      // 1. ‰ªéÊî∂ËóèÂàóË°®‰∏≠ÁßªÈô§\n      favoritesList.value = favoritesList.value.filter(\n        item => item.favoriteId !== currentCancelItem.value.favoriteId\n      )\n      \n      console.log('‚úÖ ‰ªéÊî∂ËóèÂàóË°®‰∏≠ÁßªÈô§ÊàêÂäüÔºåÂâ©‰Ωô:', favoritesList.value.length)\n      \n      // 2. ÂΩªÂ∫ïÈáçÊñ∞ÂàõÂª∫Âú∞ÂõæÊ†áËÆ∞\n      await recreateMapMarkers()\n      \n      // 3. Â¶ÇÊûúÂΩìÂâçÈÄâ‰∏≠ÁöÑÂ∫óÈì∫Ë¢´ÂèñÊ∂àÊî∂ËóèÔºåÈáçÁΩÆÈÄâ‰∏≠Áä∂ÊÄÅ\n      if (selectedShopId.value === removedShopId) {\n        selectedShopId.value = null\n        selectedShop.value = null\n        closePopup()\n        console.log('‚úÖ ÈáçÁΩÆÈÄâ‰∏≠Áä∂ÊÄÅ')\n      }\n      \n      // 4. ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫\n      uni.showToast({\n        title: 'Â∑≤ÂèñÊ∂àÊî∂Ëóè',\n        icon: 'success',\n        duration: 1500\n      })\n      \n      console.log('üìä Êõ¥Êñ∞ÂêéÊî∂ËóèÊï∞Èáè:', favoritesList.value.length)\n      \n    } else if (res.errCode === 1001) {\n      handleNotLogin()\n    } else {\n      throw new Error(res.errMsg)\n    }\n  } catch (error) {\n    console.error('‚ùå ÂèñÊ∂àÊî∂ËóèÂ§±Ë¥•:', error)\n    uni.showToast({\n      title: 'ÂèñÊ∂àÊî∂ËóèÂ§±Ë¥•',\n      icon: 'none'\n    })\n  } finally {\n    currentCancelItem.value = null\n    confirmPopup.value.close()\n  }\n}\n\n// Â§ÑÁêÜÂèñÊ∂àÊî∂ËóèÂÖ≥Èó≠\nfunction handleCancelClose() {\n  currentCancelItem.value = null\n  confirmPopup.value.close()\n}\n\n// Â§ÑÁêÜÊú™ÁôªÂΩïÁä∂ÊÄÅ\nfunction handleNotLogin() {\n  isLoggedIn.value = false\n  userId.value = ''\n  currentUser.value = null\n  favoritesList.value = []\n  markers.value = []\n  showLoginPrompt()\n}\n\n// Ë∑≥ËΩ¨Âà∞Â∫óÈì∫ÂàóË°®\nfunction goToShopList() {\n  uni.switchTab({\n    url: '/pages/shopList/shopList'\n  })\n}\n\n// Ë∑≥ËΩ¨Âà∞Áî®Êà∑‰∏≠ÂøÉ\nfunction goToUserCenter() {\n  uni.navigateTo({\n    url: '/pages/user/user'\n  })\n}\n\n// Ëé∑ÂèñÂ∫óÈì∫ÂõæÁâáURL\nfunction getShopImage(shopPic) {\n  if (!shopPic) {\n    return '/static/default-shop.jpg'\n  }\n  \n  // Â§ÑÁêÜÂõæÁâáURLÔºåÁ°Æ‰øùÊòØÂÆåÊï¥ÁöÑURL\n  if (shopPic.startsWith('http')) {\n    return shopPic\n  } else if (shopPic.startsWith('/')) {\n    return `https://your-domain.com${shopPic}`\n  } else {\n    return `/static/shop-images/${shopPic}`\n  }\n}\n\n// Ê†ºÂºèÂåñÊï∞Â≠ó\nfunction formatNumber(num) {\n  if (num >= 10000) {\n    return (num / 10000).toFixed(1) + '‰∏á'\n  }\n  return num.toString()\n}\n\n// ÂõæÁâáÂä†ËΩΩÈîôËØØÂ§ÑÁêÜ\nfunction handleImageError(e, type = 'shop') {\n  console.log('üñºÔ∏è ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', e, 'Á±ªÂûã:', type)\n  \n  const defaultImages = {\n    shop: '/static/default-shop.jpg',\n    user: '/static/default-avatar.png'\n  }\n  \n  // ËÆæÁΩÆÈªòËÆ§ÂõæÁâá\n  e.target.src = defaultImages[type] || defaultImages.shop\n  \n  // Â¶ÇÊûúÈªòËÆ§ÂõæÁâá‰πüÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®emojiÊõø‰ª£\n  e.target.onerror = null // Èò≤Ê≠¢Âæ™ÁéØÈîôËØØ\n}\n\nconst onRegionChange = (e) => {\n  // ÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†‰∏Ä‰∫õË∞ÉËØï‰ø°ÊÅØ\n  if (e.type === 'end') {\n    console.log('üó∫Ô∏è Âú∞ÂõæÂå∫ÂüüÂèòÂåñÁªìÊùüÔºåÂΩìÂâçÊ†áËÆ∞Êï∞Èáè:', markers.value.length)\n  }\n}\n</script>\n\n<style scoped>\n/* Êï¥‰ΩìÂ∏ÉÂ±Ä */\n.container {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n}\n\n.map-container {\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n}\n\n.map {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n\n/* È°∂ÈÉ®Áä∂ÊÄÅÊ†è */\n.top-bar {\n  position: absolute;\n  top:10rpx;\n  left: 10rpx;\n  right: 10rpx;\n  padding: var(--status-bar-height) 0 0;\n  background: transparent;\n  z-index: 1000;\n}\n\n.header-content {\n  padding: 30rpx;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20rpx);\n  border-radius: 0 0 30rpx 30rpx;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.1);\n}\n\n.user-section {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.avatar {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 20rpx;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 8rpx 20rpx rgba(102, 126, 234, 0.3);\n  overflow: hidden;\n}\n\n.avatar-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.avatar-icon {\n  font-size: 36rpx;\n}\n\n.user-text {\n  display: flex;\n  flex-direction: column;\n}\n\n.username {\n  font-size: 32rpx;\n  font-weight: 700;\n  color: #2d3748;\n  margin-bottom: 4rpx;\n}\n\n.user-desc {\n  font-size: 24rpx;\n  color: #718096;\n}\n\n.stats-badge {\n  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n  padding: 16rpx 24rpx;\n  border-radius: 20rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-shadow: 0 8rpx 20rpx rgba(255, 107, 107, 0.3);\n}\n\n.stats-count {\n  font-size: 28rpx;\n  font-weight: 700;\n  color: white;\n}\n\n.stats-label {\n  font-size: 22rpx;\n  color: rgba(255, 255, 255, 0.9);\n  margin-top: 4rpx;\n}\n\n/* Âú∞ÂõæÊéßÂà∂ÊåâÈíÆÁªÑ */\n.map-controls {\n  position: absolute;\n  bottom: 90rpx;\n  right: 30rpx;\n  z-index: z;\n}\n\n.control-group {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\r\n}\n\n.location-btn {\n  width: 100rpx;\n  height: 100rpx;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20rpx);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 8rpx 25rpx rgba(0, 0, 0, 0.15);\n}\n\n.zoom-controls {\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(20rpx);\n  border-radius: 25rpx;\n  overflow: hidden;\n  box-shadow: 0 8rpx 25rpx rgba(0, 0, 0, 0.15);\n}\n\n.zoom-btn {\n  width: 100rpx;\n  height: 80rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.9);\n}\n\n.zoom-btn:first-child {\n  border-bottom: 1rpx solid #f1f5f9;\n}\n\n.zoom-icon {\n  font-size: 32rpx;\n  font-weight: 600;\n  color: #4a5568;\n}\n\n/* Â∫óÈì∫ÂàóË°®ÂÆπÂô® */\n.shop-list-container {\n  height: 42vh;\n  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);\n  border-radius: 40rpx 40rpx 0 0;\n  position: relative;\n  z-index: 10;\n  margin-top: -30rpx;\n  box-shadow: 0 -20rpx 50rpx rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* ÂàóË°®Â§¥ÈÉ® */\n.list-header {\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n  padding: 40rpx 30rpx 30rpx;\n  border-bottom: 1rpx solid rgba(255, 255, 255, 0.8);\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.05);\n}\n\n.header-content {\n  background: transparent;\n  box-shadow: none;\n  padding: 0;\n}\n\n.title-section {\n  margin-bottom: 30rpx;\n}\n\n.main-title {\n  font-size: 42rpx;\n  font-weight: 800;\n  color: #1a202c;\n  display: block;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  margin-bottom: 8rpx;\n}\n\n.sub-title {\n  font-size: 26rpx;\n  color: #a0aec0;\n  font-weight: 500;\n  letter-spacing: 1rpx;\n}\n\n.filter-section {\n  margin-top: 20rpx;\n}\n\n.filter-tabs {\n  display: flex;\n  gap: 16rpx;\n  background: rgba(255, 255, 255, 0.8);\n  border-radius: 25rpx;\n  padding: 8rpx;\n  backdrop-filter: blur(10rpx);\n  border: 1rpx solid rgba(255, 255, 255, 0.5);\n  box-shadow: 0 4rpx 15rpx rgba(0, 0, 0, 0.05);\n}\n\n.filter-tab {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8rpx;\n  padding: 20rpx 16rpx;\n  border-radius: 20rpx;\n  font-size: 24rpx;\n  color: #718096;\n  transition: all 0.3s ease;\n  background: transparent;\n}\n\n.filter-tab.active {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  box-shadow: 0 6rpx 20rpx rgba(102, 126, 234, 0.3);\n}\n\n.tab-icon {\n  font-size: 22rpx;\n}\n\n/* ÂàóË°®ÂÜÖÂÆπ */\n.list-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.list-scroll {\n  height: 100%;\n  flex: 1;\n}\n\n/* Â∫óÈì∫Âç°ÁâáÁΩëÊ†º */\n.shop-cards {\n  padding: 30rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 30rpx;\n}\n\n.shop-card {\n  background: linear-gradient(135deg, #ffffff 0%, #f7fafc 100%);\n  border-radius: 28rpx;\n  padding: 0;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.08);\n  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);\n  border: 1rpx solid rgba(255, 255, 255, 0.8);\n}\n\n.shop-card::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4rpx;\n  background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.shop-card.active {\n  transform: translateY(-8rpx) scale(1.02);\n  box-shadow: 0 20rpx 50rpx rgba(102, 126, 234, 0.25);\n}\n\n.shop-card.active::before {\n  opacity: 1;\n}\n\n.shop-card:active {\n  transform: scale(0.98);\n}\n\n/* Âç°ÁâáÂÜÖÂÆπ */\n.card-content {\n  padding: 40rpx 35rpx 35rpx;\n  position: relative;\n  z-index: 2;\n}\n\n/* Âç°ÁâáÂ§¥ÈÉ® */\n.card-header {\n  margin-bottom: 20rpx;\n}\n\n.shop-meta {\n  display: flex;\n  align-items: flex-start;\n  gap: 20rpx;\n}\n\n/* Â∫óÈì∫Â§¥ÂÉèÊ†∑Âºè */\n.shop-rank {\n  width: 180rpx;\n  height: 180rpx;\n  border-radius: 20rpx;\n  overflow: hidden;\n  flex-shrink: 0;\n  box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.15);\n  border: 4rpx solid white;\n}\n\n.shop-avatar {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.shop-main {\n  flex: 1;\n  min-width: 0;\n}\n\n/* Ê†áÈ¢òÂíåËØÑÂàÜÂπ∂ÊéíÊòæÁ§∫ */\n.title-rating-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 16rpx;\n  gap: 16rpx;\n}\n\n.shop-name {\n  font-size: 30rpx;\n  font-weight: 700;\n  color: #2d3748;\n  line-height: 1.3;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  flex: 1;\n  min-width: 0;\n}\n\n.rating-tag {\n  background: linear-gradient(135deg, #fffaf0 0%, #fed7aa 100%);\n  padding: 8rpx 16rpx;\n  border-radius: 15rpx;\n  display: flex;\n  align-items: center;\n  gap: 6rpx;\n  border: 1rpx solid #fed7aa;\n  box-shadow: 0 4rpx 12rpx rgba(254, 215, 170, 0.3);\n  flex-shrink: 0;\n}\n\n.rating-icon {\n  font-size: 18rpx;\n}\n\n.rating-value {\n  font-size: 18rpx;\n  color: #d69e2e;\n}\n\n/* Âú∞ÂùÄ‰ø°ÊÅØÊ†∑ÂºèË∞ÉÊï¥ */\n.info-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12rpx;\n  padding: 12rpx 0;\n}\n\n.info-icon {\n  font-size: 24rpx;\n  flex-shrink: 0;\n  margin-top: 2rpx;\n}\n\n.info-text {\n  font-size: 24rpx;\n  color: #718096;\n  line-height: 1.4;\n  flex: 1;\n}\n\n/* Âç°ÁâáÂ∫ïÈÉ®Ë∞ÉÊï¥ */\n.card-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.stats-section {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n}\n\n.stat {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4rpx;\n}\n\n.stat-value {\n  font-size: 18rpx;\n  font-weight: 700;\n  color: #2d3748;\n}\n\n.stat-label {\n  font-size: 20rpx;\n  color: #a0aec0;\n}\n\n.stat-divider {\n  width: 2rpx;\n  height: 30rpx;\n  background: #e2e8f0;\n}\n\n.action-section {\n  display: flex;\n  align-items: center;\n}\n/* Êìç‰ΩúÊåâÈíÆÊ†∑Âºè‰øÆÂ§ç */\n.action-buttons {\n  display: flex;\n  gap: 12rpx;\n}\n\n/* Êìç‰ΩúÊåâÈíÆÂõæÊ†áÊ†∑Âºè */\n.action-btn {\n  width: 50rpx;\n  height: 50rpx;\n  border-radius: 8rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.3s ease;\n  box-shadow: 0 6rpx 18rpx rgba(0, 0, 0, 0.1);\n  position: relative;\n  overflow: hidden;\n  border: none;\n}\n\n.action-btn::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.2);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n}\n\n.action-btn:active::before {\n  opacity: 1;\n}\n\n.action-btn:active {\n  transform: scale(0.92);\n}\n\n/* ‰øÆÂ§çÊåâÈíÆËÉåÊôØËâ≤ */\n.detail-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;\n}\n\n.navigate-btn {\n  background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%) !important;\n}\n\n.favorite-btn {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;\n}\n\n.action-icon {\n  font-size: 24rpx;\n  color: white;\n}\n\n/* ÂºπÁ™óÂ∫ïÈÉ®ÊåâÈíÆÊ†∑Âºè‰øÆÂ§ç */\n.popup-footer {\n  display: flex;\n  gap: 20rpx;\n  margin-top: 20rpx;\n}\n\n.popup-footer .action-btn {\n  height: 88rpx;\n  font-size: 28rpx;\n  font-weight: 600;\n  flex: 1;\n  border-radius: 20rpx;\n  box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.15);\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8rpx;\n}\n\n/* ÂºπÁ™óÊåâÈíÆËÉåÊôØËâ≤ */\n.popup-footer .detail-btn {\n  background: linear-gradient(135deg, #FF6B35, #FF8C42) !important;\n}\n\n.popup-footer .nav-btn {\n  background: linear-gradient(135deg, #3b82f6, #1d4ed8) !important;\n}\n\n.popup-footer .btn-text {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: white;\n}\n\n/* Á°Æ‰øùÊåâÈíÆÊñáÊú¨È¢úËâ≤ */\n.btn-text {\n  color: white !important;\n  font-size: 28rpx;\n  font-weight: 600;\n}\n\n/* Á©∫Áä∂ÊÄÅÊ†∑Âºè */\n.empty-state {\n  text-align: center;\n  padding: 120rpx 40rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.empty-illustration {\n  position: relative;\n  margin-bottom: 40rpx;\n}\n\n.empty-icon {\n  font-size: 120rpx;\n  margin-bottom: 20rpx;\n  opacity: 0.8;\n}\n\n.empty-stars {\n  display: flex;\n  gap: 16rpx;\n  justify-content: center;\n}\n\n.star {\n  font-size: 24rpx;\n  opacity: 0.6;\n  animation: twinkle 2s infinite;\n}\n\n.star:nth-child(2) {\n  animation-delay: 0.5s;\n}\n\n.star:nth-child(3) {\n  animation-delay: 1s;\n}\n\n@keyframes twinkle {\n  0%, 100% { opacity: 0.6; transform: scale(1); }\n  50% { opacity: 1; transform: scale(1.2); }\n}\n\n.empty-title {\n  font-size: 36rpx;\n  font-weight: 700;\n  color: #2d3748;\n  margin-bottom: 20rpx;\n}\n\n.empty-desc {\n  font-size: 26rpx;\n  color: #718096;\n  margin-bottom: 50rpx;\n  line-height: 1.5;\n  text-align: center;\n  max-width: 400rpx;\n}\n\n.empty-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 50rpx;\n  padding: 24rpx 60rpx;\n  font-size: 28rpx;\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin: 0 auto;\n  box-shadow: 0 12rpx 30rpx rgba(102, 126, 234, 0.4);\n  transition: all 0.3s ease;\n}\n\n.empty-btn:active {\n  transform: scale(0.95);\n  box-shadow: 0 6rpx 20rpx rgba(102, 126, 234, 0.4);\n}\n\n/* Âä†ËΩΩÁä∂ÊÄÅ */\n.loading-state {\n  padding: 100rpx 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.loading-content {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 30rpx;\n}\n\n.loading-animation {\n  display: flex;\n  gap: 12rpx;\n}\n\n.loading-dot {\n  width: 20rpx;\n  height: 20rpx;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  animation: bounce 1.4s infinite ease-in-out;\n}\n\n.loading-dot.dot-1 { animation-delay: -0.32s; }\n.loading-dot.dot-2 { animation-delay: -0.16s; }\n\n@keyframes bounce {\n  0%, 80%, 100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.loading-text {\n  font-size: 26rpx;\n  color: #718096;\n  font-weight: 500;\n}\n\n/* ÂºπÁ™óÊ†∑Âºè */\n.popup-content {\n  width: 85vw;\n  max-width: 700rpx;\n  background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);\n  border-radius: 28rpx;\n  padding: 40rpx 32rpx 32rpx;\n  position: relative;\n  box-shadow: 0 25rpx 70rpx rgba(0, 0, 0, 0.2);\n  border: 1rpx solid rgba(255, 255, 255, 0.3);\r\n  z-index: 9999;\n}\n\n.close-popup-btn {\n  position: absolute;\n  top: 20rpx;\n  right: 20rpx;\n  width: 60rpx;\n  height: 60rpx;\n  border-radius: 50%;\n  background: rgba(0, 0, 0, 0.05);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n  transition: all 0.3s ease;\n}\n\n.close-popup-btn:active {\n  background: rgba(0, 0, 0, 0.1);\n  transform: scale(0.9);\n}\n\n.close-icon {\n  font-size: 36rpx;\n  color: #666;\n  font-weight: 300;\n}\n\n.popup-header {\n  display: flex;\n  align-items: center;\n  gap: 20rpx;\n  margin-bottom: 32rpx;\n  padding-bottom: 24rpx;\n  border-bottom: 1rpx solid rgba(0, 0, 0, 0.08);\n}\n\n/* ÂºπÁ™ó‰∏≠ÁöÑÂ∫óÈì∫Â§¥ÂÉè */\n.shop-avatar-large {\n  width: 140rpx;\n  height: 140rpx;\n  border-radius: 24rpx;\n  overflow: hidden;\n  flex-shrink: 0;\n  box-shadow: 0 12rpx 30rpx rgba(0, 0, 0, 0.2);\n  border: 6rpx solid white;\n}\n\n.shop-avatar-img {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.shop-basic {\n  flex: 1;\n  min-width: 0;\n}\n\n.popup-title {\n  font-size: 34rpx;\n  font-weight: 700;\n  color: #1a1a1a;\n  display: block;\n  margin-bottom: 16rpx;\n  line-height: 1.3;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.rating-section {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.rating-stars {\n  display: flex;\n  gap: 4rpx;\n}\n\n.star {\n  font-size: 24rpx;\n  color: #e5e7eb;\n}\n\n.star.active {\n  color: #ffb800;\n}\n\n.rating-text {\n  font-size: 26rpx;\n  font-weight: 600;\n  color: #ffb800;\n}\n\n.popup-body {\n  max-height: 50vh;\n  overflow-y: auto;\n  margin-bottom: 20rpx;\n}\n\n.info-section {\n  margin-bottom: 28rpx;\n  padding: 20rpx;\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 16rpx;\n  border: 1rpx solid rgba(0, 0, 0, 0.05);\n}\n\n.section-header {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  margin-bottom: 12rpx;\n}\n\n.section-icon {\n  font-size: 24rpx;\n}\n\n.section-title {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: #374151;\n}\n\n.address-text {\n  font-size: 26rpx;\n  color: #6b7280;\n  line-height: 1.5;\n  display: block;\n}\n\n.hours-text {\n  font-size: 26rpx;\n  color: #059669;\n  font-weight: 500;\n  display: block;\n}\n\n.phone-text {\n  font-size: 26rpx;\n  color: #3b82f6;\n  font-weight: 500;\n  display: block;\n}\n\n.desc-text {\n  font-size: 26rpx;\n  color: #6b7280;\n  line-height: 1.6;\n  display: block;\n}\n\n.popup-footer {\n  display: flex;\n  gap: 20rpx;\n}\n\n.popup-footer .action-btn {\n  height: 88rpx;\n  font-size: 28rpx;\n  font-weight: 600;\n  flex: 1;\n  border-radius: 20rpx;\n  box-shadow: 0 8rpx 20rpx rgba(0, 0, 0, 0.15);\n}\n\n.btn-text {\n  font-size: 28rpx;\n  font-weight: 600;\n  color: white;\n}\n\n/* ÈöêËóèÈ´òÂæ∑Âú∞Âõæslogan */\n:deep(.amap-logo) {\n  display: none !important;\n}\n\n:deep(.amap-copyright) {\n  display: none !important;\n}\n\n/* ÂìçÂ∫îÂºèË∞ÉÊï¥ */\n@media (max-width: 750rpx) {\n  .shop-list-container {\n    height: 50vh;\n  }\n  \n  .card-footer {\n    flex-direction: column;\n    gap: 25rpx;\n    align-items: stretch;\n  }\n  \n  .stats-section {\n    justify-content: space-around;\n  }\n  \n  .action-buttons {\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n  \n  .filter-tabs {\n    flex-wrap: wrap;\n  }\n  \n  .filter-tab {\n    flex: none;\n    width: calc(50% - 8rpx);\n  }\n  \n  .action-btn {\n    width: 70rpx;\n    height: 70rpx;\n  }\n  \n  .action-icon {\n    font-size: 28rpx;\n  }\n  \n  .shop-rank {\n    width: 100rpx;\n    height: 100rpx;\n  }\n  \n  .title-rating-row {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 12rpx;\n  }\n  \n  .rating-tag {\n    align-self: flex-start;\n  }\n}\n\n/* ÊÄßËÉΩ‰ºòÂåñ */\n@media (prefers-reduced-motion: reduce) {\n  .decoration-shape {\n    animation: none !important;\n  }\n}\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/showMap/showFavoritesMap.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","ref","computed","onLoad","uni","onShow","uniCloud","nextTick","item"],"mappings":"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"}