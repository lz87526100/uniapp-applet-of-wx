{"version":3,"file":"edit.js","sources":["pages/blog/edit.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYmxvZy9lZGl0LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"layout\">\n\t\t<!-- È°∂ÈÉ®Ê†áÈ¢òÊ†è -->\n\t\t<!-- <view class=\"header\"> -->\n\t\t\t<!-- <text class=\"header-title\">ÂèëÂ∏ÉÂä®ÊÄÅ</text> -->\n\t\t\t<!-- <text class=\"header-desc\">ÂàÜ‰∫´‰Ω†ÁöÑÁ≤æÂΩ©Áû¨Èó¥</text> -->\n\t\t<!-- </view> -->\n\t\t\n\t\t<!-- ÂÜÖÂÆπÂå∫Âüü -->\n\t\t<view class=\"content-card\">\n\t\t\t<view class=\"card-header\">\n\t\t\t\t<text class=\"card-title\">Ê≠§ÂàªÊÉ≥Ê≥ï</text>\n\t\t\t\t<text class=\"word-count\">{{ formData.content.length }}/600</text>\n\t\t\t</view>\n\t\t\t<textarea \n\t\t\t\tclass=\"textarea\" \n\t\t\t\tplaceholder=\"ÂàÜ‰∫´‰Ω†ÁöÑÊÉ≥Ê≥ï„ÄÅÁªèÂéÜÊàñÊÑüÊÇü...\" \n\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\tauto-height \n\t\t\t\t:maxlength=\"600\" \n\t\t\t\tv-model=\"formData.content\"\n\t\t\t\t@input=\"onContentInput\"\n\t\t\t></textarea>\n\t\t</view>\n\t\t\n\t\t<!-- ÂõæÁâá‰∏ä‰º†Âå∫Âüü -->\n\t\t<view class=\"content-card\">\n\t\t\t<view class=\"card-header\">\n\t\t\t\t<text class=\"card-title\">Ê∑ªÂä†ÂõæÁâá</text>\n\t\t\t\t<text class=\"pic-count\">{{ formData.pics.length }}/9</text>\n\t\t\t</view>\n\t\t\t<view class=\"pics\">\n\t\t\t\t<uni-file-picker \n\t\t\t\t\tv-model=\"formData.pics\" \n\t\t\t\t\tfileMediatype=\"image\" \n\t\t\t\t\tmode=\"grid\"\n\t\t\t\t\tlimit=\"9\"\n\t\t\t\t\t:image-styles=\"imageStyles\"\n\t\t\t\t\t@success=\"onUploadSuccess\"\n\t\t\t\t\t@fail=\"onUploadFail\"\n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- Êèê‰∫§ÊåâÈíÆ -->\n\t\t<view class=\"footer\">\n\t\t\t<button \n\t\t\t\tclass=\"submit-btn\" \n\t\t\t\t:class=\"{ 'submit-btn-disabled': btnDisabled }\" \n\t\t\t\t:disabled=\"btnDisabled\" \n\t\t\t\t@click=\"onSubmit\"\n\t\t\t>\n\t\t\t\t<text class=\"btn-text\">{{ btnDisabled ? 'ËØ∑Â°´ÂÜôÂÜÖÂÆπ' : 'Á´ãÂç≥ÂèëÂ∏É' }}</text>\n\t\t\t\t<text class=\"btn-icon\">‚ûú</text>\n\t\t\t</button>\n\t\t</view>\n\t\t\n\t\t<!-- ÂèëÂ∏ÉÊèêÁ§∫ -->\n\t\t<view class=\"tips\">\n\t\t\t<text class=\"tip-text\">‚Ä¢ ËØ∑ÈÅµÂÆàÁ§æÂå∫ËßÑËåÉÔºåÊñáÊòéÂèëË®Ä</text>\n\t\t\t<text class=\"tip-text\">‚Ä¢ ÂõæÁâáÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºè</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { computed, ref } from 'vue';\n\nconst articlesCloudObj = uniCloud.importObject(\"articlesCloudObj\");\n\nconst formData = ref({\n\tcontent: \"\",\n\tpics: []\n});\n\n// ÂõæÁâáÊ†∑ÂºèÈÖçÁΩÆ\nconst imageStyles = {\n\twidth: 220,\n\theight: 220,\n\tborder: {\n\t\tcolor: \"#e5e5e5\",\n\t\twidth: 1,\n\t\tstyle: 'dashed',\n\t\tradius: '12rpx'\n\t}\n};\n\nconst btnDisabled = computed(() => !(formData.value.content.length > 0 || formData.value.pics.length > 0));\n\nconst onContentInput = () => {\n\t// ÂÜÖÂÆπËæìÂÖ•Êó∂ÁöÑÈ¢ùÂ§ñÂ§ÑÁêÜ\n};\n\nconst onSubmit = async () => {\n\tconsole.log(\"Êèê‰∫§Êï∞ÊçÆ\", formData.value);\n    \n    const params = {\n        ...formData.value,\n        pics: formData.value.pics.map(item => ({\n\t\t\tname: item.name,\n\t\t\textname: item.extname,\n\t\t\turl: item.url\n\t\t})),\n\t\tpublish_date: Date.now()\n    };\n\t\n\ttry {\n\t\tuni.showLoading({\n\t\t\ttitle: 'ÂèëÂ∏É‰∏≠...',\n\t\t\tmask: true\n\t\t});\n\t\t\n\t\tconst result = await articlesCloudObj.add(params);\n\t\tconsole.log(\"ËøîÂõûÁªìÊûú\", result);\n\t\t\n\t\tuni.hideLoading();\n\t\t\n\t\tif (result.errCode === 0) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: \"üéâ ÂèëÂ∏ÉÊàêÂäü\",\n\t\t\t\ticon: \"success\",\n\t\t\t\tduration: 1500\n\t\t\t});\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.$emit(\"editEvent\");\n\t\t\t\tuni.navigateBack();\n\t\t\t}, 100);\n\t\t\t\n\t\t\t// Ê∏ÖÁ©∫Ë°®Âçï\n\t\t\tformData.value.content = \"\";\n\t\t\tformData.value.pics = [];\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: \"ÂèëÂ∏ÉÂ§±Ë¥•Ôºö\" + (result.errMsg || result.message || \"Êú™Áü•ÈîôËØØ\"),\n\t\t\t\ticon: \"none\",\n\t\t\t\tduration: 3000\n\t\t\t});\n\t\t}\n\t} catch (error) {\n\t\tuni.hideLoading();\n\t\tconsole.error(\"Ë∞ÉÁî®Â§±Ë¥•\", error);\n\t\tuni.showToast({\n\t\t\ttitle: \"ÁΩëÁªúÈîôËØØÔºö\" + error.message,\n\t\t\ticon: \"none\"\n\t\t});\n\t}\n};\n\nconst onUploadSuccess = (e) => {\n\tconsole.log(\"‰∏ä‰º†ÊàêÂäü\", e);\n\tuni.showToast({\n\t\ttitle: 'ÂõæÁâá‰∏ä‰º†ÊàêÂäü',\n\t\ticon: 'success',\n\t\tduration: 1500\n\t});\n};\n\nconst onUploadFail = (err) => {\n\tconsole.error(\"‰∏ä‰º†Â§±Ë¥•\", err);\n\tuni.showToast({\n\t\ttitle: 'ÂõæÁâá‰∏ä‰º†Â§±Ë¥•',\n\t\ticon: 'error',\n\t\tduration: 2000\n\t});\n};\n\n</script>\n\n<style lang=\"scss\" scoped>\n.layout {\n\tmin-height: 100vh;\n\tbackground: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n\tpadding: 30rpx;\n}\n\r\n\n.header {\n\ttext-align: center;\n\tmargin-bottom: 20rpx;\n\tpadding: 40rpx 0 20rpx 0;\n\t\n\t.header-title {\n\t\tdisplay: block;\n\t\tfont-size: 48rpx;\n\t\tfont-weight: 700;\n\t\tcolor: #2c3e50;\n\t\tmargin-bottom: 12rpx;\n\t}\n\t\n\t.header-desc {\n\t\tfont-size: 28rpx;\n\t\tcolor: #7f8c8d;\n\t}\n}\n\n.content-card {\n\tbackground: #ffffff;\n\tborder-radius: 24rpx;\n\tpadding: 32rpx;\n\tmargin-bottom: 30rpx;\n\tbox-shadow: 0 8rpx 32rpx rgba(0, 0, 0, 0.08);\n\t\n\t.card-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding-bottom: 20rpx;\n\t\tborder-bottom: 1rpx solid #f1f2f6;\n\t\t\n\t\t.card-title {\n\t\t\tfont-size: 32rpx;\n\t\t\tfont-weight: 600;\n\t\t\tcolor: #2c3e50;\n\t\t}\n\t\t\n\t\t.word-count, .pic-count {\n\t\t\tfont-size: 26rpx;\n\t\t\tcolor: #95a5a6;\n\t\t}\n\t}\n}\n\n.textarea {\n\tfont-size: 34rpx;\n\twidth: 92%;\n\tline-height: 1.8em;\n\tmin-height: 240rpx;\n\tcolor: #2c3e50;\n\tbackground: #fafbfc;\n\tborder-radius: 16rpx;\n\tpadding: 24rpx;\n\tborder: 1rpx solid #e1e8ed;\n\ttransition: all 0.3s ease;\n\t\n\t&:focus {\n\t\tborder-color: #3498db;\n\t\tbackground: #ffffff;\n\t\tbox-shadow: 0 0 0 2rpx rgba(52, 152, 219, 0.1);\n\t}\n}\n\n.placeholder {\n\tcolor: #bdc3c7;\n\tfont-size: 32rpx;\n}\n\n.pics {\r\n    \r\n\tpadding: 0;\n}\n\n.footer {\n\tpadding: 40rpx 0;\n\t\n\t.submit-btn {\n\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\t\tborder: none;\n\t\tborder-radius: 50rpx;\n\t\theight: 96rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tcolor: white;\n\t\tfont-size: 34rpx;\n\t\tfont-weight: 600;\n\t\tbox-shadow: 0 12rpx 32rpx rgba(102, 126, 234, 0.4);\n\t\ttransition: all 0.3s ease;\n\t\t\n\t\t.btn-text {\n\t\t\tmargin-right: 12rpx;\n\t\t}\n\t\t\n\t\t.btn-icon {\n\t\t\tfont-size: 28rpx;\n\t\t\ttransition: transform 0.3s ease;\n\t\t}\n\t\t\n\t\t&:active {\n\t\t\ttransform: translateY(2rpx);\n\t\t\tbox-shadow: 0 6rpx 20rpx rgba(102, 126, 234, 0.4);\n\t\t\t\n\t\t\t.btn-icon {\n\t\t\t\ttransform: translateX(4rpx);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t.submit-btn-disabled {\n\t\tbackground: linear-gradient(135deg, #bdc3c7 0%, #95a5a6 100%);\n\t\tbox-shadow: none;\n\t\tcolor: #ecf0f1;\n\t\t\n\t\t&:active {\n\t\t\ttransform: none;\n\t\t\tbox-shadow: none;\n\t\t}\n\t}\n}\n\n.tips {\n\tbackground: rgba(255, 255, 255, 0.7);\n\tborder-radius: 16rpx;\n\tpadding: 24rpx 32rpx;\n\tmargin-top: 20rpx;\n\t\n\t.tip-text {\n\t\tdisplay: block;\n\t\tfont-size: 24rpx;\n\t\tcolor: #7f8c8d;\n\t\tline-height: 1.6em;\n\t\tmargin-bottom: 8rpx;\n\t}\n}\n\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\n@media (max-width: 750rpx) {\n\t.layout {\n\t\tpadding: 20rpx;\n\t}\n\t\n\t.content-card {\n\t\tpadding: 24rpx;\n\t\tborder-radius: 20rpx;\n\t}\n\t\n\t.textarea {\n\t\tfont-size: 32rpx;\n\t\tmin-height: 200rpx;\n\t}\n}\n\n/* ÊöóËâ≤Ê®°ÂºèÊîØÊåÅ */\n@media (prefers-color-scheme: dark) {\n\t.layout {\n\t\tbackground: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);\n\t}\n\t\n\t.content-card {\n\t\tbackground: #2c3e50;\n\t\t\n\t\t.card-title {\n\t\t\tcolor: #ecf0f1;\n\t\t}\n\t}\n\t\n\t.textarea {\n\t\tbackground: #34495e;\n\t\tcolor: #ecf0f1;\n\t\tborder-color: #4a6572;\n\t\t\n\t\t&:focus {\n\t\t\tborder-color: #3498db;\n\t\t}\n\t}\n\t\n\t.placeholder {\n\t\tcolor: #95a5a6;\n\t}\n}\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/blog/edit.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","ref","computed","uni"],"mappings":";;;;;;;;;;;;;AAoEA,UAAM,mBAAmBA,cAAQ,GAAC,aAAa,kBAAkB;AAEjE,UAAM,WAAWC,cAAAA,IAAI;AAAA,MACpB,SAAS;AAAA,MACT,MAAM,CAAE;AAAA,IACT,CAAC;AAGD,UAAM,cAAc;AAAA,MACnB,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,QAAQ;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP,QAAQ;AAAA,MACR;AAAA,IACF;AAEA,UAAM,cAAcC,cAAAA,SAAS,MAAM,EAAE,SAAS,MAAM,QAAQ,SAAS,KAAK,SAAS,MAAM,KAAK,SAAS,EAAE;AAEzG,UAAM,iBAAiB,MAAM;AAAA,IAE7B;AAEA,UAAM,WAAW,YAAY;AAC5BC,oBAAA,MAAA,MAAA,OAAA,6BAAY,QAAQ,SAAS,KAAK;AAE/B,YAAM,SAAS;AAAA,QACX,GAAG,SAAS;AAAA,QACZ,MAAM,SAAS,MAAM,KAAK,IAAI,WAAS;AAAA,UAC5C,MAAM,KAAK;AAAA,UACX,SAAS,KAAK;AAAA,UACd,KAAK,KAAK;AAAA,QACb,EAAI;AAAA,QACF,cAAc,KAAK,IAAK;AAAA,MAC1B;AAEC,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,QACT,CAAG;AAED,cAAM,SAAS,MAAM,iBAAiB,IAAI,MAAM;AAChDA,sBAAY,MAAA,MAAA,OAAA,8BAAA,QAAQ,MAAM;AAE1BA,sBAAG,MAAC,YAAW;AAEf,YAAI,OAAO,YAAY,GAAG;AACzBA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACd,CAAI;AAED,qBAAW,MAAM;AAChBA,gCAAI,MAAM,WAAW;AACrBA,0BAAG,MAAC,aAAY;AAAA,UAChB,GAAE,GAAG;AAGN,mBAAS,MAAM,UAAU;AACzB,mBAAS,MAAM,OAAO;QACzB,OAAS;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,WAAW,OAAO,UAAU,OAAO,WAAW;AAAA,YACrD,MAAM;AAAA,YACN,UAAU;AAAA,UACd,CAAI;AAAA,QACD;AAAA,MACD,SAAQ,OAAO;AACfA,sBAAG,MAAC,YAAW;AACfA,sBAAc,MAAA,MAAA,SAAA,8BAAA,QAAQ,KAAK;AAC3BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,UAAU,MAAM;AAAA,UACvB,MAAM;AAAA,QACT,CAAG;AAAA,MACD;AAAA,IACF;AAEA,UAAM,kBAAkB,CAAC,MAAM;AAC9BA,oBAAA,MAAA,MAAA,OAAA,8BAAY,QAAQ,CAAC;AACrBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,MACZ,CAAE;AAAA,IACF;AAEA,UAAM,eAAe,CAAC,QAAQ;AAC7BA,oBAAc,MAAA,MAAA,SAAA,8BAAA,QAAQ,GAAG;AACzBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,MACZ,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;ACpKA,GAAG,WAAW,eAAe;"}