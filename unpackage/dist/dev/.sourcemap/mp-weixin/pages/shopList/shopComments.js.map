{"version":3,"file":"shopComments.js","sources":["pages/shopList/shopComments.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2hvcExpc3Qvc2hvcENvbW1lbnRzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"shop-comments\">\n    <!-- ÂØºËà™Ê†è -->\n    <!-- <view class=\"nav-bar\">\n      <view class=\"nav-left\" @click=\"goBack\">\n        <text class=\"back-icon\">‚Üê</text>\n      </view>\n      <view class=\"nav-title\">{{ shopName }}ÁöÑËØÑËÆ∫</view>\n      <view class=\"nav-right\"></view>\n    </view> -->\n\n    <!-- ËØÑËÆ∫ÁªüËÆ° -->\n    <view class=\"comments-stats\" v-if=\"comments.length > 0\">\n      <view class=\"stats-item\">\n        <text class=\"stats-value\">{{ totalComments }}</text>\n        <text class=\"stats-label\">ÂÖ®ÈÉ®ËØÑËÆ∫</text>\n      </view>\n      <view class=\"stats-item\">\n        <text class=\"stats-value\">{{ averageRating.toFixed(1) }}</text>\n        <text class=\"stats-label\">Âπ≥ÂùáËØÑÂàÜ</text>\n      </view>\n      <view class=\"stats-item\">\n        <text class=\"stats-value\">{{ withImagesCount }}</text>\n        <text class=\"stats-label\">ÊúâÂõæËØÑËÆ∫</text>\n      </view>\n    </view>\n\n    <!-- ËØÑËÆ∫ÂàóË°® -->\n    <view class=\"comments-list\">\n      <view \n        class=\"comment-item\" \n        v-for=\"comment in comments\" \n        :key=\"comment.id\"\n        @click=\"goToCommentDetail(comment)\"\n      >\n        <!-- Áî®Êà∑‰ø°ÊÅØ -->\n        <view class=\"comment-user\">\n          <image class=\"user-avatar\" :src=\"comment.avatar\" mode=\"aspectFill\" />\n          <view class=\"user-info\">\n            <text class=\"user-name\">{{ comment.userName }}</text>\n            <view class=\"comment-meta\">\n              <view class=\"rating-stars\">\n                <text \n                  class=\"star\" \n                  v-for=\"n in 5\" \n                  :key=\"n\"\n                  :class=\"{ filled: n <= comment.rating }\"\n                >‚òÖ</text>\n              </view>\n              <text class=\"comment-time\">{{ comment.time }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <!-- ËØÑËÆ∫ÂÜÖÂÆπ -->\n        <view class=\"comment-content\">\n          <text class=\"comment-text\">{{ comment.content }}</text>\n        </view>\n        \n        <!-- ËØÑËÆ∫ÂõæÁâá -->\n        <view class=\"comment-images\" v-if=\"comment.images && comment.images.length > 0\">\n          <view class=\"images-grid\">\n            <image \n              class=\"comment-image\" \n              v-for=\"(img, index) in comment.images.slice(0, 4)\" \n              :key=\"index\"\n              :src=\"getSafeImageUrl(img)\" \n              mode=\"aspectFill\"\n              @click.stop=\"previewImage(comment.images, index)\"\n            />\n            <view class=\"more-images\" v-if=\"comment.images.length > 4\" @click.stop=\"previewImage(comment.images, 0)\">\n              <text class=\"more-text\">+{{ comment.images.length - 4 }}</text>\n            </view>\n          </view>\n        </view>\n        \n        <!-- Êìç‰ΩúÊåâÈíÆ -->\n        <view class=\"comment-actions\">\n          <view class=\"action-item\" @click.stop=\"likeComment(comment)\">\n            <text class=\"action-icon\">üëç</text>\n            <text class=\"action-text\">{{ comment.likes || 0 }}</text>\n          </view>\n          <view class=\"action-item\" @click.stop=\"replyComment(comment)\">\n            <text class=\"action-icon\">üí¨</text>\n            <text class=\"action-text\">ÂõûÂ§ç</text>\n          </view>\n        </view>\n      </view>\n      \n      <!-- Âä†ËΩΩÊõ¥Â§ö -->\n      <view class=\"load-more\" v-if=\"hasMore\" @click=\"loadMoreComments\">\n        <text class=\"load-more-text\">Âä†ËΩΩÊõ¥Â§ö</text>\n      </view>\n      \n      <!-- Ê≤°ÊúâÊõ¥Â§ö -->\n      <view class=\"no-more\" v-else-if=\"comments.length > 0\">\n        <text class=\"no-more-text\">Ê≤°ÊúâÊõ¥Â§öËØÑËÆ∫‰∫Ü</text>\n      </view>\n    </view>\n\n    <!-- Á©∫Áä∂ÊÄÅ -->\n    <view class=\"empty-comments\" v-if=\"!loading && comments.length === 0\">\n      <text class=\"empty-icon\">üí¨</text>\n      <text class=\"empty-text\">ÊöÇÊó†ËØÑËÆ∫</text>\n      <text class=\"empty-desc\">Êàê‰∏∫Á¨¨‰∏Ä‰∏™ËØÑËÆ∫ÁöÑ‰∫∫Âêß</text>\n    </view>\n\n    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n    <view class=\"loading\" v-if=\"loading\">\n      <uni-load-more status=\"loading\" content=\"Âä†ËΩΩ‰∏≠...\" />\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue';\nimport { onLoad, onReachBottom } from '@dcloudio/uni-app';\n\n// ÂìçÂ∫îÂºèÊï∞ÊçÆ\nconst shopId = ref('');\nconst shopName = ref('');\nconst comments = ref([]);\nconst loading = ref(false);\nconst page = ref(1);\nconst size = ref(10);\nconst total = ref(0);\nconst hasMore = ref(true);\n\n// ËÆ°ÁÆóÂ±ûÊÄß\nconst totalComments = computed(() => total.value);\nconst averageRating = computed(() => {\n  if (comments.value.length === 0) return 0;\n  const sum = comments.value.reduce((acc, comment) => acc + comment.rating, 0);\n  return sum / comments.value.length;\n});\nconst withImagesCount = computed(() => {\n  return comments.value.filter(comment => comment.images && comment.images.length > 0).length;\n});\n\n// ÁîüÂëΩÂë®Êúü\nonLoad((options) => {\n  if (options.shopId) {\n    shopId.value = options.shopId;\n    shopName.value = options.shopName || 'Â∫óÈì∫';\n    console.log('‚úÖ Êé•Êî∂Âà∞ÁöÑÂèÇÊï∞:', { shopId: shopId.value, shopName: shopName.value });\n    loadComments(true);\n  } else {\n    console.error('‚ùå Áº∫Â∞ëÂ∫óÈì∫IDÂèÇÊï∞');\n    uni.showToast({\n      title: 'Â∫óÈì∫ID‰∏çÂ≠òÂú®',\n      icon: 'none'\n    });\n    setTimeout(() => {\n      uni.navigateBack();\n    }, 1500);\n  }\n});\n\n// ‰∏äÊãâÂä†ËΩΩÊõ¥Â§ö\nonReachBottom(() => {\n  console.log('üì± ‰∏äÊãâÂä†ËΩΩÊõ¥Â§ö');\n  if (hasMore.value && !loading.value) {\n    loadMoreComments();\n  }\n});\n\n// Âä†ËΩΩËØÑËÆ∫ - ‰øÆÂ§çÁâà\nasync function loadComments(reset = false) {\n  if (!shopId.value) {\n    console.error('‚ùå Â∫óÈì∫ID‰∏∫Á©∫');\n    return;\n  }\n  \n  if (reset) {\n    page.value = 1;\n    comments.value = [];\n    hasMore.value = true;\n    console.log('üîÑ ÈáçÁΩÆËØÑËÆ∫ÂàóË°®');\n  }\n  \n  if (!hasMore.value) {\n    console.log('‚èπÔ∏è Ê≤°ÊúâÊõ¥Â§öËØÑËÆ∫ÂèØÂä†ËΩΩ');\n    return;\n  }\n  \n  loading.value = true;\n  console.log(`üîÑ Âä†ËΩΩÁ¨¨ ${page.value} È°µËØÑËÆ∫ÔºåÂ∫óÈì∫ID: ${shopId.value}`);\n\n  try {\n    // ‰ΩøÁî®Âíå shopDetail È°µÈù¢Áõ∏ÂêåÁöÑ‰∫ëÂØπË±°ÊñπÊ≥ï\n    const articlesCo = uniCloud.importObject('articlesCloudObj');\n    \n    console.log('üì° Ë∞ÉÁî®‰∫ëÂØπË±°Ëé∑ÂèñËØÑËÆ∫...');\n    const res = await articlesCo.list({\n      page: page.value,\n      size: size.value\n    });\n    \n    console.log('üì° ‰∫ëÂØπË±°ÂìçÂ∫î:', res);\n    \n    if (res.errCode === 0) {\n      // ËøáÊª§Âá∫ÂΩìÂâçÂ∫óÈì∫ÁöÑËØÑËÆ∫\n      const shopReviews = (res.data || []).filter(item => \n        item.shop_id === shopId.value\n      );\n      \n      console.log(`‚úÖ ËøáÊª§ÂêéÁöÑÂ∫óÈì∫ËØÑËÆ∫: ${shopReviews.length} Êù°`);\n      \n      // Â§ÑÁêÜËØÑËÆ∫Êï∞ÊçÆ\n      const newComments = [];\n      for (let item of shopReviews) {\n        const processedComment = await processCommentData(item);\n        newComments.push(processedComment);\n      }\n      \n      console.log('üéØ Â§ÑÁêÜÂêéÁöÑËØÑËÆ∫Êï∞ÊçÆ:', newComments);\n      \n      if (reset) {\n        comments.value = [...newComments];\n      } else {\n        comments.value = [...comments.value, ...newComments];\n      }\n      \n      total.value = newComments.length;\n      hasMore.value = newComments.length >= size.value;\n      page.value += 1;\n      \n      console.log(`‚úÖ Âä†ËΩΩËØÑËÆ∫ÊàêÂäüÔºåÂΩìÂâçÂÖ± ${comments.value.length} Êù°ËØÑËÆ∫`);\n      \n    } else {\n      throw new Error(res.errMsg || '‰∫ëÂØπË±°ËøîÂõûÈîôËØØ');\n    }\n    \n  } catch (error) {\n    console.error('‚ùå Âä†ËΩΩËØÑËÆ∫Â§±Ë¥•:', error);\n    uni.showToast({\n      title: 'Âä†ËΩΩËØÑËÆ∫Â§±Ë¥•',\n      icon: 'none'\n    });\n    \n    // Â¶ÇÊûúÁúüÂÆûÊï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•Ôºå‰ΩøÁî®ÊµãËØïÊï∞ÊçÆ‰Ωú‰∏∫Â§áÈÄâ\n    if (comments.value.length === 0) {\n      console.log('üîÑ ‰ΩøÁî®ÊµãËØïÊï∞ÊçÆ‰Ωú‰∏∫Â§áÈÄâ');\n      useTestData();\n    }\n  } finally {\n    loading.value = false;\n  }\n}\n\n// Â§ÑÁêÜËØÑËÆ∫Êï∞ÊçÆ - ‰∏é shopDetail È°µÈù¢‰øùÊåÅ‰∏ÄËá¥\nasync function processCommentData(item) {\n  console.log('üîç Â§ÑÁêÜÂçïÊù°ËØÑËÆ∫Êï∞ÊçÆ:', item);\n  \n  const userInfo = item.user_id && item.user_id[0] ? item.user_id[0] : {};\n  const userId = userInfo._id;\n  \n  let avatarUrl = await getAvatarUrl(userInfo, userId);\n  \n  // Êó∂Èó¥Ê†ºÂºèÂåñ\n  let timeStr = '';\n  if (item.publish_date) {\n    const date = new Date(item.publish_date);\n    timeStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n  } else if (item.createTime) {\n    const date = new Date(item.createTime);\n    timeStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;\n  }\n  \n  // Â§ÑÁêÜÂõæÁâá\n  let imageUrls = [];\n  if (item.pics && Array.isArray(item.pics)) {\n    imageUrls = item.pics.map(pic => {\n      if (pic && typeof pic === 'object' && pic.url) {\n        return pic.url;\n      } else if (typeof pic === 'string') {\n        return pic;\n      }\n      return null;\n    }).filter(url => url !== null);\n  }\n  \n  console.log('üñºÔ∏è Â§ÑÁêÜÂêéÁöÑÂõæÁâáURLs:', imageUrls);\n  \n  return {\n    id: item._id,\n    userId: userId,\n    userName: userInfo.nickname || `Áî®Êà∑${userId ? userId.slice(-4) : '0000'}`,\n    avatar: avatarUrl,\n    rating: item.rating || 5,\n    time: timeStr,\n    content: item.content || 'ÊöÇÊó†ËØÑËÆ∫ÂÜÖÂÆπ',\n    images: imageUrls,\n    likes: item.likes || Math.floor(Math.random() * 50)\n  };\n}\n\n// Ëé∑ÂèñÂ§¥ÂÉèURL - ‰∏é shopDetail È°µÈù¢‰øùÊåÅ‰∏ÄËá¥\nasync function getAvatarUrl(userInfo, userId) {\n  if (!userInfo || !userId) return '/static/default-avatar.png';\n  \n  let avatarUrl = '/static/default-avatar.png';\n  \n  if (userInfo.avatar_url && userInfo.avatar_url.startsWith('http')) {\n    avatarUrl = userInfo.avatar_url;\n  } else if (userInfo.avatar_file && userInfo.avatar_file.url) {\n    const fileUrl = userInfo.avatar_file.url;\n    if (fileUrl.startsWith('http')) {\n      avatarUrl = fileUrl;\n    } else if (fileUrl.startsWith('cloud:')) {\n      try {\n        const result = await uniCloud.getTempFileURL({\n          fileList: [fileUrl]\n        });\n        \n        if (result.fileList && result.fileList[0] && result.fileList[0].tempFileURL) {\n          avatarUrl = result.fileList[0].tempFileURL;\n        }\n      } catch (error) {\n        console.error('ËΩ¨Êç¢‰∫ëÂ≠òÂÇ®URLÂ§±Ë¥•:', error);\n      }\n    }\n  } else if (userInfo.avatar && userInfo.avatar.startsWith('http')) {\n    avatarUrl = userInfo.avatar;\n  }\n  \n  return avatarUrl;\n}\n\n// ÂõæÁâáURLÂÆâÂÖ®Ê£ÄÊü•\nfunction getSafeImageUrl(img) {\n  if (typeof img === 'string') {\n    return img;\n  } else if (img && typeof img === 'object') {\n    if (img.url) return img.url;\n    if (img.path) return img.path;\n    if (img.tempFileURL) return img.tempFileURL;\n  }\n  return '/static/default-image.png';\n}\n\n// Âä†ËΩΩÊõ¥Â§öËØÑËÆ∫\nfunction loadMoreComments() {\n  console.log('üì• ÊâãÂä®Âä†ËΩΩÊõ¥Â§öËØÑËÆ∫');\n  if (!hasMore.value || loading.value) return;\n  loadComments();\n}\n\n// ÂõæÁâáÈ¢ÑËßà\nfunction previewImage(images, currentIndex) {\n  if (!images || images.length === 0) return;\n  \n  const safeImages = images.map(img => getSafeImageUrl(img));\n  \n  uni.previewImage({\n    urls: safeImages,\n    current: safeImages[currentIndex] || safeImages[0]\n  });\n}\n\n// ÁÇπËµûËØÑËÆ∫\nfunction likeComment(comment) {\n  console.log('üëç ÁÇπËµûËØÑËÆ∫:', comment.id);\n  uni.showToast({\n    title: 'ÁÇπËµûÊàêÂäü',\n    icon: 'success'\n  });\n}\n\n// ÂõûÂ§çËØÑËÆ∫\nfunction replyComment(comment) {\n  console.log('üí¨ ÂõûÂ§çËØÑËÆ∫:', comment.id);\n  uni.showToast({\n    title: 'ÂõûÂ§çÂäüËÉΩÂºÄÂèë‰∏≠',\n    icon: 'none'\n  });\n}\n\n// Ë∑≥ËΩ¨Âà∞ËØÑËÆ∫ËØ¶ÊÉÖ\nfunction goToCommentDetail(comment) {\n  console.log('üîÑ Ë∑≥ËΩ¨Âà∞ËØÑËÆ∫ËØ¶ÊÉÖ:', comment.id);\n  uni.navigateTo({\n    url: `/pages/blog/detail?id=${comment.id}&shopId=${shopId.value}`\n  });\n}\n\n// ËøîÂõû\nfunction goBack() {\n  console.log('üîô ËøîÂõû‰∏ä‰∏ÄÈ°µ');\n  uni.navigateBack();\n}\n\n// ÊµãËØïÊï∞ÊçÆ - ‰ªÖÂú®ÁúüÂÆûÊï∞ÊçÆÂä†ËΩΩÂ§±Ë¥•Êó∂‰ΩøÁî®\nfunction useTestData() {\n  console.log('üéØ ‰ΩøÁî®ÊµãËØïÊï∞ÊçÆ‰Ωú‰∏∫Â§áÈÄâ');\n  comments.value = [\n    {\n      id: '1',\n      userId: 'user1',\n      userName: 'ÁæéÈ£üÂÆ∂Â∞èÊòé',\n      avatar: '/static/default-avatar.png',\n      rating: 5,\n      time: '2024-01-15',\n      content: 'ËøôÂÆ∂Â∫óÁöÑÂë≥ÈÅìÁúüÁöÑÂæà‰∏çÈîôÔºåÂº∫ÁÉàÊé®Ëçê‰ªñ‰ª¨ÁöÑÊãõÁâåÁâõËÇâÈù¢ÔºÅÊ±§Â∫ïÊµìÈÉÅÔºåÁâõËÇâÁÇñÂæóÂæàÁÉÇÔºåÈù¢Êù°Âä≤ÈÅì„ÄÇ',\n      images: ['/static/food1.jpg', '/static/food2.jpg'],\n      likes: 23\n    },\n    {\n      id: '2',\n      userId: 'user2',\n      userName: 'ÂêÉË¥ßÂ∞èÂº†',\n      avatar: '/static/default-avatar.png',\n      rating: 4,\n      time: '2024-01-14',\n      content: 'ÁéØÂ¢ÉÂæàÂ•ΩÔºåÊúçÂä°ÊÄÅÂ∫¶‰πü‰∏çÈîôÔºåÂ∞±ÊòØ‰ª∑Ê†ºÁ®çÂæÆÊúâÁÇπË¥µ„ÄÇ‰∏çËøáÂë≥ÈÅìÁ°ÆÂÆûÂÄºÂæóËøô‰∏™‰ª∑„ÄÇ',\n      images: [],\n      likes: 15\n    }\n  ];\n  total.value = comments.value.length;\n  hasMore.value = false;\n  console.log(`‚úÖ ÊµãËØïÊï∞ÊçÆÂä†ËΩΩÂÆåÊàêÔºåÂÖ± ${comments.value.length} Êù°ËØÑËÆ∫`);\n}\n</script>\r\n\r\n<style lang=\"scss\" scoped>\n.shop-comments {\n  min-height: 100vh;\n  background: #f8fafc;\n}\n\n.nav-bar {\n  position: sticky;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 88rpx;\n  padding: 0 30rpx;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: white;\n  border-bottom: 1rpx solid #e2e8f0;\n  z-index: 1000;\n  \n  .nav-left, .nav-right {\n    width: 80rpx;\n    display: flex;\n    align-items: center;\n  }\n  \n  .back-icon {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #2d3748;\n  }\n  \n  .nav-title {\n    font-size: 32rpx;\n    font-weight: 700;\n    color: #2d3748;\n    max-width: 400rpx;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    text-align: center;\n  }\n}\n\n.comments-stats {\n  display: flex;\n  justify-content: space-around;\n  background: white;\n  padding: 30rpx 0;\n  margin-bottom: 20rpx;\n  \n  .stats-item {\n    text-align: center;\n    \n    .stats-value {\n      display: block;\n      font-size: 32rpx;\n      font-weight: 700;\n      color: #FF6B35;\n      margin-bottom: 8rpx;\n    }\n    \n    .stats-label {\n      font-size: 24rpx;\n      color: #718096;\n    }\n  }\n}\n\n.comments-list {\n  padding: 0 30rpx;\n  \n  .comment-item {\n    background: white;\n    border-radius: 16rpx;\n    padding: 30rpx;\n    margin-bottom: 20rpx;\n    box-shadow: 0 2rpx 12rpx rgba(0, 0, 0, 0.05);\n    \n    .comment-user {\n      display: flex;\n      align-items: center;\n      margin-bottom: 20rpx;\n      \n      .user-avatar {\n        width: 64rpx;\n        height: 64rpx;\n        border-radius: 50%;\n        margin-right: 16rpx;\n      }\n      \n      .user-info {\n        flex: 1;\n        \n        .user-name {\n          font-size: 28rpx;\n          font-weight: 600;\n          color: #2d3748;\n          display: block;\n          margin-bottom: 8rpx;\n        }\n        \n        .comment-meta {\n          display: flex;\n          align-items: center;\n          gap: 16rpx;\n          \n          .rating-stars {\n            .star {\n              font-size: 20rpx;\n              color: #e2e8f0;\n              \n              &.filled {\n                color: #ffd700;\n              }\n            }\n          }\n          \n          .comment-time {\n            font-size: 22rpx;\n            color: #718096;\n          }\n        }\n      }\n    }\n    \n    .comment-content {\n      margin-bottom: 20rpx;\n      \n      .comment-text {\n        font-size: 26rpx;\n        color: #2d3748;\n        line-height: 1.5;\n      }\n    }\n    \n    .comment-images {\n      margin-bottom: 20rpx;\n      \n      .images-grid {\n        display: grid;\n        grid-template-columns: repeat(4, 1fr);\n        gap: 10rpx;\n        \n        .comment-image {\n          width: 100%;\n          height: 160rpx;\n          border-radius: 8rpx;\n          object-fit: cover;\n        }\n        \n        .more-images {\n          width: 100%;\n          height: 160rpx;\n          background: #e2e8f0;\n          border-radius: 8rpx;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          \n          .more-text {\n            font-size: 24rpx;\n            color: #718096;\n            font-weight: 600;\n          }\n        }\n      }\n    }\n    \n    .comment-actions {\n      display: flex;\n      gap: 30rpx;\n      \n      .action-item {\n        display: flex;\n        align-items: center;\n        gap: 8rpx;\n        \n        .action-icon {\n          font-size: 24rpx;\n        }\n        \n        .action-text {\n          font-size: 22rpx;\n          color: #718096;\n        }\n      }\n    }\n  }\n  \n  .load-more, .no-more {\n    text-align: center;\n    padding: 40rpx 0;\n    \n    .load-more-text, .no-more-text {\n      font-size: 26rpx;\n      color: #718096;\n    }\n  }\n}\n\n.empty-comments {\n  text-align: center;\n  padding: 200rpx 40rpx;\n  \n  .empty-icon {\n    font-size: 120rpx;\n    margin-bottom: 30rpx;\n    opacity: 0.5;\n    display: block;\n  }\n  \n  .empty-text {\n    font-size: 32rpx;\n    color: #2d3748;\n    display: block;\n    margin-bottom: 16rpx;\n  }\n  \n  .empty-desc {\n    font-size: 26rpx;\n    color: #718096;\n    display: block;\n  }\n}\n\n.loading {\n  padding: 40rpx 0;\n  text-align: center;\n}\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/shopList/shopComments.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","onLoad","uni","onReachBottom","uniCloud"],"mappings":"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"}