{"version":3,"file":"detail.js","sources":["pages/demo0719/detail.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGVtbzA3MTkvZGV0YWlsLnZ1ZQ"],"sourcesContent":["\r\n<template>\r\n    <!--v-if当有数据是才会显示内容 -->\n    <view class=\"detail\" v-if=\"detail\">\r\n        <view class=\"content\">\r\n            <!-- <image v-if=\"item.avatar\" :src=\"item.avatar[0].url\" mode=\"widthFix\"></image> -->\r\n        <view>头像：<image v-if=\"detail.avatar\" :src=\"detail.avatar[0].url\" ></image></view>    \r\n        <view>姓名：<text class=\"big\">{{detail.name}}</text></view>\n        <view>年龄：<text class=\"big\">{{detail.age}}</text></view>\r\n        <!-- <view>性别：<text class=\"big\">{{detail.genger}}</text></view> -->\r\n        <view>IP：<text class=\"big\">{{detail.ip}}</text></view>\r\n        <view>创建时间：<text class=\"big\">{{dayjs(detail.createTime).format(\"YYYY-MM-DD HH:mm:ss\")}}</text></view>        \r\n    </view>\r\n    \r\n    <view class=\"group\" >\r\n        <button type=\"primary\" @click=\"goUpdate(detail._id)\">修改</button>\r\n        <button type=\"warn\" @click=\"handleRemove\">删除</button>\r\n    </view>\r\n    \r\n    </view>\n</template>\n\n<script setup>\r\n //数据加载\n  import {onLoad} from \"@dcloudio/uni-app\"\r\n  import { ref } from \"vue\";\r\n  //导入时间戳\r\n  import dayjs from \"dayjs\";\n  const db = uniCloud.database();  \r\n  let id;\r\n  const detail = ref();\r\n  \r\n  \r\n  \r\n  onLoad((e)=>{\r\n    // console.log(e);\r\n    id = e.id;\r\n    getDetail();\r\n  })\r\n  \r\n  const getDetail = async ()=>{\r\n      let res = await db.collection(\"demo-user\")\r\n      // .where(`_id == \"${id}\"`)==doc(id)\r\n      .doc(id)\r\n      .get({getOne:true});\r\n      console.log(res.result.data);\r\n      detail.value = res.result.data;\r\n  }\r\n  \r\n  const handleRemove =  ()=>{\r\n      uni.showModal({\r\n          title:\"是否删除改数据\",\r\n          success: async res=>{\r\n              if(res.confirm){\r\n                let res = await db.collection(\"demo-user\")\r\n                .doc(id)\r\n                .remove();  \r\n                uni.showToast({\r\n                    title:\"删除成功\",\r\n                    icon:\"none\"\r\n                })\r\n                setTimeout(()=>{uni.navigateBack()},1500)\r\n              }\r\n          }\r\n      })\r\n  }\r\n  \r\n  const goUpdate = (e)=>{\r\n      console.log(e);\r\n      uni.navigateTo({\r\n          url:\"/pages/demo0719/update?id=\"+e\r\n      })\r\n  }\r\n  \n</script>\n\n<style lang=\"scss\" scoped>\n.detail{\r\n    padding: 30rpx;\r\n    .content{\r\n         font-size: 30rpx;\r\n         .big{\r\n             font-size: 32rpx;\r\n             font-weight: bolder;\r\n         }\r\n    }\r\n}\r\n.group{\r\n    margin-top: 30rpx;\r\n    display: flex;//放在一行\r\n    gap:30rpx;//间距\r\n    button{\r\n        width: 100%;\r\n    }\r\n}\n</style>\n","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/demo0719/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","ref","onLoad","uni"],"mappings":";;;;;AA4BE,UAAM,KAAKA,iBAAS;AACpB,QAAI;AACJ,UAAM,SAASC,cAAAA;AAIfC,kBAAM,OAAC,CAAC,MAAI;AAEV,WAAK,EAAE;AACP;IACJ,CAAG;AAED,UAAM,YAAY,YAAU;AACxB,UAAI,MAAM,MAAM,GAAG,WAAW,WAAW,EAExC,IAAI,EAAE,EACN,IAAI,EAAC,QAAO,KAAI,CAAC;AAClBC,oBAAY,MAAA,MAAA,OAAA,mCAAA,IAAI,OAAO,IAAI;AAC3B,aAAO,QAAQ,IAAI,OAAO;AAAA,IAC7B;AAED,UAAM,eAAgB,MAAI;AACtBA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAM;AAAA,QACN,SAAS,OAAM,QAAK;AAChB,cAAG,IAAI,SAAQ;AACH,kBAAM,GAAG,WAAW,WAAW,EACxC,IAAI,EAAE,EACN,OAAS;AACVA,0BAAAA,MAAI,UAAU;AAAA,cACV,OAAM;AAAA,cACN,MAAK;AAAA,YACzB,CAAiB;AACD,uBAAW,MAAI;AAACA,4BAAAA,MAAI,aAAc;AAAA,YAAA,GAAE,IAAI;AAAA,UACzC;AAAA,QACJ;AAAA,MACX,CAAO;AAAA,IACJ;AAED,UAAM,WAAW,CAAC,MAAI;AAClBA,oBAAAA,MAAY,MAAA,OAAA,mCAAA,CAAC;AACbA,oBAAAA,MAAI,WAAW;AAAA,QACX,KAAI,+BAA6B;AAAA,MAC3C,CAAO;AAAA,IACJ;;;;;;;;;;;;;;;;;;;;ACvEH,GAAG,WAAW,eAAe;"}