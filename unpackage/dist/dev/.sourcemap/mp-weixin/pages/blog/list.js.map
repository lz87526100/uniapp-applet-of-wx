{"version":3,"file":"list.js","sources":["pages/blog/list.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYmxvZy9saXN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"blogList\">\n    <!-- 1 ÊØõÁéªÁíÉÂõ∫ÂÆöÂ§¥ÈÉ® -->\n    <view class=\"head\">\n      <home-head />\n    </view>\n\n    <!-- 2 ÂèØÊªöÂä®ÂÜÖÂÆπÂå∫ -->\n    <view class=\"body\">\n      <scroll-view\n        scroll-y\n        class=\"scrollBox\"\n        enable-back-to-top\n        @scrolltolower=\"loadMore\"\n        refresher-enabled\n        :refresher-triggered=\"refreshing\"\n        @refresherrefresh=\"onRefresh\"\n      >\n        <!-- ‰∏ãÊãâÂà∑Êñ∞ÊåáÁ§∫Âô® -->\n        <view v-if=\"refreshing\" class=\"refresh-indicator\">\n          <uni-load-more status=\"loading\" content=\"Âà∑Êñ∞‰∏≠...\"></uni-load-more>\n        </view>\n\n        <!-- È™®Êû∂Â±èÔºöÈ¶ñÊ¨°Âä†ËΩΩÂâçÂ±ïÁ§∫ -->\n        <view v-if=\"loading && articlesList.length === 0\" class=\"skeleton\">\n          <view v-for=\"i in 8\" :key=\"i\" class=\"card skeleton-card\" />\n        </view>\n\n        <!-- ÁúüÊ≠£ÁöÑÂàóË°® -->\n        <view v-else class=\"list\">\n          <view\n            class=\"card\"\n            v-for=\"item in articlesList\"\n            :key=\"item._id\"\n            @touchstart=\"touchStart\"\n            @touchend=\"touchEnd(item._id)\"\n            :class=\"{ 'shop-review': isShopReview(item) }\"\n          >\n            <!-- Êï¥‰∏™Âç°ÁâáÂÜÖÂÆπÂå∫ÂüüÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂ -->\n            <view class=\"card-content\" @click=\"goDetail(item._id,item.shop_id)\">\n              <!-- ÂõæÁâáÂå∫Âüü -->\n              <view class=\"image-area\">\n                <image\n                  v-if=\"item.pics?.length\"\n                  class=\"content-image\"\n                  :src=\"item.pics[0].url\"\n                  mode=\"aspectFill\"\n                />\n                <image\n                  v-else\n                  class=\"content-image\"\n                  src=\"/static/default-movie.jpg\"\n                  mode=\"aspectFill\"\n                />\n              </view>\n            </view>\n\n            <!-- Â∫ïÈÉ®Â∑•ÂÖ∑Ê†è - Áî®Êà∑/ÂïÜÂÆ∂‰ø°ÊÅØÂíåËØÑËÆ∫ -->\n            <view class=\"toolbar\">\n              <view class=\"content-area\">\n                <!-- Áî®Êà∑/ÂïÜÂÆ∂‰ø°ÊÅØÂíåËØÑËÆ∫ -->\n                <view class=\"user-comment-area\">\n                  <!-- Áî®Êà∑Â§¥ÂÉèÂíåÂêçÂ≠ó -->\n                  <view class=\"user-info\" v-if=\"!isShopReview(item)\">\n                    <image\n                      class=\"user-avatar\"\n                      :src=\"getUserAvatar(item.user_id[0])\"\n                      mode=\"aspectFill\"\n                      @error=\"handleAvatarError\"\n                      @load=\"onAvatarLoad(item.user_id[0])\"\n                    />\n                    <text class=\"username\">{{ item.user_id[0].nickname || 'ÂåøÂêçÁî®Êà∑' }}</text>\n                  </view>\n                  \n              <!-- ÂïÜÂÆ∂Â§¥ÂÉèÂíåÂêçÂ≠ó -->\r\n              <view class=\"shop-info\" v-else @click=\"goShopDetail(item.shop_id)\">\r\n                <image\r\n                  class=\"shop-avatar\"\r\n                  :src=\"getShopAvatar(item.shop_id)\"\r\n                  mode=\"aspectFill\"\r\n                  @error=\"handleShopAvatarError\"\r\n                />\r\n                <text class=\"shop-name\">{{ getShopName(item.shop_id) }}</text>\r\n                <!-- ËØÑÂàÜÊòæÁ§∫ -->\r\n                <view class=\"shop-rating\" v-if=\"item.rating\">\r\n                  <text class=\"rating-star\">‚òÖ</text>\r\n                  <text class=\"rating-value\">{{ item.rating }}</text>\r\n                </view>\r\n              </view>\n                  \n                  <!-- ËØÑËÆ∫ÂÜÖÂÆπ -->\n                  <view class=\"title-area\">\n                    <!-- <text class=\"title\">{{ getCommentPreview(item.content) }}</text> -->\n                  </view>\n                </view>\n              </view>\n              \n              <view class=\"right-actions\">\n                <!-- Êî∂ËóèÊåâÈíÆ -->\n                <view class=\"favorite-btn\" @click.stop=\"toggleFavorite(item._id, item)\">\n                  <uni-icons \n                    :type=\"item.isFavorited ? 'heart-filled' : 'heart'\" \n                    :color=\"item.isFavorited ? '#FF5B5B' : '#8B9AB6'\" \n                    size=\"18\" \n                  />\n                </view>\n                \n                <!-- Âà†Èô§ÊåâÈíÆ -->\n                <view\n                  v-if=\"isPermission(item.user_id[0]._id)\"\n                  class=\"delete\"\n                  @click.stop=\"remove(item._id)\"\n                >\n                  <uni-icons type=\"trash\" size=\"18\" color=\"#fff\" />\n                </view>\n              </view>\n            </view>\n          </view>\n\n          <!-- Â∫ïÈÉ®Âä†ËΩΩÁä∂ÊÄÅ -->\n          <view class=\"footer\">\n            <view v-if=\"loadingMore\" class=\"loading-more\">\n              <uni-load-more status=\"loading\" content=\"Ê≠£Âú®Âä†ËΩΩ...\"></uni-load-more>\n            </view>\n            <view v-else-if=\"finished && articlesList.length > 0\" class=\"no-more\">\n              <text>--- ÊàëÊòØÊúâÂ∫ïÁ∫øÁöÑ ---</text>\n            </view>\n            <view v-else-if=\"articlesList.length === 0\" class=\"empty\">\n              <text class=\"empty-text\">ÊöÇÊó†ÂÜÖÂÆπÔºåÂø´ÂéªÂèëÂ∏ÉÁ¨¨‰∏ÄÊù°Âêß~</text>\n            </view>\n            <view v-else class=\"pull-up\">\n              <text>ÈáäÊîæÂä†ËΩΩÊõ¥Â§ö</text>\n            </view>\n          </view>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 3 Ê∏êÂèòÊÇ¨ÊµÆÂèëÂ∏ÉÊåâÈíÆ -->\n    <view class=\"fab\" @click=\"goAdd\">\n      <text class=\"icon\">+</text>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted } from 'vue';\nimport { onShow, onHide, onPullDownRefresh, onReachBottom } from '@dcloudio/uni-app';\nimport { isPermission } from '@/utils/common.js';\nimport  favoritesManager  from '@/common/style/favorites.js';\n\nconst articlesCloudObj = uniCloud.importObject('articlesCloudObj');\n\nconst articlesList = ref([]);\nconst loading = ref(false);\nconst loadingMore = ref(false);\nconst refreshing = ref(false);\nconst finished = ref(false);\nlet page = 1;\nconst size = 8; // ÊØèÊ¨°Âä†ËΩΩ8Êù°Êï∞ÊçÆ\n\n// Áî®Êà∑Â§¥ÂÉèÁºìÂ≠ò\nconst userAvatarCache = ref(new Map());\nconst MAX_CACHE_SIZE = 30;\n\n// ÂïÜÂÆ∂‰ø°ÊÅØÁºìÂ≠ò\nconst shopInfoCache = ref(new Map());\n\n/* È¶ñÊ¨°ÊãâÂèñ */\nonMounted(() => {\n  console.log('ÂçöÂÆ¢ÂàóË°®È°µÈù¢Âä†ËΩΩ');\n  setupUserInfoListeners();\n  getData(true);\n});\n\n/* È°µÈù¢Ëß¶Â∫ï‰∫ã‰ª∂ */\nonReachBottom(() => {\n  console.log('È°µÈù¢Ëß¶Â∫ïÔºåËß¶ÂèëÂä†ËΩΩÊõ¥Â§ö');\n  loadMore();\n});\n\n/* ‰∏ãÊãâÂà∑Êñ∞ */\nonPullDownRefresh(() => {\n  onRefresh();\n});\n\r\n// Ë∑≥ËΩ¨Âà∞Â∫óÈì∫ËØ¶ÊÉÖÈ°µ\nconst goShopDetail = (shopId) => {\n  if (!shopId) {\n    uni.showToast({\n      title: 'Â∫óÈì∫‰ø°ÊÅØ‰∏çÂ≠òÂú®',\n      icon: 'none'\n    });\n    return;\n  }\n  \n  console.log('Ë∑≥ËΩ¨Âà∞Â∫óÈì∫ËØ¶ÊÉÖÈ°µÔºåÂ∫óÈì∫ID:', shopId);\n  uni.navigateTo({\n    url: `/pages/shopList/shopDetail?id=${shopId}`\n  });\n};\r\n\n// ‰øÆÊîπ goDetail ÂáΩÊï∞\nconst goDetail = (articleId, shopId) => {\n  console.log('Ë∑≥ËΩ¨Âà∞ËØ¶ÊÉÖÈ°µÔºåÊñáÁ´†ID:', articleId, 'ÂïÜÂÆ∂ID:', shopId);\n  let url = `/pages/blog/detail?id=${articleId}`;\n  if (shopId) {\n    url += `&shopId=${shopId}`;\n  }\n  uni.navigateTo({\n    url: url\n  });\n};\n\n/* ÁõëÂê¨ÁºñËæëÈ°µÂà∑Êñ∞ */\nuni.$on('editEvent', () => {\n  console.log('Êî∂Âà∞ÁºñËæë‰∫ã‰ª∂ÔºåÂà∑Êñ∞Êï∞ÊçÆ');\n  page = 1;\n  finished.value = false;\n  getData(true);\n});\n\n/* ÁõëÂê¨Áî®Êà∑‰ø°ÊÅØÊõ¥Êñ∞ */\nconst setupUserInfoListeners = () => {\n  uni.$on('userInfoUpdated', (data) => {\n    console.log('ÂçöÂÆ¢ÂàóË°®Êî∂Âà∞Áî®Êà∑‰ø°ÊÅØÊõ¥Êñ∞:', data);\n    updateUserAvatarInList(data);\n  });\n};\n\n// Êõ¥Êñ∞ÂàóË°®‰∏≠ÁöÑÁî®Êà∑Â§¥ÂÉè\nconst updateUserAvatarInList = (userData) => {\n  if (!userData.userId || !userData.avatar) return;\n  \n  console.log('ÂºÄÂßãÊõ¥Êñ∞ÂçöÂÆ¢ÂàóË°®‰∏≠ÁöÑÁî®Êà∑Â§¥ÂÉèÔºåÁî®Êà∑ID:', userData.userId);\n  \n  // Êõ¥Êñ∞ÁºìÂ≠ò\n  updateAvatarCache(userData.userId, userData.avatar);\n  \n  // Êõ¥Êñ∞ÂàóË°®‰∏≠ÁöÑÂ§¥ÂÉè\n  articlesList.value.forEach((item, index) => {\n    if (item.user_id && item.user_id[0] && item.user_id[0]._id === userData.userId) {\n      if (!item.user_id[0].avatar_file) {\n        item.user_id[0].avatar_file = {};\n      }\n      item.user_id[0].avatar_file.url = userData.avatar;\n      item.user_id[0].avatar_url = userData.avatar;\n      \n      // Âº∫Âà∂Ëß¶ÂèëËßÜÂõæÊõ¥Êñ∞\n      articlesList.value[index] = { ...articlesList.value[index] };\n    }\n  });\n};\n\n// ÊéßÂà∂ÁºìÂ≠òÂ§ßÂ∞è\nconst updateAvatarCache = (userId, avatarUrl) => {\n  if (userAvatarCache.value.size >= MAX_CACHE_SIZE) {\n    const firstKey = userAvatarCache.value.keys().next().value;\n    userAvatarCache.value.delete(firstKey);\n  }\n  userAvatarCache.value.set(userId, avatarUrl);\n};\n\n// Ëé∑ÂèñÁî®Êà∑Â§¥ÂÉè\nconst getUserAvatar = (user) => {\n  if (!user || !user._id) return '/static/defAvatar.png';\n  \n  const userId = user._id;\n  \n  // 1. ‰ºòÂÖàÊ£ÄÊü•ÁºìÂ≠ò\n  if (userAvatarCache.value.has(userId)) {\n    return userAvatarCache.value.get(userId);\n  }\n  \n  // 2. Ê£ÄÊü•Áî®Êà∑ÂØπË±°ÁöÑÂ§¥ÂÉèÊï∞ÊçÆ\n  let avatarUrl = '/static/defAvatar.png';\n  \n  if (user.avatar_url && user.avatar_url.startsWith('http')) {\n    avatarUrl = user.avatar_url;\n  } else if (user.avatar_file && user.avatar_file.url) {\n    const fileUrl = user.avatar_file.url;\n    if (fileUrl.startsWith('http')) {\n      avatarUrl = fileUrl;\n    } else if (fileUrl.startsWith('cloud:')) {\n      return '/static/defAvatar.png';\n    }\n  } else if (user.avatar && user.avatar.startsWith('http')) {\n    avatarUrl = user.avatar;\n  }\n  \n  if (avatarUrl !== '/static/defAvatar.png') {\n    updateAvatarCache(userId, avatarUrl);\n  }\n  \n  return avatarUrl;\n};\n\n// Â§¥ÂÉèÂä†ËΩΩÊàêÂäüÊó∂Â§ÑÁêÜ‰∫ëÂ≠òÂÇ®URL\nconst onAvatarLoad = (user) => {\n  if (!user || !user._id) return;\n  \n  const userId = user._id;\n  if (userAvatarCache.value.has(userId)) return;\n  \n  if (user.avatar_file && user.avatar_file.url && user.avatar_file.url.startsWith('cloud:')) {\n    convertCloudFileUrl(user.avatar_file.url, userId);\n  }\n};\n\n// ÂºÇÊ≠•ËΩ¨Êç¢‰∫ëÂ≠òÂÇ®URL\nconst convertCloudFileUrl = async (fileUrl, userId) => {\n  try {\n    const result = await uniCloud.getTempFileURL({\n      fileList: [fileUrl]\n    });\n    \n    if (result.fileList && result.fileList[0] && result.fileList[0].tempFileURL) {\n      const httpUrl = result.fileList[0].tempFileURL;\n      \n      // Êõ¥Êñ∞ÁºìÂ≠ò\n      updateAvatarCache(userId, httpUrl);\n      \n      // Êõ¥Êñ∞ÂàóË°®‰∏≠ÁöÑÂ§¥ÂÉè\n      updateAvatarInList(userId, httpUrl);\n    }\n  } catch (error) {\n    console.error('ËΩ¨Êç¢‰∫ëÂ≠òÂÇ®URLÂ§±Ë¥•:', error);\n  }\n};\n\n// Êõ¥Êñ∞ÂàóË°®‰∏≠ÁöÑÂ§¥ÂÉèURL\nconst updateAvatarInList = (userId, avatarUrl) => {\n  articlesList.value.forEach((item, index) => {\n    if (item.user_id && item.user_id[0] && item.user_id[0]._id === userId) {\n      if (!item.user_id[0].avatar_file) {\n        item.user_id[0].avatar_file = {};\n      }\n      item.user_id[0].avatar_file.url = avatarUrl;\n      item.user_id[0].avatar_url = avatarUrl;\n      \n      articlesList.value[index] = { ...articlesList.value[index] };\n    }\n  });\n};\n\n// Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\nconst handleAvatarError = (event) => {\n  console.log('Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•:', event);\n};\n\n// Âà§Êñ≠ÊòØÂê¶ÊòØÂïÜÂÆ∂ËØÑ‰ª∑\nconst isShopReview = (item) => {\n  return item.shop_id && item.rating;\n};\n\n// Ëé∑ÂèñÂïÜÂÆ∂Â§¥ÂÉè\nconst getShopAvatar = (shopId) => {\n  if (!shopId) return '/static/default-shop.jpg';\n  \n  const shopInfo = shopInfoCache.value.get(shopId);\n  if (shopInfo && shopInfo.shopPic) {\n    return shopInfo.shopPic;\n  }\n  \n  return '/static/default-shop.jpg';\n};\n\n// Ëé∑ÂèñÂïÜÂÆ∂ÂêçÁß∞\nconst getShopName = (shopId) => {\n  if (!shopId) return 'Êú™Áü•ÂïÜÂÆ∂';\n  \n  const shopInfo = shopInfoCache.value.get(shopId);\n  if (shopInfo && shopInfo.shopName) {\n    return shopInfo.shopName;\n  }\n  \n  return 'Âä†ËΩΩ‰∏≠...';\n};\n\n// ÂïÜÂÆ∂Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\nconst handleShopAvatarError = (event) => {\n  console.log('ÂïÜÂÆ∂Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•:', event);\n  event.target.src = '/static/default-shop.jpg';\n};\n\n// Âä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\nconst loadShopInfo = async (shopId) => {\n  if (!shopId || shopInfoCache.value.has(shopId)) return;\n  \n  try {\n    console.log('ÂºÄÂßãÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØÔºåshopId:', shopId);\n    const res = await uniCloud.callFunction({\n      name: 'getShopDetail',\n      data: { shopId }\n    });\n\n    if (res.result?.errCode === 0) {\n      console.log('ÂïÜÂÆ∂‰ø°ÊÅØÂä†ËΩΩÊàêÂäü:', res.result.data);\n      shopInfoCache.value.set(shopId, res.result.data);\n      \n      // Âº∫Âà∂Êõ¥Êñ∞ËßÜÂõæ\n      articlesList.value = [...articlesList.value];\n    } else {\n      console.error('ÂïÜÂÆ∂‰ø°ÊÅØÂä†ËΩΩÂ§±Ë¥•:', res.result?.errMsg);\n    }\n  } catch (error) {\n    console.error('Âä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØÂºÇÂ∏∏:', error);\n  }\n};\n\n// ÊâπÈáèÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\nconst batchLoadShopInfo = async () => {\n  const shopIds = articlesList.value\n    .filter(item => item.shop_id && !shopInfoCache.value.has(item.shop_id))\n    .map(item => item.shop_id);\n  \n  if (shopIds.length === 0) return;\n  \n  console.log('ÊâπÈáèÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØÔºåÊï∞Èáè:', shopIds.length);\n  \n  // ÈÄê‰∏™Âä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\n  for (const shopId of shopIds) {\n    await loadShopInfo(shopId);\n  }\n};\n\n// Ëé∑ÂèñËØÑËÆ∫È¢ÑËßàÊñáÊú¨\nconst getCommentPreview = (content) => {\n  if (!content) return 'ÊöÇÊó†ËØÑËÆ∫';\n  // ÈôêÂà∂ËØÑËÆ∫ÊòæÁ§∫ÈïøÂ∫¶\n  return content.length > 30 ? content.substring(0, 30) + '...' : content;\n};\n\n// Ëé∑ÂèñÊï∞ÊçÆ\nasync function getData(reset = true) {\n  if (reset) {\n    loading.value = true;\n    page = 1;\n  } else {\n    loadingMore.value = true;\n  }\n  \n  try {\n    console.log('Ëé∑ÂèñÂçöÂÆ¢ÂàóË°®Êï∞ÊçÆÔºåÈ°µÁ†Å:', page);\n    const { errCode, data } = await articlesCloudObj.list({ page, size });\n    \n    if (errCode === 0) {\n      console.log('Ëé∑ÂèñÂà∞Êï∞ÊçÆÊù°Êï∞:', data ? data.length : 0);\n      \n      if (reset) {\n        articlesList.value = data || [];\n      } else {\n        articlesList.value = [...articlesList.value, ...(data || [])];\n      }\n      \n      // Âà§Êñ≠ÊòØÂê¶Âä†ËΩΩÂÆåÊàê\n      finished.value = !data || data.length < size;\n      \n      console.log('Êï∞ÊçÆÂä†ËΩΩÂÆåÊàêÔºåÂàóË°®ÈïøÂ∫¶:', articlesList.value.length, 'ÊòØÂê¶ÂÆåÊàê:', finished.value);\n      \n      // Êï∞ÊçÆÂä†ËΩΩÂÆåÊàêÂêéÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅ\n      if (articlesList.value.length > 0) {\n        await checkFavoritesStatus();\n        // Êñ∞Â¢ûÔºöÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\n        await batchLoadShopInfo();\n      }\n      \n    } else {\n      console.error('Ëé∑ÂèñÊï∞ÊçÆÂ§±Ë¥•:', errCode);\n      uni.showToast({\n        title: 'Âä†ËΩΩÂ§±Ë¥•',\n        icon: 'none'\n      });\n    }\n  } catch (error) {\n    console.error('Ëé∑ÂèñÊï∞ÊçÆÂºÇÂ∏∏:', error);\n    uni.showToast({\n      title: 'ÁΩëÁªúÈîôËØØ',\n      icon: 'none'\n    });\n  } finally {\n    loading.value = false;\n    loadingMore.value = false;\n    refreshing.value = false;\n    uni.stopPullDownRefresh();\n  }\n}\n\n/* ========== Êî∂ËóèÁõ∏ÂÖ≥ÂäüËÉΩ ========== */\n\n// ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ - Â¢ûÂº∫ÈîôËØØÂ§ÑÁêÜ\nasync function toggleFavorite(articleId, item) {\n  try {\n    // Ê£ÄÊü•Áî®Êà∑ÁôªÂΩïÁä∂ÊÄÅ\n    const userInfo = uni.getStorageSync('uni-id-pages-userInfo');\n    if (!userInfo || !userInfo._id) {\n      uni.showToast({ title: 'ËØ∑ÂÖàÁôªÂΩï', icon: 'none' });\n      return;\n    }\n    \n    console.log('ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ:', { articleId, currentStatus: item.isFavorited });\n    \n    if (item.isFavorited) {\n      // ÂèñÊ∂àÊî∂Ëóè\n      const success = await favoritesManager.removeFavorite(articleId);\n      if (success) {\n        item.isFavorited = false;\n        uni.showToast({ title: 'ÂèñÊ∂àÊî∂Ëóè', icon: 'success' });\n      }\n    } else {\n      // Ê∑ªÂä†Êî∂Ëóè\n      const success = await favoritesManager.addFavorite(articleId);\n      if (success) {\n        item.isFavorited = true;\n        uni.showToast({ title: 'Êî∂ËóèÊàêÂäü', icon: 'success' });\n      }\n    }\n  } catch (error) {\n    console.error('ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅÂ§±Ë¥•:', error);\n    uni.showToast({ title: 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', icon: 'none' });\n  }\n}\n\n// ÊâπÈáèÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅ \nasync function checkFavoritesStatus() {\n    try {\n        const articleIds = articlesList.value.map(item => item._id).filter(id => id);\n        \n        if (articleIds.length === 0) {\n            console.log('Ê≤°ÊúâÊñáÁ´†ÈúÄË¶ÅÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅ');\n            return;\n        }\n        \n        console.log('üîÑ ÂºÄÂßãÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÔºåÊñáÁ´†Êï∞Èáè:', articleIds.length);\n        \n        const favoritesStatus = await favoritesManager.batchCheckFavorites(articleIds);\n        console.log('‚úÖ Êî∂ËóèÁä∂ÊÄÅÊ£ÄÊü•ÂÆåÊàê:', favoritesStatus);\n        \n        // ÂÆâÂÖ®Âú∞Êõ¥Êñ∞ÂàóË°®È°πÁöÑÊî∂ËóèÁä∂ÊÄÅ\n        articlesList.value.forEach(item => {\n            if (item && item._id) {\n                item.isFavorited = favoritesStatus[item._id] || false;\n            }\n        });\n    } catch (error) {\n        console.error('Ê£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÂ§±Ë¥•ÔºåËÆæÁΩÆÊâÄÊúâ‰∏∫Êú™Êî∂Ëóè:', error);\n        // Âá∫ÈîôÊó∂ËÆæÁΩÆÊâÄÊúâÊñáÁ´†‰∏∫Êú™Êî∂ËóèÁä∂ÊÄÅ\n        articlesList.value.forEach(item => {\n            if (item) {\n                item.isFavorited = false;\n            }\n        });\n    }\n}\n\n/* ‰∏ãÊãâÂà∑Êñ∞ */\nfunction onRefresh() {\n  if (refreshing.value) return;\n  \n  refreshing.value = true;\n  console.log('‰∏ãÊãâÂà∑Êñ∞');\n  getData(true);\n}\n\n/* Ëß¶Â∫ïÂä†ËΩΩÊõ¥Â§ö */\nfunction loadMore() {\n  // Èò≤Ê≠¢ÈáçÂ§çÂä†ËΩΩ\n  if (loadingMore.value || finished.value || loading.value) {\n    console.log('Ë∑≥ËøáÂä†ËΩΩ: loadingMore=', loadingMore.value, 'finished=', finished.value, 'loading=', loading.value);\n    return;\n  }\n  \n  console.log('Ëß¶Â∫ïÂä†ËΩΩÊõ¥Â§öÔºåÈ°µÁ†Å:', page + 1);\n  loadingMore.value = true;\n  page++;\n  getData(false);\n}\n\n/* Âà†Èô§ */\nasync function remove(id) {\n  const { confirm } = await uni.showModal({\n    title: 'ÊèêÁ§∫',\n    content: 'Á°ÆËÆ§Âà†Èô§ËøôÊù°ÈöèÁ¨îÔºü',\n    confirmColor: '#FF5B5B'\n  });\n  if (!confirm) return;\n  \n  const { errCode } = await articlesCloudObj.remove(id);\n  if (errCode === 0) {\n    uni.showToast({ title: 'Â∑≤Âà†Èô§', icon: 'none' });\n    page = 1;\n    getData(true);\n  }\n}\n\n/* ÂõæÁâáÈ¢ÑËßà */\nfunction preview(pics, idx) {\n  uni.previewImage({\n    urls: pics.map(p => p.url),\n    current: idx\n  });\n}\n\n/* ÊªëÂä®Âà†Èô§ - ÁÆÄÂçïÂÆûÁé∞ */\nlet startX = 0;\nfunction touchStart(e) {\n  startX = e.touches[0].pageX;\n}\nfunction touchEnd(id) {\n  const moveX = event.changedTouches[0].pageX - startX;\n  if (moveX < -80) remove(id);\n}\n\n/* ÂèëÂ∏É */\nfunction goAdd() {\n  uni.navigateTo({ url: '/pages/blog/choseEdit' });\n}\n\n// È°µÈù¢Âç∏ËΩΩÊó∂ÁßªÈô§ÁõëÂê¨\nonUnmounted(() => {\n  console.log('ÂçöÂÆ¢ÂàóË°®È°µÈù¢Âç∏ËΩΩ');\n  uni.$off('userInfoUpdated');\n  uni.$off('editEvent');\n});\n\n// Âº∫Âà∂Âà∑Êñ∞ token\nasync function refreshToken() {\n  try {\n    const uniIdCo = uniCloud.importObject('uni-id-co');\n    const result = await uniIdCo.refreshToken();\n    console.log('Âà∑Êñ∞tokenÁªìÊûú:', result);\n  } catch (error) {\n    console.error('Âà∑Êñ∞tokenÂ§±Ë¥•:', error);\n  }\n};\n\n// Âú® list È°µÈù¢‰∏≠Ê∑ªÂä†Ë∞ÉËØïÊñπÊ≥ï\nasync function debugLoginStatus() {\n    try {\n        const articlesCloudObj = uniCloud.importObject('articlesCloudObj');\n        const result = await articlesCloudObj.debugLoginStatus();\n        console.log('üîç ÁôªÂΩïÁä∂ÊÄÅË∞ÉËØïÁªìÊûú:', result);\n    } catch (error) {\n        console.error('Ë∞ÉËØïÂ§±Ë¥•:', error);\n    }\n}\n\n// Âú® onShow Êàñ mounted ‰∏≠Ë∞ÉÁî®\nonMounted(() => {\n    debugLoginStatus();\n});\n</script>\n\n<style lang=\"scss\" scoped>\n/* Ê†∑Âºè‰øùÊåÅ‰∏çÂèòÔºåÊ∑ªÂä†Âà∑Êñ∞ÊåáÁ§∫Âô®Ê†∑Âºè */\n.refresh-indicator {\n  padding: 20rpx 0;\n  text-align: center;\n}\n\n.empty {\n  text-align: center;\n  padding: 100rpx 0;\n  \n  .empty-text {\n    font-size: 28rpx;\n    color: #999;\n  }\n}\n\n/* ÂÖ∂‰ªñÊ†∑Âºè‰øùÊåÅ‰∏çÂèò */\n/* -------------------- ÂèòÈáèÂå∫ -------------------- */\n$primary: #4F8BFF;\n$radius: 32rpx;\n$shadow: 0 8rpx 32rpx rgba(0, 0, 0, .08);\n$transition: all .3s cubic-bezier(.4, 0, .2, 1);\n\n/* -------------------- ‰∏ªÁªìÊûÑ -------------------- */\n.blogList {\n  min-height: 100vh;\n  background: linear-gradient(180deg, #CDE5FF 0%, #E9F3FF 100%);\n  display: flex;\n  flex-direction: column;\n}\n\n/* Â§¥ÈÉ®ÔºöÊØõÁéªÁíÉ */\n.head {\n  position: sticky;\n  top: 0;\n  z-index: 9;\n  backdrop-filter: blur(20rpx);\n  -webkit-backdrop-filter: blur(20rpx);\n  background: rgba(255, 255, 255, .65);\n  box-shadow: 0 2rpx 16rpx rgba(0, 0, 0, .05);\n}\n\n/* ÂÜÖÂÆπÂå∫ */\n.body {\n  flex: 1;\n  background-color: rgba(255, 255, 255, .65);\n  border-radius: $radius $radius 0 0;\n  overflow: hidden;\n  margin-top: -16rpx;\n}\n\n.scrollBox {\n  height: 100%;\n  padding: 24rpx 0rpx 40rpx;\n}\n\n/* -------------------- È™®Êû∂Â±è -------------------- */\n.skeleton {\n  .skeleton-card {\n    height: 280rpx;\n    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n    background-size: 200% 100%;\n    animation: loading 1.2s ease infinite;\n    margin-bottom: 24rpx;\n  }\n  @keyframes loading {\n    0% { background-position: 200% 0; }\n    100% { background-position: -200% 0; }\n  }\n}\n\n/* -------------------- Âç°Áâá -------------------- */\n.card {\n  background: #fff;\n  border-radius: 24rpx;\n  padding: 0;\n  margin: 0 24rpx 24rpx;\n  box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, .08);\n  transition: all .3s cubic-bezier(.4, 0, .2, 1);\n  overflow: hidden;\n  \n  &:active { \n    transform: scale(.98); \n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, .12);\n  }\n\n  /* ÂïÜÂÆ∂ËØÑ‰ª∑Âç°ÁâáÁâπÊÆäÊ†∑Âºè */\n  &.shop-review {\n    // border-left: 6rpx solid #FF6B35;\n  }\n\n  /* Âç°ÁâáÂÜÖÂÆπÂå∫Âüü - ÂèØÁÇπÂáª */\n  .card-content {\n    /* ÂõæÁâáÂå∫Âüü */\n    .image-area {\n      .content-image {\n        width: 100%;\n        height: 400rpx;\n        background-color: #f5f5f5;\n      }\n    }\n\n    /* Ê†áÈ¢òÂå∫Âüü */\n    .title-area {\n      padding: 20rpx 24rpx 16rpx;\n      \n      .title {\n        font-size: 32rpx;\n        font-weight: 700;\n        color: #222;\n        line-height: 1.4;\n        display: -webkit-box;\n        -webkit-line-clamp: 2;\n        -webkit-box-orient: vertical;\n        overflow: hidden;\n      }\n    }\n  }\n\n  /* Â∫ïÈÉ®Â∑•ÂÖ∑Ê†è - Áî®Êà∑ÂêçÂíåËØÑËÆ∫ */\n  .toolbar {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 16rpx 24rpx 24rpx;\n    background: #fff;\n    border-top: 1rpx solid #f0f0f0;\n    \n    .content-area {\n      flex: 1;\n      \n      /* Áî®Êà∑‰ø°ÊÅØÂíåËØÑËÆ∫Âå∫Âüü */\n      .user-comment-area {\n        display: flex;\n        align-items: center;\n        gap: 16rpx;\n        \n        .user-info {\n          display: flex;\n          align-items: center;\n          gap: 12rpx;\n          min-width: 120rpx;\n          \n          .user-avatar {\n            width: 48rpx;\n            height: 48rpx;\n            border-radius: 50%;\n            border: 2rpx solid #f0f0f0;\n          }\n          \n          .username {\n            font-size: 24rpx;\n            color: #666;\n            font-weight: 500;\n            white-space: nowrap;\n          }\n        }\n        \n        /* ÂïÜÂÆ∂‰ø°ÊÅØÊ†∑Âºè */\n.shop-info {\n  display: flex;\n  align-items: center;\n  gap: 12rpx;\n  min-width: 120rpx;\n  padding: 8rpx 12rpx;\n  border-radius: 16rpx;\n  transition: all 0.2s ease;\n  \n  &:active {\n    background-color: rgba(255, 107, 53, 0.1);\n    transform: scale(0.98);\n  }\n  \n  .shop-avatar {\n    width: 48rpx;\n    height: 48rpx;\n    border-radius: 12rpx;\n    border: 2rpx solid #f0f0f0;\n  }\n  \n  .shop-name {\n    font-size: 24rpx;\n    color: #FF6B35;\n    font-weight: 600;\n    white-space: nowrap;\n  }\n  \n  .shop-rating {\n    display: flex;\n    align-items: center;\n    background: #FFF8E1;\n    padding: 4rpx 8rpx;\n    border-radius: 8rpx;\n    margin-left: 8rpx;\n    \n    .rating-star {\n      color: #FFD700;\n      font-size: 20rpx;\n      margin-right: 2rpx;\n    }\n    \n    .rating-value {\n      font-size: 20rpx;\n      color: #FF6B35;\n      font-weight: 600;\n    }\n  }\n}\r\n \n        .comment-content {\n          flex: 1;\n          \n          .comment-text {\n            font-size: 26rpx;\n            color: #333;\n            line-height: 1.4;\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n            overflow: hidden;\n          }\n        }\n      }\n    }\n    \n    .right-actions {\n      display: flex;\n      align-items: center;\n      gap: 12rpx;\n      margin-left: 16rpx;\n      \n      .favorite-btn {\n        width: 48rpx;\n        height: 48rpx;\n        border-radius: 50%;\n        background: #f8f8f8;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s ease;\n        \n        &:active {\n          transform: scale(0.9);\n          background: #e0e0e0;\n        }\n      }\n      \n      .delete {\n        width: 48rpx;\n        height: 48rpx;\n        border-radius: 50%;\n        background: linear-gradient(135deg, #FF5B5B 0%, #FF8A8A 100%);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.3s ease;\n        \n        &:active { \n          transform: scale(.9); \n        }\n      }\n    }\n  }\n}\n\n.footer {\n  text-align: center;\n  padding: 40rpx 0;\n  font-size: 24rpx;\n  color: #8B9AB6;\n  \n  .loading-more,\n  .no-more,\n  .pull-up {\n    padding: 20rpx 0;\n  }\n  \n  .no-more {\n    color: #999;\n  }\n  \n  .pull-up {\n    color: #4F8BFF;\n  }\n}\n\n/* -------------------- ÊÇ¨ÊµÆÂèëÂ∏ÉÊåâÈíÆ -------------------- */\n.fab {\n  position: fixed;\n  right: 40rpx;\n  bottom: 120rpx;\n  width: 112rpx;\n  height: 112rpx;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #6AA6FF 0%, $primary 100%);\n  box-shadow: 0 8rpx 32rpx rgba($primary, .45);\n  display: grid;\n  place-items: center;\n  animation: fadeIn .6s ease both;\n  transition: $transition;\n  &:active { transform: scale(.9); }\n  .icon {\n    font-size: 56rpx;\n    color: #fff;\n    font-weight: 300;\n  }\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(40rpx) scale(.8); }\n  to { opacity: 1; transform: translateY(0) scale(1); }\n}\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/blog/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","ref","onMounted","uni","onReachBottom","onPullDownRefresh","event","favoritesManager","onUnmounted","articlesCloudObj"],"mappings":"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"}