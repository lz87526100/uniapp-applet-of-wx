{"version":3,"file":"item.js","sources":["pages/self/item.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VsZi9pdGVtLnZ1ZQ"],"sourcesContent":["<template>\n    <view class=\"blogList\">\n       \n\n        <!-- 2 ÂèØÊªöÂä®ÂÜÖÂÆπÂå∫ -->\n        <view class=\"body\">\n            <scroll-view\n                scroll-y\n                class=\"scrollBox\"\n                enable-back-to-top\n                @scrolltolower=\"loadMore\"\n                refresher-enabled\n                :refresher-triggered=\"refreshing\"\n                @refresherrefresh=\"onRefresh\"\n            >\n                <!-- È°µÈù¢Ê†áÈ¢ò - ‰øùÊåÅÂéüÊúâÊ†∑Âºè -->\n                <view class=\"page-header\">\n                    <text class=\"page-title\">ÊàëÁöÑËØÑËÆ∫</text>\n                    <text class=\"page-subtitle\" v-if=\"currentUserId\">Áî®Êà∑ID: {{ currentUserId }}</text>\n                </view>\n\n                <!-- ‰∏ãÊãâÂà∑Êñ∞ÊåáÁ§∫Âô® -->\n                <view v-if=\"refreshing\" class=\"refresh-indicator\">\n                    <uni-load-more status=\"loading\" content=\"Âà∑Êñ∞‰∏≠...\"></uni-load-more>\n                </view>\n\n                <!-- È™®Êû∂Â±èÔºöÈ¶ñÊ¨°Âä†ËΩΩÂâçÂ±ïÁ§∫ -->\n                <view v-if=\"loading && commentList.length === 0\" class=\"skeleton\">\n                    <view v-for=\"i in 8\" :key=\"i\" class=\"card skeleton-card\" />\n                </view>\n\n                <!-- ÁúüÊ≠£ÁöÑÂàóË°® -->\n                <view v-else class=\"list\">\n                    <view\n                        class=\"card\"\n                        v-for=\"item in commentList\"\n                        :key=\"item._id\"\n                        @touchstart=\"touchStart\"\n                        @touchend=\"touchEnd(item._id)\"\n                        :class=\"{ 'shop-review': isShopReview(item) }\"\n                    >\n                        <!-- Êï¥‰∏™Âç°ÁâáÂÜÖÂÆπÂå∫ÂüüÁªëÂÆöÁÇπÂáª‰∫ã‰ª∂ -->\n                        <view class=\"card-content\" @click=\"goToDetail(item)\">\n                            <!-- ÂõæÁâáÂå∫Âüü -->\n                            <view class=\"image-area\">\n                                <image\n                                    v-if=\"item.pics?.length\"\n                                    class=\"content-image\"\n                                    :src=\"item.pics[0]\"\n                                    mode=\"aspectFill\"\n                                />\n                                <image\n                                    v-else\n                                    class=\"content-image\"\n                                    src=\"/static/default-movie.jpg\"\n                                    mode=\"aspectFill\"\n                                />\n                            </view>\n                        </view>\n\n                        <!-- Â∫ïÈÉ®Â∑•ÂÖ∑Ê†è - Áî®Êà∑/ÂïÜÂÆ∂‰ø°ÊÅØÂíåËØÑËÆ∫ -->\n                        <view class=\"toolbar\">\n                            <view class=\"content-area\">\n                                <!-- Áî®Êà∑/ÂïÜÂÆ∂‰ø°ÊÅØÂíåËØÑËÆ∫ -->\n                                <view class=\"user-comment-area\">\n                                    <!-- Áî®Êà∑Â§¥ÂÉèÂíåÂêçÂ≠ó -->\n                                    <view class=\"user-info\" v-if=\"!isShopReview(item)\">\n                                        <image\n                                            class=\"user-avatar\"\n                                            :src=\"getUserAvatar(item)\"\n                                            mode=\"aspectFill\"\n                                        />\n                                        <text class=\"username\">{{ getUserName(item) }}</text>\n                                    </view>\n                                    \n                                    <!-- ÂïÜÂÆ∂Â§¥ÂÉèÂíåÂêçÂ≠ó -->\n                                    <view class=\"shop-info\" v-else>\n                                        <image\n                                            class=\"shop-avatar\"\n                                            :src=\"getShopAvatar(item)\"\n                                            mode=\"aspectFill\"\n                                            @error=\"handleShopAvatarError\"\n                                        />\n                                        <text class=\"shop-name\">{{ getShopName(item) }}</text>\n                                        <!-- ËØÑÂàÜÊòæÁ§∫ -->\n                                        <view class=\"shop-rating\" v-if=\"item.rating\">\n                                            <text class=\"rating-star\">‚òÖ</text>\n                                            <text class=\"rating-value\">{{ item.rating }}</text>\n                                        </view>\n                                    </view>\n                                </view>\n                            </view>\n                            \n                            <view class=\"right-actions\">\n                                <!-- Êî∂ËóèÊåâÈíÆ -->\n                                <view class=\"favorite-btn\" @click.stop=\"toggleFavorite(item._id, item)\">\n                                    <uni-icons \n                                        :type=\"item.isFavorited ? 'heart-filled' : 'heart'\" \n                                        :color=\"item.isFavorited ? '#FF5B5B' : '#8B9AB6'\" \n                                        size=\"18\" \n                                    />\n                                </view>\n                                \n                                <!-- Âà†Èô§ÊåâÈíÆ -->\n                                <view\n                                    v-if=\"isPermission(item.userInfo?._id)\"\n                                    class=\"delete\"\n                                    @click.stop=\"remove(item._id)\"\n                                >\n                                    <uni-icons type=\"trash\" size=\"18\" color=\"#fff\" />\n                                </view>\n                            </view>\n                        </view>\n                    </view>\n\n                    <!-- Â∫ïÈÉ®Âä†ËΩΩÁä∂ÊÄÅ -->\n                    <view class=\"footer\">\n                        <view v-if=\"loadingMore\" class=\"loading-more\">\n                            <uni-load-more status=\"loading\" content=\"Ê≠£Âú®Âä†ËΩΩ...\"></uni-load-more>\n                        </view>\n                        <view v-else-if=\"finished && commentList.length > 0\" class=\"no-more\">\n                            <text>--- ÊàëÊòØÊúâÂ∫ïÁ∫øÁöÑ ---</text>\n                        </view>\n                        <view v-else-if=\"commentList.length === 0\" class=\"empty\">\n                            <text class=\"empty-text\">ÊöÇÊó†ÂÜÖÂÆπÔºåÂø´ÂéªÂèëÂ∏ÉÁ¨¨‰∏ÄÊù°Âêß~</text>\n                        </view>\n                        <view v-else class=\"pull-up\">\n                            <text>ÈáäÊîæÂä†ËΩΩÊõ¥Â§ö</text>\n                        </view>\n                    </view>\n                </view>\n            </scroll-view>\n        </view>\n\n        <!-- 3 Ê∏êÂèòÊÇ¨ÊµÆÂèëÂ∏ÉÊåâÈíÆ -->\n        <view class=\"fab\" @click=\"goAdd\">\n            <text class=\"icon\">+</text>\n        </view>\n    </view>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { onPullDownRefresh, onReachBottom, onLoad, onUnload } from '@dcloudio/uni-app'\nimport { isPermission } from '@/utils/common.js'\nimport favoritesManager from '@/common/style/favorites.js'\n\n// ÂìçÂ∫îÂºèÊï∞ÊçÆ\nconst commentList = ref([])\nconst currentUserId = ref('')\nconst loading = ref(false)\nconst loadingMore = ref(false)\nconst refreshing = ref(false)\nconst finished = ref(false)\nlet page = 1\nconst size = 8\n\n// Áî®Êà∑Â§¥ÂÉèÁºìÂ≠ò\nconst userAvatarCache = ref(new Map())\nconst MAX_CACHE_SIZE = 30\n\n// ÂïÜÂÆ∂‰ø°ÊÅØÁºìÂ≠ò\nconst shopInfoCache = ref(new Map())\n\n// Âà§Êñ≠ÊòØÂê¶ÊòØÂïÜÂÆ∂ËØÑ‰ª∑\nconst isShopReview = (item) => {\n    return item.shop_id && item.rating\n}\n\n// Ëé∑ÂèñÁî®Êà∑Â§¥ÂÉè\nconst getUserAvatar = (item) => {\n    if (!item.userInfo) return '/static/defAvatar.png'\n    \n    const userId = item.userInfo._id\n    if (!userId) return '/static/defAvatar.png'\n    \n    // 1. ‰ºòÂÖàÊ£ÄÊü•ÁºìÂ≠ò\n    if (userAvatarCache.value.has(userId)) {\n        return userAvatarCache.value.get(userId)\n    }\n    \n    // 2. Ê£ÄÊü•Áî®Êà∑ÂØπË±°ÁöÑÂ§¥ÂÉèÊï∞ÊçÆ\n    let avatarUrl = '/static/defAvatar.png'\n    \n    if (item.userInfo.avatar_url && item.userInfo.avatar_url.startsWith('http')) {\n        avatarUrl = item.userInfo.avatar_url\n    } else if (item.userInfo.avatar_file && item.userInfo.avatar_file.url) {\n        const fileUrl = item.userInfo.avatar_file.url\n        if (fileUrl.startsWith('http')) {\n            avatarUrl = fileUrl\n        } else if (fileUrl.startsWith('cloud:')) {\n            return '/static/defAvatar.png'\n        }\n    } else if (item.userInfo.avatar && item.userInfo.avatar.startsWith('http')) {\n        avatarUrl = item.userInfo.avatar\n    }\n    \n    if (avatarUrl !== '/static/defAvatar.png') {\n        updateAvatarCache(userId, avatarUrl)\n    }\n    \n    return avatarUrl\n}\n\n// Ëé∑ÂèñÁî®Êà∑Âêç\nconst getUserName = (item) => {\n    return item.userInfo?.nickname || 'ÂåøÂêçÁî®Êà∑'\n}\n\n// Ëé∑ÂèñÂïÜÂÆ∂Â§¥ÂÉè\nconst getShopAvatar = (item) => {\n    if (!item.shopInfo) return '/static/default-shop.jpg'\n    return item.shopInfo.shopPic || '/static/default-shop.jpg'\n}\n\n// Ëé∑ÂèñÂïÜÂÆ∂ÂêçÁß∞\nconst getShopName = (item) => {\n    if (!item.shopInfo) return 'Âä†ËΩΩ‰∏≠...'\n    return item.shopInfo.shopName || 'Êú™Áü•ÂïÜÂÆ∂'\n}\n\n// Ëé∑ÂèñËØÑËÆ∫È¢ÑËßàÊñáÊú¨\nconst getCommentPreview = (content) => {\n    if (!content) return 'ÊöÇÊó†ËØÑËÆ∫'\n    return content.length > 30 ? content.substring(0, 30) + '...' : content\n}\n\n// ÂïÜÂÆ∂Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•Â§ÑÁêÜ\nconst handleShopAvatarError = (event) => {\n    console.log('ÂïÜÂÆ∂Â§¥ÂÉèÂä†ËΩΩÂ§±Ë¥•:', event)\n    event.target.src = '/static/default-shop.jpg'\n}\n\n// Ë∑≥ËΩ¨Âà∞ËØ¶ÊÉÖÈ°µ\nfunction goToDetail(item) {\n    if (!item || !item._id) {\n        uni.showToast({ title: 'ÊñáÁ´†‰ø°ÊÅØÈîôËØØ', icon: 'none' })\n        return\n    }\n    \n    let url = `/pages/blog/detail?id=${item._id}`\n    if (item.shop_id) {\n        url += `&shopId=${item.shop_id}`\n    }\n    \n    uni.navigateTo({\n        url: url\n    })\n}\n\n// ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ\nasync function toggleFavorite(articleId, item) {\n    try {\n        const userInfo = uni.getStorageSync('uni-id-pages-userInfo')\n        if (!userInfo || !userInfo._id) {\n            uni.showToast({ title: 'ËØ∑ÂÖàÁôªÂΩï', icon: 'none' })\n            return\n        }\n        \n        console.log('ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ:', { articleId, currentStatus: item.isFavorited })\n        \n        if (item.isFavorited) {\n            const success = await favoritesManager.removeFavorite(articleId)\n            if (success) {\n                item.isFavorited = false\n                uni.showToast({ title: 'ÂèñÊ∂àÊî∂Ëóè', icon: 'success' })\n            }\n        } else {\n            const success = await favoritesManager.addFavorite(articleId)\n            if (success) {\n                item.isFavorited = true\n                uni.showToast({ title: 'Êî∂ËóèÊàêÂäü', icon: 'success' })\n            }\n        }\n    } catch (error) {\n        console.error('ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅÂ§±Ë¥•:', error)\n        uni.showToast({ title: 'Êìç‰ΩúÂ§±Ë¥•ÔºåËØ∑ÈáçËØï', icon: 'none' })\n    }\n}\n\n// Âä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\nconst loadShopInfo = async (shopId) => {\n    if (!shopId) return null\n    \n    try {\n        console.log('ÂºÄÂßãÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØÔºåshopId:', shopId)\n        const res = await uniCloud.callFunction({\n            name: 'getShopDetail',\n            data: { shopId }\n        })\n\n        if (res.result?.errCode === 0) {\n            console.log('ÂïÜÂÆ∂‰ø°ÊÅØÂä†ËΩΩÊàêÂäü:', res.result.data)\n            shopInfoCache.value.set(shopId, res.result.data)\n            return res.result.data\n        } else {\n            console.error('ÂïÜÂÆ∂‰ø°ÊÅØÂä†ËΩΩÂ§±Ë¥•:', res.result?.errMsg)\n        }\n    } catch (error) {\n        console.error('Âä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØÂºÇÂ∏∏:', error)\n    }\n    return null\n}\n\n// ÊâπÈáèÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\nconst batchLoadShopInfo = async () => {\n    const shopIds = commentList.value\n        .filter(item => item.shop_id && !shopInfoCache.value.has(item.shop_id))\n        .map(item => item.shop_id)\n    \n    if (shopIds.length === 0) return\n    \n    console.log('ÊâπÈáèÂä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØÔºåÊï∞Èáè:', shopIds.length)\n    \n    // ÈÄê‰∏™Âä†ËΩΩÂïÜÂÆ∂‰ø°ÊÅØ\n    for (const shopId of shopIds) {\n        await loadShopInfo(shopId)\n    }\n    \n    // Êõ¥Êñ∞ÂàóË°®‰∏≠ÁöÑÂïÜÂÆ∂‰ø°ÊÅØ\n    commentList.value.forEach((item, index) => {\n        if (item.shop_id && shopInfoCache.value.has(item.shop_id)) {\n            item.shopInfo = shopInfoCache.value.get(item.shop_id)\n            // Âº∫Âà∂Ëß¶ÂèëËßÜÂõæÊõ¥Êñ∞\n            commentList.value[index] = { ...commentList.value[index] }\n        }\n    })\n}\n\n// Â§¥ÂÉèÁºìÂ≠òÁÆ°ÁêÜ\nconst updateAvatarCache = (userId, avatarUrl) => {\n    if (userAvatarCache.value.size >= MAX_CACHE_SIZE) {\n        const firstKey = userAvatarCache.value.keys().next().value\n        userAvatarCache.value.delete(firstKey)\n    }\n    userAvatarCache.value.set(userId, avatarUrl)\n}\n\n// Êé•Êî∂È°µÈù¢ÂèÇÊï∞\nonLoad(async (options) => {\n    console.log('È°µÈù¢ÂèÇÊï∞:', options)\n    \n    if (options.userId) {\n        currentUserId.value = options.userId\n    } else {\n        const userInfoFromStorage = uni.getStorageSync('uni-id-pages-userInfo')\n        if (userInfoFromStorage && userInfoFromStorage._id) {\n            currentUserId.value = userInfoFromStorage._id\n        }\n    }\n    \n    console.log('ÂΩìÂâçÁî®Êà∑ID:', currentUserId.value)\n    await getData(true)\n})\n\n// Âä†ËΩΩÊï∞ÊçÆ\nconst getData = async (reset = true) => {\n    if (reset) {\n        loading.value = true\n        page = 1\n    } else {\n        loadingMore.value = true\n    }\n    \n    try {\n        const articlesCloudObj = uniCloud.importObject('articlesCloudObj')\n        let res\n        \n        // Â∞ùËØï‰ΩøÁî® getUserArticles ÊñπÊ≥ï\n        try {\n            res = await articlesCloudObj.getUserArticles({\n                userId: currentUserId.value,\n                page: page,\n                size: size\n            })\n        } catch (error) {\n            console.log('getUserArticles ÊñπÊ≥ï‰∏çÂ≠òÂú®Ôºå‰ΩøÁî® list ÊñπÊ≥ï:', error)\n            // ÈôçÁ∫ßÊñπÊ°àÔºö‰ΩøÁî® list ÊñπÊ≥ïÁÑ∂ÂêéÁ≠õÈÄâ\n            res = await articlesCloudObj.list({ page: page, size: 100 })\n        }\n        \n        console.log('Âä†ËΩΩÊï∞ÊçÆÁªìÊûú:', res)\n        \n        if (res.errCode === 0) {\n            let data = res.data || []\n            \n            // Â¶ÇÊûúÊòØ‰ΩøÁî® list ÊñπÊ≥ïÔºåÈúÄË¶ÅÁ≠õÈÄâÁî®Êà∑ÊñáÁ´†\n            if (!res.data || (Array.isArray(res.data) && res.data.length > 0 && !res.data[0].user_id)) {\n                data = data.filter(item => {\n                    if (Array.isArray(item.user_id)) {\n                        return item.user_id.some(user => user._id === currentUserId.value)\n                    } else {\n                        return item.user_id === currentUserId.value\n                    }\n                })\n            }\n            \n            console.log(`Áî®Êà∑ÊñáÁ´†Êï∞Èáè: ${data.length}`)\n            \n            // Â§ÑÁêÜÊï∞ÊçÆ\n            const processedData = data.map(item => ({\n                _id: item._id || '',\n                content: item.content || 'ÊöÇÊó†ÂÜÖÂÆπ',\n                pics: processImagePaths(item.pics),\n                like_count: item.like_count || 0,\n                comment_count: item.comment_count || 0,\n                createTime: item.createTime || item.publish_date || Date.now(),\n                shop_id: item.shop_id || null,\n                rating: item.rating || null,\n                userInfo: Array.isArray(item.user_id) ? item.user_id[0] : item.user_id,\n                shopInfo: null, // ÂàùÂßãÂåñ‰∏∫ nullÔºåÂêéÈù¢ÂÜçÂä†ËΩΩ\n                isFavorited: false\n            }))\n            \n            if (reset) {\n                commentList.value = processedData\n            } else {\n                commentList.value = [...commentList.value, ...processedData]\n            }\n            \n            // Âà§Êñ≠ÊòØÂê¶Âä†ËΩΩÂÆåÊàê\n            finished.value = !data || data.length < size\n            \n            // Êï∞ÊçÆÂä†ËΩΩÂÆåÊàêÂêéÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÂíåÂïÜÂÆ∂‰ø°ÊÅØ\n            if (commentList.value.length > 0) {\n                await checkFavoritesStatus()\n                await batchLoadShopInfo()\n            }\n            \n        } else {\n            console.error('Ëé∑ÂèñÊï∞ÊçÆÂ§±Ë¥•:', res.errCode)\n            uni.showToast({\n                title: 'Âä†ËΩΩÂ§±Ë¥•',\n                icon: 'none'\n            })\n        }\n    } catch (error) {\n        console.error('Ëé∑ÂèñÊï∞ÊçÆÂºÇÂ∏∏:', error)\n        uni.showToast({\n            title: 'ÁΩëÁªúÈîôËØØ',\n            icon: 'none'\n        })\n    } finally {\n        loading.value = false\n        loadingMore.value = false\n        refreshing.value = false\n        uni.stopPullDownRefresh()\n    }\n}\n\n// ÊâπÈáèÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅ\nasync function checkFavoritesStatus() {\n    try {\n        const articleIds = commentList.value.map(item => item._id).filter(id => id)\n        \n        if (articleIds.length === 0) {\n            console.log('Ê≤°ÊúâÊñáÁ´†ÈúÄË¶ÅÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅ')\n            return\n        }\n        \n        console.log('üîÑ ÂºÄÂßãÊ£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÔºåÊñáÁ´†Êï∞Èáè:', articleIds.length)\n        \n        const favoritesStatus = await favoritesManager.batchCheckFavorites(articleIds)\n        console.log('‚úÖ Êî∂ËóèÁä∂ÊÄÅÊ£ÄÊü•ÂÆåÊàê:', favoritesStatus)\n        \n        commentList.value.forEach(item => {\n            if (item && item._id) {\n                item.isFavorited = favoritesStatus[item._id] || false\n            }\n        })\n    } catch (error) {\n        console.error('Ê£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÂ§±Ë¥•ÔºåËÆæÁΩÆÊâÄÊúâ‰∏∫Êú™Êî∂Ëóè:', error)\n        commentList.value.forEach(item => {\n            if (item) {\n                item.isFavorited = false\n            }\n        })\n    }\n}\n\n// Â§ÑÁêÜÂõæÁâáË∑ØÂæÑ\nconst processImagePaths = (pics) => {\n    if (!Array.isArray(pics)) {\n        return []\n    }\n    \n    return pics.map(pic => {\n        if (!pic) return ''\n        if (typeof pic === 'object') {\n            return pic.url || pic.path || pic.src || ''\n        }\n        return String(pic)\n    }).filter(pic => pic)\n}\n\n/* ========== È°µÈù¢‰∫ã‰ª∂Â§ÑÁêÜ ========== */\n\n/* È°µÈù¢Ëß¶Â∫ï‰∫ã‰ª∂ */\nonReachBottom(() => {\n    console.log('È°µÈù¢Ëß¶Â∫ïÔºåËß¶ÂèëÂä†ËΩΩÊõ¥Â§ö')\n    loadMore()\n})\n\n/* ‰∏ãÊãâÂà∑Êñ∞ */\nonPullDownRefresh(() => {\n    onRefresh()\n})\n\n/* ‰∏ãÊãâÂà∑Êñ∞ */\nfunction onRefresh() {\n    if (refreshing.value) return\n    \n    refreshing.value = true\n    console.log('‰∏ãÊãâÂà∑Êñ∞')\n    getData(true)\n}\n\n/* Ëß¶Â∫ïÂä†ËΩΩÊõ¥Â§ö */\nfunction loadMore() {\n    if (loadingMore.value || finished.value || loading.value) {\n        console.log('Ë∑≥ËøáÂä†ËΩΩ: loadingMore=', loadingMore.value, 'finished=', finished.value, 'loading=', loading.value)\n        return\n    }\n    \n    console.log('Ëß¶Â∫ïÂä†ËΩΩÊõ¥Â§öÔºåÈ°µÁ†Å:', page + 1)\n    loadingMore.value = true\n    page++\n    getData(false)\n}\n\n/* Âà†Èô§ */\nasync function remove(id) {\n    const { confirm } = await uni.showModal({\n        title: 'ÊèêÁ§∫',\n        content: 'Á°ÆËÆ§Âà†Èô§ËøôÊù°ÂÜÖÂÆπÔºü',\n        confirmColor: '#FF5B5B'\n    })\n    if (!confirm) return\n    \n    try {\n        const articlesCloudObj = uniCloud.importObject('articlesCloudObj')\n        const { errCode } = await articlesCloudObj.remove(id)\n        if (errCode === 0) {\n            uni.showToast({ title: 'Â∑≤Âà†Èô§', icon: 'none' })\n            page = 1\n            getData(true)\n        }\n    } catch (error) {\n        console.error('Âà†Èô§Â§±Ë¥•:', error)\n        uni.showToast({ title: 'Âà†Èô§Â§±Ë¥•', icon: 'none' })\n    }\n}\n\n/* ÊªëÂä®Âà†Èô§ - ÁÆÄÂçïÂÆûÁé∞ */\nlet startX = 0\nfunction touchStart(e) {\n    startX = e.touches[0].pageX\n}\nfunction touchEnd(id) {\n    const moveX = event.changedTouches[0].pageX - startX\n    if (moveX < -80) remove(id)\n}\n\n/* ÂèëÂ∏É */\nfunction goAdd() {\n    uni.navigateTo({ url: '/pages/blog/edit' })\n}\n\n// ÁõëÂê¨ÁºñËæëÈ°µÂà∑Êñ∞\nuni.$on('editEvent', () => {\n    console.log('Êî∂Âà∞ÁºñËæë‰∫ã‰ª∂ÔºåÂà∑Êñ∞Êï∞ÊçÆ')\n    page = 1\n    finished.value = false\n    getData(true)\n})\n\n// È°µÈù¢Âç∏ËΩΩÊó∂ÁßªÈô§ÁõëÂê¨\nonUnload(() => {\n    console.log('È°µÈù¢Âç∏ËΩΩ')\n    uni.$off('editEvent')\n})\n</script>\n\n<style lang=\"scss\" scoped>\n/* Ê†∑Âºè‰∏éÂçöÂÆ¢ÂàóË°®È°µÈù¢ÂÆåÂÖ®‰∏ÄËá¥ */\n/* -------------------- ÂèòÈáèÂå∫ -------------------- */\n$primary: #4F8BFF;\n$radius: 32rpx;\n$shadow: 0 8rpx 32rpx rgba(0, 0, 0, .08);\n$transition: all .3s cubic-bezier(.4, 0, .2, 1);\n\n/* -------------------- ‰∏ªÁªìÊûÑ -------------------- */\n.blogList {\n    min-height: 100vh;\n    background: linear-gradient(180deg, #CDE5FF 0%, #E9F3FF 100%);\n    display: flex;\n    flex-direction: column;\n}\n\n/* Â§¥ÈÉ®ÔºöÊØõÁéªÁíÉ */\n.head {\n    position: sticky;\n    top: 0;\n    z-index: 9;\n    backdrop-filter: blur(20rpx);\n    -webkit-backdrop-filter: blur(20rpx);\n    background: rgba(255, 255, 255, .65);\n    box-shadow: 0 2rpx 16rpx rgba(0, 0, 0, .05);\n}\n\n/* ÂÜÖÂÆπÂå∫ */\n.body {\n    flex: 1;\n    background-color: rgba(255, 255, 255, .65);\n    border-radius: $radius $radius 0 0;\n    overflow: hidden;\n    margin-top: -16rpx;\n}\n\n.scrollBox {\n    height: 100%;\n    padding: 24rpx 0rpx 40rpx;\n}\n\n/* È°µÈù¢Ê†áÈ¢ò - ‰øùÊåÅÂéüÊúâÊ†∑Âºè */\n.page-header {\n    padding: 30rpx;\n    background: white;\n    border-radius: 16rpx;\n    margin-bottom: 20rpx;\n    text-align: center;\n    \n    .page-title {\n        display: block;\n        font-size: 36rpx;\n        font-weight: bold;\n        color: #333;\n        margin-bottom: 10rpx;\n    }\n    \n    .page-subtitle {\n        display: block;\n        font-size: 24rpx;\n        color: #999;\n    }\n}\n\n/* Âà∑Êñ∞ÊåáÁ§∫Âô® */\n.refresh-indicator {\n    padding: 20rpx 0;\n    text-align: center;\n}\n\n/* -------------------- È™®Êû∂Â±è -------------------- */\n.skeleton {\n    .skeleton-card {\n        height: 280rpx;\n        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);\n        background-size: 200% 100%;\n        animation: loading 1.2s ease infinite;\n        margin-bottom: 24rpx;\n        border-radius: 24rpx;\n    }\n    @keyframes loading {\n        0% { background-position: 200% 0; }\n        100% { background-position: -200% 0; }\n    }\n}\n\n/* -------------------- Âç°Áâá -------------------- */\n.card {\n    background: #fff;\n    border-radius: 24rpx;\n    padding: 0;\n    margin: 0 24rpx 24rpx;\n    box-shadow: 0 8rpx 32rpx rgba(0, 0, 0, .08);\n    transition: all .3s cubic-bezier(.4, 0, .2, 1);\n    overflow: hidden;\n    \n    &:active { \n        transform: scale(.98); \n        box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, .12);\n    }\n\n    /* ÂïÜÂÆ∂ËØÑ‰ª∑Âç°ÁâáÁâπÊÆäÊ†∑Âºè */\n    &.shop-review {\n        // border-left: 6rpx solid #FF6B35;\n    }\n\n    /* Âç°ÁâáÂÜÖÂÆπÂå∫Âüü - ÂèØÁÇπÂáª */\n    .card-content {\n        /* ÂõæÁâáÂå∫Âüü */\n        .image-area {\n            .content-image {\n                width: 100%;\n                height: 400rpx;\n                background-color: #f5f5f5;\n            }\n        }\n\n        /* Ê†áÈ¢òÂå∫Âüü */\n        .title-area {\n            padding: 20rpx 24rpx 16rpx;\n            \n            .title {\n                font-size: 32rpx;\n                font-weight: 700;\n                color: #222;\n                line-height: 1.4;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n                overflow: hidden;\n            }\n        }\n    }\n\n    /* Â∫ïÈÉ®Â∑•ÂÖ∑Ê†è - Áî®Êà∑/ÂïÜÂÆ∂‰ø°ÊÅØÂíåËØÑËÆ∫ */\n    .toolbar {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 16rpx 24rpx 24rpx;\n        background: #fff;\n        border-top: 1rpx solid #f0f0f0;\n        \n        .content-area {\n            flex: 1;\n            \n            /* Áî®Êà∑‰ø°ÊÅØÂíåËØÑËÆ∫Âå∫Âüü */\n            .user-comment-area {\n                display: flex;\n                align-items: center;\n                gap: 16rpx;\n                \n                .user-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 12rpx;\n                    min-width: 120rpx;\n                    \n                    .user-avatar {\n                        width: 48rpx;\n                        height: 48rpx;\n                        border-radius: 50%;\n                        border: 2rpx solid #f0f0f0;\n                    }\n                    \n                    .username {\n                        font-size: 24rpx;\n                        color: #666;\n                        font-weight: 500;\n                        white-space: nowrap;\n                    }\n                }\n                \n                /* ÂïÜÂÆ∂‰ø°ÊÅØÊ†∑Âºè */\n                .shop-info {\n                    display: flex;\n                    align-items: center;\n                    gap: 12rpx;\n                    min-width: 120rpx;\n                    \n                    .shop-avatar {\n                        width: 48rpx;\n                        height: 48rpx;\n                        border-radius: 12rpx; /* ÂïÜÂÆ∂Â§¥ÂÉèÁî®ÂúÜËßíÁü©ÂΩ¢ */\n                        border: 2rpx solid #f0f0f0;\n                    }\n                    \n                    .shop-name {\n                        font-size: 24rpx;\n                        color: #FF6B35; /* ÂïÜÂÆ∂ÂêçÁß∞Áî®ÁâπÊÆäÈ¢úËâ≤ */\n                        font-weight: 600;\n                        white-space: nowrap;\n                    }\n                    \n                    .shop-rating {\n                        display: flex;\n                        align-items: center;\n                        background: #FFF8E1;\n                        padding: 4rpx 8rpx;\n                        border-radius: 8rpx;\n                        margin-left: 8rpx;\n                        \n                        .rating-star {\n                            color: #FFD700;\n                            font-size: 20rpx;\n                            margin-right: 2rpx;\n                        }\n                        \n                        .rating-value {\n                            font-size: 20rpx;\n                            color: #FF6B35;\n                            font-weight: 600;\n                        }\n                    }\n                }\n            }\n        }\n        \n        .right-actions {\n            display: flex;\n            align-items: center;\n            gap: 12rpx;\n            margin-left: 16rpx;\n            \n            .favorite-btn {\n                width: 48rpx;\n                height: 48rpx;\n                border-radius: 50%;\n                background: #f8f8f8;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                transition: all 0.3s ease;\n                \n                &:active {\n                    transform: scale(0.9);\n                    background: #e0e0e0;\n                }\n            }\n            \n            .delete {\n                width: 48rpx;\n                height: 48rpx;\n                border-radius: 50%;\n                background: linear-gradient(135deg, #FF5B5B 0%, #FF8A8A 100%);\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                transition: all 0.3s ease;\n                \n                &:active { \n                    transform: scale(.9); \n                }\n            }\n        }\n    }\n}\n\n.footer {\n    text-align: center;\n    padding: 40rpx 0;\n    font-size: 24rpx;\n    color: #8B9AB6;\n    \n    .loading-more,\n    .no-more,\n    .pull-up {\n        padding: 20rpx 0;\n    }\n    \n    .no-more {\n        color: #999;\n    }\n    \n    .pull-up {\n        color: #4F8BFF;\n    }\n}\n\n.empty {\n    text-align: center;\n    padding: 100rpx 0;\n    \n    .empty-text {\n        font-size: 28rpx;\n        color: #999;\n    }\n}\n\n/* -------------------- ÊÇ¨ÊµÆÂèëÂ∏ÉÊåâÈíÆ -------------------- */\n.fab {\n    position: fixed;\n    right: 40rpx;\n    bottom: 120rpx;\n    width: 112rpx;\n    height: 112rpx;\n    border-radius: 50%;\n    background: linear-gradient(135deg, #6AA6FF 0%, $primary 100%);\n    box-shadow: 0 8rpx 32rpx rgba($primary, .45);\n    display: grid;\n    place-items: center;\n    animation: fadeIn .6s ease both;\n    transition: $transition;\n    &:active { transform: scale(.9); }\n    .icon {\n        font-size: 56rpx;\n        color: #fff;\n        font-weight: 300;\n    }\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; transform: translateY(40rpx) scale(.8); }\n    to { opacity: 1; transform: translateY(0) scale(1); }\n}\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/self/item.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","event","uni","favoritesManager","uniCloud","onLoad","onReachBottom","onPullDownRefresh","onUnload"],"mappings":"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"}