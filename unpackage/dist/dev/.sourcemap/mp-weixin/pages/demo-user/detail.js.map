{"version":3,"file":"detail.js","sources":["pages/demo-user/detail.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGVtby11c2VyL2RldGFpbC52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <unicloud-db ref=\"udb\" v-slot:default=\"{data, loading, error, options}\" :options=\"options\" :collection=\"collectionList\" field=\"name,age,gender,avatar\" :where=\"queryWhere\" :getone=\"true\" :manual=\"true\">\n      <view v-if=\"error\">{{error.message}}</view>\n      <view v-else-if=\"loading\">\n        <uni-load-more :contentText=\"loadMore\" status=\"loading\"></uni-load-more>\n      </view>\n      <view v-else-if=\"data\">\n        <view>\n          <text>姓名</text>\n          <text>{{data.name}}</text>\n        </view>\n        <view>\n          <text>年龄</text>\n          <text>{{data.age}}</text>\n        </view>\n        <view>\n          <text>性别</text>\n          <text>{{options.gender_valuetotext[data.gender]}}</text>\n        </view>\n        <view>\n          <text>头像</text>\n          <uni-file-picker v-if=\"data.avatar && data.avatar.fileType == 'image'\" :value=\"data.avatar\" :file-mediatype=\"data.avatar && data.avatar.fileType\" return-type=\"object\" readonly></uni-file-picker>\n          <uni-link v-else-if=\"data.avatar\" :href=\"data.avatar.url\" :text=\"data.avatar.url\"></uni-link>\n          <text v-else></text>\n        </view>\n      </view>\n    </unicloud-db>\n    <view class=\"btns\">\n      <button type=\"primary\" @click=\"handleUpdate\">修改</button>\n      <button type=\"warn\" class=\"btn-delete\" @click=\"handleDelete\">删除</button>\n    </view>\n  </view>\n</template>\n\n<script>\n  // 由schema2code生成，包含校验规则和enum静态数据\n  import { enumConverter } from '../../js_sdk/validator/demo-user.js'\n  const db = uniCloud.database()\n\n  export default {\n    data() {\n      return {\n        queryWhere: '',\n        collectionList: \"demo-user\",\n        loadMore: {\n          contentdown: '',\n          contentrefresh: '',\n          contentnomore: ''\n        },\n        options: {\n          // 将scheme enum 属性静态数据中的value转成text\n          ...enumConverter\n        }\n      }\n    },\n    onLoad(e) {\n      this._id = e.id\n    },\n    onReady() {\n      if (this._id) {\n        this.queryWhere = '_id==\"' + this._id + '\"'\n      }\n    },\n    methods: {\n      handleUpdate() {\n        // 打开修改页面\n        uni.navigateTo({\n          url: './edit?id=' + this._id,\n          events: {\n            // 监听修改页面成功修改数据后, 刷新当前页面数据\n            refreshData: () => {\n              this.$refs.udb.loadData({\n                clear: true\n              })\n            }\n          }\n        })\n      },\n      handleDelete() {\n        this.$refs.udb.remove(this._id, {\n          success: (res) => {\n            // 删除数据成功后跳转到list页面\n            uni.navigateTo({\n              url: './list'\n            })\n          }\n        })\n      }\n    }\n  }\n</script>\n\n<style>\n  .container {\n    padding: 10px;\n  }\n\n  .btns {\n    margin-top: 10px;\n    /* #ifndef APP-NVUE */\n    display: flex;\n    /* #endif */\n    flex-direction: row;\n  }\n\n  .btns button {\n    flex: 1;\n  }\n\n  .btn-delete {\n    margin-left: 10px;\n  }\n</style>\n","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/demo-user/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","enumConverter","uni"],"mappings":";;;AAsCaA,cAAQ,GAAC,SAAS;AAE7B,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,gBAAgB;AAAA,MAChB,UAAU;AAAA,QACR,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,eAAe;AAAA,MAChB;AAAA,MACD,SAAS;AAAA;AAAA,QAEP,GAAGC,0BAAY;AAAA,MACjB;AAAA,IACF;AAAA,EACD;AAAA,EACD,OAAO,GAAG;AACR,SAAK,MAAM,EAAE;AAAA,EACd;AAAA,EACD,UAAU;AACR,QAAI,KAAK,KAAK;AACZ,WAAK,aAAa,WAAW,KAAK,MAAM;AAAA,IAC1C;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACP,eAAe;AAEbC,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,eAAe,KAAK;AAAA,QACzB,QAAQ;AAAA;AAAA,UAEN,aAAa,MAAM;AACjB,iBAAK,MAAM,IAAI,SAAS;AAAA,cACtB,OAAO;AAAA,aACR;AAAA,UACH;AAAA,QACF;AAAA,OACD;AAAA,IACF;AAAA,IACD,eAAe;AACb,WAAK,MAAM,IAAI,OAAO,KAAK,KAAK;AAAA,QAC9B,SAAS,CAAC,QAAQ;AAEhBA,wBAAAA,MAAI,WAAW;AAAA,YACb,KAAK;AAAA,WACN;AAAA,QACH;AAAA,OACD;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzFF,GAAG,WAAW,eAAe;"}