{"version":3,"file":"shopFavorites.js","sources":["pages/self/shopFavorites.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VsZi9zaG9wRmF2b3JpdGVzLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"favorites-page\">\n    <!-- Êî∂ËóèÂàóË°® -->\n    <view class=\"favorites-content\">\n      <!-- Êî∂ËóèÁªüËÆ° -->\n      <!-- <view v-if=\"favoritesList.length > 0\" class=\"favorites-stats\">\n        <text class=\"stats-text\">ÂÖ±Êî∂Ëóè {{ favoritesList.length }} ÂÆ∂Â∫óÈì∫</text>\n      </view> -->\n\n      <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\n      <view v-if=\"loading\" class=\"loading-state\">\n        <view class=\"loading-spinner\"></view>\n        <text class=\"loading-text\">Ê≠£Âú®Âä†ËΩΩÊî∂Ëóè...</text>\n      </view>\n\n      <!-- Á©∫Áä∂ÊÄÅ -->\n      <view v-else-if=\"favoritesList.length === 0\" class=\"empty-state\">\n        <view class=\"empty-illustration\">\n          <view class=\"empty-icon\">‚ù§Ô∏è</view>\n          <view class=\"empty-circle\"></view>\n        </view>\n        <text class=\"empty-title\">ÊöÇÊó†Êî∂Ëóè</text>\n        <text class=\"empty-desc\">ÊÇ®ËøòÊ≤°ÊúâÊî∂Ëóè‰ªª‰ΩïÂ∫óÈì∫</text>\n        <button class=\"go-shop-btn\" @click=\"goToShopList\">\n          <text class=\"btn-text\">ÂéªÂèëÁé∞Â∫óÈì∫</text>\n          <text class=\"btn-icon\">‚Üí</text>\n        </button>\n      </view>\n\n      <!-- Êî∂ËóèÂàóË°® -->\n      <view v-else class=\"favorites-list\">\n        <view \n          class=\"favorite-item\" \n          v-for=\"(item, index) in favoritesList\" \n          :key=\"item.favoriteId\"\n          :style=\"{ animationDelay: `${index * 0.05}s` }\"\n          @click=\"goToShopDetail(item.shopInfo._id)\"\n        >\n          <!-- Â∫óÈì∫ÂõæÁâá -->\n          <view class=\"shop-image-container\">\n            <image \n              class=\"shop-image\" \n              :src=\"item.shopInfo.shopPic || '/static/default-shop.jpg'\" \n              mode=\"aspectFill\"\n              @error=\"handleImageError\"\n            />\n            <view class=\"shop-overlay\">\n              <view class=\"favorite-tag\">\n                <text class=\"favorite-icon\">‚ù§</text>\n                <text class=\"favorite-text\">Â∑≤Êî∂Ëóè</text>\n              </view>\n              <view class=\"business-status-tag\" :class=\"{ open: isShopOpen(item.shopInfo), closed: !isShopOpen(item.shopInfo) }\">\n                {{ isShopOpen(item.shopInfo) ? 'Ëê•‰∏ö‰∏≠' : 'Â∑≤ÊâìÁÉä' }}\n              </view>\n            </view>\n          </view>\n\n          <!-- Â∫óÈì∫‰ø°ÊÅØ -->\n          <view class=\"shop-info\">\n            <!-- Â∫óÈì∫ÂêçÁß∞ÂíåËÆ§ËØÅ -->\n            <view class=\"shop-header\">\n              <view class=\"shop-name-wrapper\">\n                <text class=\"shop-name\">{{ item.shopInfo.shopName }}</text>\n                <view class=\"verified-badge\" v-if=\"item.shopInfo.isVerified\">\n                  <text class=\"verified-icon\">‚úì</text>\n                </view>\n              </view>\n              <!-- Â∫ïÈÉ®Âõ∫ÂÆöÂå∫Âüü -->\n              <view class=\"bottom-fixed-area\">\n                <!-- Âè≥‰∏ãËßíÂõ∫ÂÆöÂå∫Âüü -->\n                <view class=\"right-bottom-area\">\n                  <!-- ËØÑÂàÜ -->\n                  <view class=\"rating-wrapper\">\n                    <view class=\"rating-stars\">\n                      <text class=\"star filled\">‚òÖ</text>\n                      <text class=\"star filled\">‚òÖ</text>\n                      <text class=\"star filled\">‚òÖ</text>\n                      <text class=\"star filled\">‚òÖ</text>\n                      <text class=\"star\" :class=\"{ 'half-filled': (item.shopInfo.rating || 0) % 2 !== 0 }\">‚òÖ</text>\n                    </view>\n                    <text class=\"rating-value\">{{ ((item.shopInfo.rating || 0) / 10).toFixed(1) }}</text>\n                  </view>\n                  <!-- ÂèñÊ∂àÊî∂ËóèÊåâÈíÆ -->\n                  <view class=\"cancel-favorite-btn\" @click.stop=\"cancelFavorite(item)\">\n                    <text class=\"cancel-icon\">‚ù§Ô∏è</text>\n                  </view>\n                </view>\n              </view>\n            </view>\n          </view>\n        </view>\n\n        <!-- Âä†ËΩΩÊõ¥Â§ö -->\n        <view class=\"load-more-section\">\n          <view class=\"load-more\" v-if=\"hasMore\" @click=\"loadMore\">\n            <text class=\"load-more-text\">Âä†ËΩΩÊõ¥Â§ö</text>\n            <view class=\"load-more-spinner\" v-if=\"loading\"></view>\n          </view>\n          <view class=\"no-more\" v-else>\n            <view class=\"no-more-line\"></view>\n            <text class=\"no-more-text\">Â∑≤ÁªèÂà∞Â∫ï‰∫Ü</text>\n            <view class=\"no-more-line\"></view>\n          </view>\n        </view>\n      </view>\n    </view>\n\n    <!-- ÊµÆÂä®Âú∞ÂõæÊåâÈíÆ -->\n    <view class=\"floating-map-btn\" v-if=\"favoritesList.length > 0\" @click=\"goToFavoritesMap\">\n      <view class=\"floating-btn-content\">\n        <text class=\"floating-map-icon\">üó∫Ô∏è</text>\n        <text class=\"floating-btn-text\">Âú∞ÂõæÊü•Áúã</text>\n      </view>\n      <view class=\"pulse-effect\"></view>\n    </view>\n\n    <!-- Êìç‰ΩúÁ°ÆËÆ§ÂºπÁ™ó -->\n    <uni-popup ref=\"confirmPopup\" type=\"dialog\">\n      <uni-popup-dialog \n        type=\"warn\" \n        title=\"ÂèñÊ∂àÊî∂Ëóè\" \n        content=\"Á°ÆÂÆöË¶ÅÂèñÊ∂àÊî∂ËóèËØ•Â∫óÈì∫ÂêóÔºü\" \n        :before-close=\"true\" \n        @close=\"handleCancelClose\" \n        @confirm=\"handleCancelConfirm\"\n      ></uni-popup-dialog>\n    </uni-popup>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { onLoad, onShow } from '@dcloudio/uni-app';\n\n// ÂìçÂ∫îÂºèÊï∞ÊçÆ\nconst favoritesList = ref([]);\nconst loading = ref(false);\nconst hasMore = ref(true);\nconst currentPage = ref(1);\nconst pageSize = ref(10);\n\n// Áî®Êà∑Áõ∏ÂÖ≥\nconst isLoggedIn = ref(false);\nconst userId = ref('');\nconst currentUser = ref(null);\n\n// ÂºπÁ™óÁõ∏ÂÖ≥\nconst confirmPopup = ref(null);\nconst currentCancelItem = ref(null);\n\n// ÁîüÂëΩÂë®Êúü\nonLoad(() => {\n  console.log('üîÑ Êî∂ËóèÈ°µÈù¢Âä†ËΩΩ');\n  checkLoginStatus();\n});\n\nonShow(() => {\n  console.log('üîÑ Êî∂ËóèÈ°µÈù¢ÊòæÁ§∫');\n  checkLoginStatus();\n});\n\n// Ë∑≥ËΩ¨Âà∞Êî∂ËóèÂ∫óÈì∫Âú∞ÂõæÈ°µÈù¢\nfunction goToFavoritesMap() {\n  if (favoritesList.value.length === 0) {\n    uni.showToast({\n      title: 'ÊöÇÊó†Êî∂ËóèÂ∫óÈì∫',\n      icon: 'none'\n    });\n    return;\n  }\n\n  // ‰º†ÈÄíÊî∂ËóèÂ∫óÈì∫Êï∞ÊçÆÂà∞Âú∞ÂõæÈ°µÈù¢\n  const shopsData = favoritesList.value.map(item => ({\n    id: item.shopInfo._id,\n    name: item.shopInfo.shopName,\n    address: item.shopInfo.address,\n    latitude: item.shopInfo.latitude || 39.90923, // ÈªòËÆ§Âåó‰∫¨ÂùêÊ†á\n    longitude: item.shopInfo.longitude || 116.397428,\n    shopPic: item.shopInfo.shopPic,\n    rating: item.shopInfo.rating,\n    deliveryFee: item.shopInfo.deliveryFee,\n    isVerified: item.shopInfo.isVerified,\n    businessHours: item.shopInfo.businessHours\n  }));\n\n  uni.navigateTo({\n    url: `/pages/showMap/showFavoritesMap?shops=${encodeURIComponent(JSON.stringify(shopsData))}`\n  });\n}\n\n// Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ\nasync function checkLoginStatus() {\n  try {\n    console.log('üîç ÂºÄÂßãÊ£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅ...');\n    \n    const userInfoFromStorage = uni.getStorageSync('uni-id-pages-userInfo');\n    const token = uni.getStorageSync('uni_id_token');\n    \n    console.log('üì¶ Â≠òÂÇ®Ê£ÄÊü•ÁªìÊûú:', {\n      hasToken: !!token,\n      hasUserInfo: !!userInfoFromStorage,\n      userInfo: userInfoFromStorage\n    });\n    \n    if (token && userInfoFromStorage && userInfoFromStorage._id) {\n      isLoggedIn.value = true;\n      userId.value = userInfoFromStorage._id;\n      currentUser.value = userInfoFromStorage;\n      \n      console.log('‚úÖ Áî®Êà∑Â∑≤ÁôªÂΩï:', {\n        userId: userId.value,\n        userInfo: currentUser.value\n      });\n      \n      await loadFavorites(true);\n      return;\n    }\n    \n    const oldUserInfo = uni.getStorageSync('uni_id_userinfo');\n    if (token && oldUserInfo && oldUserInfo._id) {\n      isLoggedIn.value = true;\n      userId.value = oldUserInfo._id;\n      currentUser.value = oldUserInfo;\n      \n      console.log('‚úÖ ‰ªéÊóßÂ≠òÂÇ®ÈîÆÂêçËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÊàêÂäü');\n      \n      uni.setStorageSync('uni-id-pages-userInfo', oldUserInfo);\n      await loadFavorites(true);\n      return;\n    }\n    \n    isLoggedIn.value = false;\n    userId.value = '';\n    currentUser.value = null;\n    favoritesList.value = [];\n    \n    console.log('‚ùå Áî®Êà∑Êú™ÁôªÂΩïÊàñ‰ø°ÊÅØ‰∏çÂÆåÊï¥');\n    showLoginPrompt();\n    \n  } catch (error) {\n    console.error('‚ùå Ê£ÄÊü•ÁôªÂΩïÁä∂ÊÄÅÂ§±Ë¥•:', error);\n    isLoggedIn.value = false;\n    userId.value = '';\n    currentUser.value = null;\n    favoritesList.value = [];\n    \n    showLoginPrompt();\n  }\n}\n\n// ÊòæÁ§∫ÁôªÂΩïÊèêÁ§∫\nfunction showLoginPrompt() {\n  uni.showModal({\n    title: 'ÊèêÁ§∫',\n    content: 'ËØ∑ÂÖàÁôªÂΩïÊü•ÁúãÊî∂Ëóè',\n    confirmText: 'ÂéªÁôªÂΩï',\n    cancelText: 'ËøîÂõû',\n    success: (res) => {\n      if (res.confirm) {\n        uni.navigateTo({\n          url: '/pages/login/login'\n        });\n      } else {\n        uni.navigateBack();\n      }\n    }\n  });\n}\n\n// Âä†ËΩΩÊî∂ËóèÂàóË°®\nasync function loadFavorites(reset = false) {\n  if (loading.value) return;\n  \n  if (!isLoggedIn.value || !userId.value) {\n    console.log('‚ùå Âä†ËΩΩÊî∂ËóèÂâçÊ£ÄÊü•: Áî®Êà∑Êú™ÁôªÂΩï');\n    showLoginPrompt();\n    return;\n  }\n  \n  if (reset) {\n    currentPage.value = 1;\n    favoritesList.value = [];\n    hasMore.value = true;\n  }\n  \n  if (!hasMore.value && !reset) return;\n  \n  loading.value = true;\n  \n  try {\n    console.log('üîÑ ÂºÄÂßãÂä†ËΩΩÊî∂ËóèÂàóË°®...', {\n      userId: userId.value,\n      page: currentPage.value,\n      size: pageSize.value\n    });\n    \n    const articlesCo = uniCloud.importObject('articlesCloudObj');\n    \n    const res = await articlesCo.getShopFavoritesList({\n      page: currentPage.value,\n      size: pageSize.value,\n      userId: userId.value\n    });\n    \n    console.log('üìã Êî∂ËóèÂàóË°®ÂìçÂ∫î:', res);\n    \n    if (res.errCode === 0) {\n      const newList = res.data.list || [];\n      \n      if (reset) {\n        favoritesList.value = newList;\n      } else {\n        favoritesList.value = [...favoritesList.value, ...newList];\n      }\n      \n      hasMore.value = res.data.hasMore || false;\n      currentPage.value += 1;\n      \n      console.log('‚úÖ Êî∂ËóèÂàóË°®Âä†ËΩΩÊàêÂäüÔºåÊï∞Èáè:', favoritesList.value.length);\n    } else if (res.errCode === 1001) {\n      console.log('‚ùå ‰∫ëÂáΩÊï∞ËøîÂõûÊú™ÁôªÂΩïÁä∂ÊÄÅ');\n      handleNotLogin();\n    } else {\n      throw new Error(res.errMsg);\n    }\n  } catch (error) {\n    console.error('‚ùå Âä†ËΩΩÊî∂ËóèÂàóË°®Â§±Ë¥•:', error);\n    uni.showToast({\n      title: 'Âä†ËΩΩÂ§±Ë¥•',\n      icon: 'none'\n    });\n    \n    if (error.message && error.message.includes('Êú™ÁôªÂΩï')) {\n      handleNotLogin();\n    }\n  } finally {\n    loading.value = false;\n  }\n}\n\n// Â§ÑÁêÜÊú™ÁôªÂΩïÁä∂ÊÄÅ\nfunction handleNotLogin() {\n  console.log('üîÑ Â§ÑÁêÜÊú™ÁôªÂΩïÁä∂ÊÄÅ');\n  \n  isLoggedIn.value = false;\n  userId.value = '';\n  currentUser.value = null;\n  favoritesList.value = [];\n  \n  uni.removeStorageSync('uni_id_token');\n  uni.removeStorageSync('uni-id-pages-userInfo');\n  uni.removeStorageSync('uni_id_token_expired');\n  \n  showLoginPrompt();\n}\n\n// ÂèñÊ∂àÊî∂Ëóè\nfunction cancelFavorite(item) {\n  if (!isLoggedIn.value || !userId.value) {\n    showLoginPrompt();\n    return;\n  }\n  \n  currentCancelItem.value = item;\n  confirmPopup.value.open();\n}\n\n// Â§ÑÁêÜÂèñÊ∂àÊî∂ËóèÁ°ÆËÆ§\nasync function handleCancelConfirm() {\n  if (!currentCancelItem.value) return;\n  \n  if (!isLoggedIn.value || !userId.value) {\n    showLoginPrompt();\n    return;\n  }\n  \n  try {\n    const articlesCo = uniCloud.importObject('articlesCloudObj');\n    \n    const res = await articlesCo.toggleShopFavorite({\n      shopId: currentCancelItem.value.shopInfo._id,\n      userId: userId.value\n    });\n    \n    console.log('üì° ÂèñÊ∂àÊî∂ËóèÂìçÂ∫î:', res);\n    \n    if (res.errCode === 0) {\n      const index = favoritesList.value.findIndex(\n        item => item.favoriteId === currentCancelItem.value.favoriteId\n      );\n      \n      if (index !== -1) {\n        favoritesList.value.splice(index, 1);\n      }\n      \n      uni.showToast({\n        title: 'Â∑≤ÂèñÊ∂àÊî∂Ëóè',\n        icon: 'success'\n      });\n    } else if (res.errCode === 1001) {\n      handleNotLogin();\n    } else {\n      throw new Error(res.errMsg);\n    }\n  } catch (error) {\n    console.error('‚ùå ÂèñÊ∂àÊî∂ËóèÂ§±Ë¥•:', error);\n    uni.showToast({\n      title: 'ÂèñÊ∂àÊî∂ËóèÂ§±Ë¥•',\n      icon: 'none'\n    });\n  } finally {\n    currentCancelItem.value = null;\n    confirmPopup.value.close();\n  }\n}\n\n// ÂÖ∂‰ªñÊñπÊ≥ï\nfunction loadMore() {\n  if (!hasMore.value || loading.value) return;\n  loadFavorites();\n}\n\nfunction handleCancelClose() {\n  currentCancelItem.value = null;\n  confirmPopup.value.close();\n}\n\nfunction isShopOpen(shopInfo) {\n  if (!shopInfo?.businessHours) return true;\n  \n  const hoursStr = shopInfo.businessHours;\n  const [start, end] = hoursStr.split('-');\n  \n  if (!start || !end) return true;\n  \n  const now = new Date();\n  const currentHours = now.getHours();\n  const currentMinutes = now.getMinutes();\n  const currentTime = currentHours * 60 + currentMinutes;\n  \n  const [startHours, startMinutes] = start.split(':').map(Number);\n  const [endHours, endMinutes] = end.split(':').map(Number);\n  \n  const startTime = startHours * 60 + (startMinutes || 0);\n  const endTime = endHours * 60 + (endMinutes || 0);\n  \n  return currentTime >= startTime && currentTime <= endTime;\n}\n\nfunction goToShopDetail(shopId) {\n  uni.navigateTo({\n    url: `/pages/shopList/shopDetail?id=${shopId}`\n  });\n}\n\nfunction goToShopList() {\n  uni.switchTab({\n    url: '/pages/shopList/shopList'\n  });\n}\n\nfunction handleImageError(e) {\n  console.log('ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', e);\n  e.target.src = '/static/default-shop.jpg';\n}\n\nfunction formatNumber(num) {\n  if (num >= 10000) {\n    return (num / 10000).toFixed(1) + '‰∏á';\n  }\n  return num.toString();\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$primary: #FF6B35;\n$secondary: #4A6CF7;\n$accent: #FF9F43;\n$text: #2d3748;\n$light-text: #718096;\n$border-color: #e2e8f0;\n$bg-color: #f8fafc;\n$card-shadow: 0 8rpx 30rpx rgba(0, 0, 0, 0.08);\n\n.favorites-page {\n  min-height: 100vh;\n  background: linear-gradient(135deg, #f5f7fa 0%, #f8fafc 100%);\n}\n\n/* ‰∏ªË¶ÅÂÜÖÂÆπ */\n.favorites-content {\n  padding: 30rpx;\n}\n\n/* Êî∂ËóèÁªüËÆ° */\n.favorites-stats {\n  margin-bottom: 30rpx;\n  padding: 20rpx 0;\n  \n  .stats-text {\n    font-size: 26rpx;\n    color: $light-text;\n    font-weight: 500;\n  }\n}\n\n/* Âä†ËΩΩÁä∂ÊÄÅ */\n.loading-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 120rpx 0;\n  \n  .loading-spinner {\n    width: 60rpx;\n    height: 60rpx;\n    border: 4rpx solid #e2e8f0;\n    border-top: 4rpx solid $primary;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-bottom: 24rpx;\n  }\n  \n  .loading-text {\n    font-size: 28rpx;\n    color: $light-text;\n  }\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* Á©∫Áä∂ÊÄÅ */\n.empty-state {\n  text-align: center;\n  padding: 160rpx 40rpx;\n  \n  .empty-illustration {\n    position: relative;\n    width: 200rpx;\n    height: 200rpx;\n    margin: 0 auto 40rpx;\n    \n    .empty-icon {\n      font-size: 100rpx;\n      position: relative;\n      z-index: 2;\n      animation: float 3s ease-in-out infinite;\n    }\n    \n    .empty-circle {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 160rpx;\n      height: 160rpx;\n      background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 159, 67, 0.1) 100%);\n      border-radius: 50%;\n      z-index: 1;\n    }\n  }\n  \n  .empty-title {\n    font-size: 36rpx;\n    font-weight: 700;\n    color: $text;\n    margin-bottom: 16rpx;\n    display: block;\n  }\n  \n  .empty-desc {\n    font-size: 28rpx;\n    color: $light-text;\n    margin-bottom: 60rpx;\n    display: block;\n  }\n  \n  .go-shop-btn {\n    background: linear-gradient(135deg, $primary 0%, $accent 100%);\n    color: white;\n    border: none;\n    border-radius: 50rpx;\n    padding: 24rpx 60rpx;\n    font-size: 28rpx;\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n    box-shadow: 0 8rpx 24rpx rgba(255, 107, 53, 0.3);\n    transition: all 0.3s ease;\n    \n    &:active {\n      transform: translateY(2rpx);\n      box-shadow: 0 4rpx 12rpx rgba(255, 107, 53, 0.3);\n    }\n    \n    .btn-text {\n      font-weight: 600;\n    }\n    \n    .btn-icon {\n      font-size: 24rpx;\n      transition: transform 0.3s ease;\n    }\n    \n    &:active .btn-icon {\n      transform: translateX(4rpx);\n    }\n  }\n}\n\n@keyframes float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-10rpx); }\n}\n\n/* Êî∂ËóèÂàóË°® */\n.favorites-list {\n  .favorite-item {\n    background: white;\n    border-radius: 24rpx;\n    margin-bottom: 30rpx;\n    box-shadow: $card-shadow;\n    overflow: hidden;\n    animation: slideUp 0.5s ease both;\n    transition: all 0.3s ease;\n    \n    &:active {\n      transform: scale(0.98);\n      box-shadow: 0 4rpx 15rpx rgba(0, 0, 0, 0.1);\n    }\n    \n    /* Â∫óÈì∫ÂõæÁâáÂÆπÂô® */\n    .shop-image-container {\n      position: relative;\n      height: 320rpx;\n      \n      .shop-image {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n      \n      .shop-overlay {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.4) 100%);\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        padding: 24rpx;\n        \n        .favorite-tag {\n          background: rgba(255, 255, 255, 0.9);\n          border-radius: 20rpx;\n          padding: 8rpx 16rpx;\n          display: flex;\n          align-items: center;\n          gap: 6rpx;\n          backdrop-filter: blur(10rpx);\n          \n          .favorite-icon {\n            font-size: 20rpx;\n            color: $primary;\n          }\n          \n          .favorite-text {\n            font-size: 22rpx;\n            color: $text;\n            font-weight: 600;\n          }\n        }\n        \n        .business-status-tag {\n          background: rgba(255, 255, 255, 0.9);\n          border-radius: 20rpx;\n          padding: 8rpx 16rpx;\n          font-size: 22rpx;\n          font-weight: 600;\n          backdrop-filter: blur(10rpx);\n          \n          &.open {\n            color: #059669;\n          }\n          \n          &.closed {\n            color: #dc2626;\n          }\n        }\n      }\n    }\n    \n    /* Â∫óÈì∫‰ø°ÊÅØ */\n    .shop-info {\n      padding: 24rpx;\n      \n      .shop-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: flex-start;\n        \n        .shop-name-wrapper {\n          display: flex;\n          align-items: center;\n          gap: 12rpx;\n          flex: 1;\n          \n          .shop-name {\n            padding-top: 8rpx;\n            font-size: 38rpx;\n            font-weight: 700;\n            color: $text;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n          \n          .verified-badge {\n            background: linear-gradient(135deg, #4299e1, #3182ce);\n            color: white;\n            width: 36rpx;\n            height: 36rpx;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-shrink: 0;\n            \n            .verified-icon {\n              font-size: 20rpx;\n              font-weight: bold;\n            }\n          }\n        }\n      }\n      \n      /* Â∫ïÈÉ®Âõ∫ÂÆöÂå∫Âüü */\n      .bottom-fixed-area {\n        display: flex;\n        align-items: flex-end;\n        justify-content: space-between;\n        gap: 16rpx;\n        \n        .address-container {\n          flex: 1;\n          min-width: 0;\n          \n          .address-text {\n            font-size: 24rpx;\n            color: $light-text;\n            line-height: 1.4;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            display: block;\n          }\n        }\n        \n        /* Âè≥‰∏ãËßíÂõ∫ÂÆöÂå∫Âüü */\n        .right-bottom-area {\n          display: flex;\n          align-items: center;\n          gap: 16rpx;\n          flex-shrink: 0;\n          \n          /* ËØÑÂàÜ */\n          .rating-wrapper {\n            display: flex;\n            align-items: center;\n            gap: 8rpx;\n            \n            .rating-stars {\n              display: flex;\n              gap: 2rpx;\n              \n              .star {\n                font-size: 20rpx;\n                color: #e2e8f0;\n                \n                &.filled {\n                  color: #ffd700;\n                }\n                \n                &.half-filled {\n                  background: linear-gradient(90deg, #ffd700 50%, #e2e8f0 50%);\n                  background-clip: text;\n                  -webkit-background-clip: text;\n                  -webkit-text-fill-color: transparent;\n                }\n              }\n            }\n            \n            .rating-value {\n              font-size: 20rpx;\n              font-weight: 600;\n              color: #f6ad55;\n            }\n          }\n          \n          /* ÂèñÊ∂àÊî∂ËóèÊåâÈíÆ */\n          .cancel-favorite-btn {\n            background: #f8fafc;\n            width: 48rpx;\n            height: 48rpx;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: all 0.3s ease;\n            flex-shrink: 0;\n            \n            &:active {\n              background: #e2e8f0;\n              transform: scale(0.9);\n            }\n            \n            .cancel-icon {\n              font-size: 22rpx;\n            }\n          }\n        }\n      }\n    }\n  }\n  \n  @keyframes slideUp {\n    from {\n      opacity: 0;\n      transform: translateY(30rpx);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  /* Âä†ËΩΩÊõ¥Â§ö */\n  .load-more-section {\n    padding: 40rpx 0;\n    \n    .load-more {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      gap: 16rpx;\n      padding: 24rpx;\n      background: white;\n      border-radius: 16rpx;\n      box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.06);\n      transition: all 0.3s ease;\n      \n      &:active {\n        background: #f8fafc;\n      }\n      \n      .load-more-text {\n        font-size: 28rpx;\n        color: $primary;\n        font-weight: 600;\n      }\n      \n      .load-more-spinner {\n        width: 32rpx;\n        height: 32rpx;\n        border: 2rpx solid #e2e8f0;\n        border-top: 2rpx solid $primary;\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n      }\n    }\n    \n    .no-more {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      gap: 24rpx;\n      \n      .no-more-line {\n        flex: 1;\n        height: 1rpx;\n        background: linear-gradient(90deg, transparent 0%, $border-color 50%, transparent 100%);\n      }\n      \n      .no-more-text {\n        font-size: 26rpx;\n        color: $light-text;\n        flex-shrink: 0;\n      }\n    }\n  }\n}\n\n/* ÊµÆÂä®Âú∞ÂõæÊåâÈíÆ */\n.floating-map-btn {\n  position: fixed;\n  right: 30rpx;\n  bottom: 60rpx;\n  z-index: 100;\n\n  .floating-btn-content {\n    position: relative;\n    z-index: 2;\n    background: linear-gradient(135deg, #FF6B35, #FF8E53);\n    border-radius: 50rpx;\n    padding: 20rpx 32rpx;\n    display: flex;\n    align-items: center;\n    gap: 12rpx;\n    box-shadow: 0 8rpx 32rpx rgba(255, 107, 53, 0.4);\n    transition: all 0.3s ease;\n    \n\n    &:active {\n      transform: scale(0.95);\n      box-shadow: 0 4rpx 16rpx rgba(255, 107, 53, 0.6);\n    }\n    \n    .floating-map-icon {\n      font-size: 36rpx;\n    }\n    \n    .floating-btn-text {\n      font-size: 26rpx;\n      font-weight: 600;\n      color: white;\n    }\n\n  }\n\n  .pulse-effect {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(135deg, #FF6B35, #FF8E53);\n    border-radius: 50rpx;\n    animation: pulse 2s infinite;\n    z-index: 1;\n  }\n\n  @keyframes pulse {\n    0% {\n      transform: translate(-50%, -50%) scale(1);\n      opacity: 0.8;\n    }\n    70% {\n      transform: translate(-50%, -50%) scale(1.1);\n      opacity: 0;\n    }\n    100% {\n      transform: translate(-50%, -50%) scale(1);\n      opacity: 0;\n    }\n  }\n}\n\n/* ÂìçÂ∫îÂºèË∞ÉÊï¥ */\n@media (max-width: 375px) {\n  .favorites-content {\n    padding: 20rpx;\n  }\n  \n  .favorite-item {\n    .shop-info {\n      padding: 24rpx;\n    }\n    \n    .bottom-fixed-area {\n      .right-bottom-area {\n        gap: 12rpx;\n        \n        .rating-wrapper {\n          gap: 6rpx;\n          \n          .rating-stars {\n            .star {\n              font-size: 18rpx;\n            }\n          }\n          \n          .rating-value {\n            font-size: 18rpx;\n          }\n        }\n        \n        .cancel-favorite-btn {\n          width: 44rpx;\n          height: 44rpx;\n          \n          .cancel-icon {\n            font-size: 20rpx;\n          }\n        }\n      }\n    }\n  }\n\n  .floating-map-btn {\n    right: 20rpx;\n    bottom: 100rpx;\n    \n\n    .floating-btn-content {\n      padding: 16rpx 24rpx;\n      \n      .floating-map-icon {\n        font-size: 32rpx;\n      }\n      \n      .floating-btn-text {\n        font-size: 24rpx;\n      }\n    }\n\n  }\n}\n</style>","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/self/shopFavorites.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onLoad","uni","onShow","uniCloud"],"mappings":"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"}