{"version":3,"file":"classify.js","sources":["pages/wallpaper/classify.vue","E:/movie/HBuilderX.4.57.2025032507/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvd2FsbHBhcGVyL2NsYXNzaWZ5LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"layout\">\t\t\n\t\t<view class=\"add\">\n\t\t\t<input class=\"ipt\" type=\"text\" v-model=\"classname\" placeholder=\"请输入分类名称\" @confirm=\"onConfirm\">\t\t\t\n\t\t</view>\n\t\t<view class=\"list\">\n\t\t\t<view class=\"item\" v-for=\"item in classList\" :key=\"item._id\">\t\t\n\t\t\t\t<view class=\"name\" >{{item.name}}</view>\n\t\t\t\t<view class=\"status\">\n\t\t\t\t\t<switch :checked=\"item.status\" style=\"transform:scale(0.6)\" \r\n                    @change=\"(e)=>switchChange(e,item._id)\"/>\r\n                    <!-- 为了获取switchChange中的数据使用e， item._id输出id -->\n\t\t\t\t</view>\n\t\t\t\t<view class=\"remove\">\n\t\t\t\t\t<uni-icons type=\"trash\" size=\"26\" @click=\"handleRemove(item._id)\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</view> \n\t\t</view>\n\t</view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\r\n//保存输入分类名称\nconst classname = ref(\"\");\r\n//分类名称\nconst classList = ref([]);\nconst db = uniCloud.database();\n\n\nconst getClassify = async()=>{\r\n    //获取demo-classify里面的数据\r\n    let res = await db.collection(\"demo-classify\")\r\n    .orderBy(\"createTime desc\")\r\n    .get();\r\n    \r\n    console.log(res);\r\n    classList.value = res.result.data;\n}\n\r\n\r\n// 数据显示开关\nconst switchChange = async(e,id)=>{\n    let res = await db.collection(\"demo-classify\").doc(id).update({\r\n        status:e.detail.value\r\n    })\r\n    console.log(res);\r\n    await  getClassify();\r\n}\n\n//删除功能\nconst handleRemove = async(id)=>{\n    uni.showLoading({mask:true});\r\n    \r\n    let feed = await uni.showModal({\r\n        title:\"是否删除该数据\"\r\n    })\r\n    if(!feed.confirm) return uni.hideLoading();\r\n    \r\n    // let res = await db.collection(\"demo-classify\").where(`_id == \"${id}\"`).remove();\r\n    let res = await db.collection(\"demo-classify\").doc(id).remove();\r\n    console.log(res);\r\n    uni.showToast({\r\n        title: '删除成功',\r\n        icon:\"none\"\r\n    });\r\n    await getClassify();\r\n    \r\n}\n\r\n//回车确认事件\nconst onConfirm = async()=>{\r\n    uni.showLoading({});\n    let res = await db.collection(\"demo-classify\").add({\r\n        name:classname.value\r\n    })\r\n    uni.showToast({\r\n        title:\"添加成功\",\r\n        icon:\"none\"\r\n    })\r\n    \r\n    classname.value = '';                         // 清空输入框\r\n    uni.hideKeyboard();                           // 收起键盘\r\n    await getClassify();                          // 立即重新拉数据 → 页面自动刷新\r\n  \r\n}\n\ngetClassify();\n\n</script>\n\n<style lang=\"scss\" scoped>\n.layout{\n\tpadding:30rpx;\n\t.add{\n\t\tmargin-bottom: 30rpx;\n\t\tdisplay: flex;\n\t\tgap:20rpx;\n\t\t.ipt{\n\t\t\twidth: 100%;\n\t\t\tborder:1px solid #eee;\n\t\t\theight: 70rpx;\n\t\t\tpadding:0 20rpx;\n\t\t\tbox-sizing: border-box;\n\t\t}\t\t\n\t}\n\t.item{\n\t\tdisplay: flex;\n\t\tpadding:10rpx 0;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\t.name{\n\t\t\tcolor:#007AFF;\n\t\t\tflex:1;\n\t\t}\n\t\t.status{\n\t\t\twidth: 100rpx;\t\t\t\n\t\t}\n\t\t.remove{\n\t\t\twidth:100rpx;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: flex-end;\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from 'D:/uni-app/uniCloudDemo0717/pages/wallpaper/classify.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uniCloud","uni"],"mappings":";;;;;;;;;;;;;AAwBA,UAAM,YAAYA,cAAAA,IAAI,EAAE;AAExB,UAAM,YAAYA,cAAAA,IAAI,CAAA,CAAE;AACxB,UAAM,KAAKC,cAAAA,GAAS;AAGpB,UAAM,cAAc,YAAS;AAEzB,UAAI,MAAM,MAAM,GAAG,WAAW,eAAe,EAC5C,QAAQ,iBAAiB,EACzB;AAEDC,oBAAAA,MAAA,MAAA,OAAA,sCAAY,GAAG;AACf,gBAAU,QAAQ,IAAI,OAAO;AAAA,IACjC;AAIA,UAAM,eAAe,OAAM,GAAE,OAAK;AAC9B,UAAI,MAAM,MAAM,GAAG,WAAW,eAAe,EAAE,IAAI,EAAE,EAAE,OAAO;AAAA,QAC1D,QAAO,EAAE,OAAO;AAAA,MACxB,CAAK;AACDA,oBAAAA,MAAA,MAAA,OAAA,sCAAY,GAAG;AACf,YAAO,YAAW;AAAA,IACtB;AAGA,UAAM,eAAe,OAAM,OAAK;AAC5BA,oBAAAA,MAAI,YAAY,EAAC,MAAK,KAAI,CAAC;AAE3B,UAAI,OAAO,MAAMA,cAAG,MAAC,UAAU;AAAA,QAC3B,OAAM;AAAA,MACd,CAAK;AACD,UAAG,CAAC,KAAK;AAAS,eAAOA,cAAG,MAAC,YAAW;AAGxC,UAAI,MAAM,MAAM,GAAG,WAAW,eAAe,EAAE,IAAI,EAAE,EAAE;AACvDA,oBAAAA,MAAA,MAAA,OAAA,sCAAY,GAAG;AACfA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAO;AAAA,QACP,MAAK;AAAA,MACb,CAAK;AACD,YAAM,YAAW;AAAA,IAErB;AAGA,UAAM,YAAY,YAAS;AACvBA,0BAAI,YAAY,CAAA,CAAE;AACR,YAAM,GAAG,WAAW,eAAe,EAAE,IAAI;AAAA,QAC/C,MAAK,UAAU;AAAA,MACvB,CAAK;AACDA,oBAAAA,MAAI,UAAU;AAAA,QACV,OAAM;AAAA,QACN,MAAK;AAAA,MACb,CAAK;AAED,gBAAU,QAAQ;AAClBA,oBAAG,MAAC,aAAY;AAChB,YAAM,YAAW;AAAA,IAErB;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;ACtFA,GAAG,WAAW,eAAe;"}